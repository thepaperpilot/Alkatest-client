/* empty css                    */import"./vue.16af0ac0.js";import{Z as I,l as ce,u as tn,q as ht,C as i,b1 as de,aa as G,z as We,w as gt,ay as nn,aE as m,a0 as $,a1 as c,_ as U,aN as Ne,$ as F,b8 as Mt,br as mr,G as oe,bu as mt,A as be,aq as et,t as C,a8 as N,b6 as E,O as Y,aJ as ze,J as A,bb as lt,I as ve,aL as jt,bs as rn,bc as vn,ar as De,aK as Ge,aG as Pt,T as hr,a7 as z,j as gr,bv as _n,aH as Pe,aF as Ie,b2 as Rt,bn as yr,be as vr}from"./@vue.8948d9b0.js";import{i as _r}from"./is-plain-object.906d88e8.js";import{c as In}from"./nanoevents.1080beb7.js";import{L as ke}from"./lz-string.f2f3b7cf.js";import{p as br}from"./vue-textarea-autosize.35804eaf.js";import{l as Nr}from"./socket.io-client.03bb8f3a.js";import{n as wr,l as $r,t as Sr,r as Tr}from"./unique-names-generator.9178d3e3.js";import{u as On,s as Mr}from"./vue-toastification.f2ea6c9a.js";import{s as Cr}from"./semver.aada36e0.js";import{P as xr}from"./vue-panzoom.2317fae3.js";import{Y as Pr}from"./vue-next-select.d60f7ec6.js";import{D as Ir}from"./vuedraggable.809222b5.js";import{v as Or,n as jr}from"./workbox-window.8d14e8b7.js";import"./amator.61c6adbb.js";import"./bezier-easing.a990b400.js";import"./engine.io-client.6ba5801d.js";import"./engine.io-parser.730afdce.js";import"./@socket.io.aec831e2.js";import"./socket.io-parser.0ab387d5.js";import"./lru-cache.9a21e90b.js";import"./yallist.fd762fe7.js";import"./panzoom.971985ef.js";import"./wheel.2145cd85.js";import"./ngraph.events.083734c6.js";import"./sortablejs.199de4b6.js";const Er=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};Er();const Fr="modulepreload",bn={},Vr="./",Et=function(t,n){return!n||n.length===0?t():Promise.all(n.map(r=>{if(r=`${Vr}${r}`,r in bn)return;bn[r]=!0;const s=r.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${r}"]${a}`))return;const o=document.createElement("link");if(o.rel=s?"stylesheet":Fr,s||(o.as="script",o.crossOrigin=""),o.href=r,document.head.appendChild(o),s)return new Promise((l,d)=>{o.addEventListener("load",l),o.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())},Br="Alkatest",Dr="A test",Ar="alkatest",Lr="thepaperpilot",qr="",Rr="",kr="0.0.0",Ur="Initial Commit",zr=!1,Gr=!1,Wr=2,Hr=!0,Zr=null,Yr="",Kr=["main"],Xr=3600,Jr=1,Qr=!0,es="base64";var W={title:Br,description:Dr,id:Ar,author:Lr,discordName:qr,discordLink:Rr,versionNumber:kr,versionTitle:Ur,allowGoBack:zr,defaultShowSmall:Gr,defaultDecimalsShown:Wr,useHeader:Hr,banner:Zr,logo:Yr,initialTabs:Kr,maxTickLength:Xr,offlineLimit:Jr,enablePausing:Qr,exportEncoding:es};const Zt=17,ts=9e15,ns=Math.log10(9e15),rs=1/9e15,ss=308,is=-324,Nn=5,as=function(){const e=[];for(let n=is+1;n<=ss;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),Ke=[2,Math.E,3,4,5,6,7,8,9,10],os=[[1,1.0891168053867777,1.1789745164521264,1.2701428397304229,1.3632066654400328,1.4587804913784246,1.557523817412741,1.660158301473385,1.767487542936873,1.8804205225512542,2],[1,1.1121114330934,1.23103892493161,1.35838369631113,1.49605193039935,1.64635423375119,1.81213853570186,1.99697132461829,2.20538955455724,2.44325744833852,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.18422737399915,1.4066113788546144,1.680911177655277,2.027492094355525,2.4775152854601967,3.080455730250329,3.918234505962507,5.1332705696484595,6.9878696918072905,10]],ls=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],f=function(t){return x.fromValue_noAlloc(t)},D=function(e,t,n){return x.fromComponents(e,t,n)},R=function(t,n,r){return x.fromComponents_noNormalize(t,n,r)},Re=function(t,n){const r=n+1,s=Math.ceil(Math.log10(Math.abs(t))),a=Math.round(t*Math.pow(10,r-s))*Math.pow(10,s-r);return parseFloat(a.toFixed(Math.max(r-s,0)))},Yt=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},us=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const r=e*e;let s=e;return n=n+1/(12*s),s=s*r,n=n+1/(360*s),s=s*r,n=n+1/(1260*s),s=s*r,n=n+1/(1680*s),s=s*r,n=n+1/(1188*s),s=s*r,n=n+691/(360360*s),s=s*r,n=n+7/(1092*s),s=s*r,n=n+3617/(122400*s),Math.exp(n)/t},jn=.5671432904097838,wn=function(e,t=1e-10){let n,r;if(!Number.isFinite(e)||e===0)return e;if(e===1)return jn;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let s=0;s<100;++s){if(r=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(r-n)<t*Math.abs(r))return r;n=r}throw Error(`Iteration failed to converge: ${e.toString()}`)};function $n(e,t=1e-10){let n,r,s,a;if(!Number.isFinite(e.mag)||e===x.dZero)return e;if(e===x.dOne)return f(jn);x.abs(e),n=x.ln(e);for(let o=0;o<100;++o){if(r=x.exp(-n),s=n.sub(e.mul(r)),a=n.sub(s.div(n.add(1).sub(n.add(2).mul(s).div(x.mul(2,n).add(2))))),x.abs(a.sub(n)).lt(x.abs(a).mul(t)))return a;n=a}throw Error(`Iteration failed to converge: ${e.toString()}`)}const w=class{constructor(e){this.sign=Number.NaN,this.mag=Number.NaN,this.layer=Number.NaN,e instanceof w||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/as(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer,this.exponent))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new w().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new w().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new w().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new w().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new w().fromDecimal(e)}static fromNumber(e){return new w().fromNumber(e)}static fromString(e){return new w().fromString(e)}static fromValue(e){return new w().fromValue(e)}static fromValue_noAlloc(e){return e instanceof w?e:new w(e)}static abs(e){return f(e).abs()}static neg(e){return f(e).neg()}static negate(e){return f(e).neg()}static negated(e){return f(e).neg()}static sign(e){return f(e).sign}static sgn(e){return f(e).sign}static round(e){return f(e).round()}static floor(e){return f(e).floor()}static ceil(e){return f(e).ceil()}static trunc(e){return f(e).trunc()}static add(e,t){return f(e).add(t)}static plus(e,t){return f(e).add(t)}static sub(e,t){return f(e).sub(t)}static subtract(e,t){return f(e).sub(t)}static minus(e,t){return f(e).sub(t)}static mul(e,t){return f(e).mul(t)}static multiply(e,t){return f(e).mul(t)}static times(e,t){return f(e).mul(t)}static div(e,t){return f(e).div(t)}static divide(e,t){return f(e).div(t)}static recip(e){return f(e).recip()}static reciprocal(e){return f(e).recip()}static reciprocate(e){return f(e).reciprocate()}static cmp(e,t){return f(e).cmp(t)}static cmpabs(e,t){return f(e).cmpabs(t)}static compare(e,t){return f(e).cmp(t)}static isNaN(e){return e=f(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=f(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return f(e).eq(t)}static equals(e,t){return f(e).eq(t)}static neq(e,t){return f(e).neq(t)}static notEquals(e,t){return f(e).notEquals(t)}static lt(e,t){return f(e).lt(t)}static lte(e,t){return f(e).lte(t)}static gt(e,t){return f(e).gt(t)}static gte(e,t){return f(e).gte(t)}static max(e,t){return f(e).max(t)}static min(e,t){return f(e).min(t)}static minabs(e,t){return f(e).minabs(t)}static maxabs(e,t){return f(e).maxabs(t)}static clamp(e,t,n){return f(e).clamp(t,n)}static clampMin(e,t){return f(e).clampMin(t)}static clampMax(e,t){return f(e).clampMax(t)}static cmp_tolerance(e,t,n){return f(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return f(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return f(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return f(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return f(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return f(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return f(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return f(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return f(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return f(e).gte_tolerance(t,n)}static pLog10(e){return f(e).pLog10()}static absLog10(e){return f(e).absLog10()}static log10(e){return f(e).log10()}static log(e,t){return f(e).log(t)}static log2(e){return f(e).log2()}static ln(e){return f(e).ln()}static logarithm(e,t){return f(e).logarithm(t)}static pow(e,t){return f(e).pow(t)}static pow10(e){return f(e).pow10()}static root(e,t){return f(e).root(t)}static factorial(e,t){return f(e).factorial()}static gamma(e,t){return f(e).gamma()}static lngamma(e,t){return f(e).lngamma()}static exp(e){return f(e).exp()}static sqr(e){return f(e).sqr()}static sqrt(e){return f(e).sqrt()}static cube(e){return f(e).cube()}static cbrt(e){return f(e).cbrt()}static tetrate(e,t=2,n=R(1,0,1)){return f(e).tetrate(t,n)}static iteratedexp(e,t=2,n=R(1,0,1)){return f(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return f(e).iteratedlog(t,n)}static layeradd10(e,t){return f(e).layeradd10(t)}static layeradd(e,t,n=10){return f(e).layeradd(t,n)}static slog(e,t=10){return f(e).slog(t)}static lambertw(e){return f(e).lambertw()}static ssqrt(e){return f(e).ssqrt()}static pentate(e,t=2,n=R(1,0,1)){return f(e).pentate(t,n)}static affordGeometricSeries(e,t,n,r){return this.affordGeometricSeries_core(f(e),f(t),f(n),r)}static sumGeometricSeries(e,t,n,r){return this.sumGeometricSeries_core(e,f(t),f(n),r)}static affordArithmeticSeries(e,t,n,r){return this.affordArithmeticSeries_core(f(e),f(t),f(n),f(r))}static sumArithmeticSeries(e,t,n,r){return this.sumArithmeticSeries_core(f(e),f(t),f(n),f(r))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(f(e),f(t),f(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return R(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return R(t,0,1);const n=Math.floor(Math.random()*(e+1));let r=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(r=Math.trunc(r));let s=Math.pow(10,r);return Math.random()>.9&&(s=Math.trunc(s)),D(t,n,s)}static affordGeometricSeries_core(e,t,n,r){const s=t.mul(n.pow(r));return w.floor(e.div(s).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,r){return t.mul(n.pow(r)).mul(w.sub(1,n.pow(e))).div(w.sub(1,n))}static affordArithmeticSeries_core(e,t,n,r){const a=t.add(r.mul(n)).sub(n.div(2)),o=a.pow(2);return a.neg().add(o.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,r){const s=t.add(r.mul(n));return e.div(2).mul(s.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<rs)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=ts)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<ns&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){e=e.replace(",","");const t=e.split("^^^");if(t.length===2){const h=parseFloat(t[0]),v=parseFloat(t[1]),g=t[1].split(";");let T=1;if(g.length===2&&(T=parseFloat(g[1]),isFinite(T)||(T=1)),isFinite(h)&&isFinite(v)){const M=w.pentate(h,v,T);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,this}}const n=e.split("^^");if(n.length===2){const h=parseFloat(n[0]),v=parseFloat(n[1]),g=n[1].split(";");let T=1;if(g.length===2&&(T=parseFloat(g[1]),isFinite(T)||(T=1)),isFinite(h)&&isFinite(v)){const M=w.tetrate(h,v,T);return this.sign=M.sign,this.layer=M.layer,this.mag=M.mag,this}}const r=e.split("^");if(r.length===2){const h=parseFloat(r[0]),v=parseFloat(r[1]);if(isFinite(h)&&isFinite(v)){const g=w.pow(h,v);return this.sign=g.sign,this.layer=g.layer,this.mag=g.mag,this}}e=e.trim().toLowerCase();let s,a,o=e.split("pt");if(o.length===2){s=10,a=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let h=parseFloat(o[1]);if(isFinite(h)||(h=1),isFinite(s)&&isFinite(a)){const v=w.tetrate(s,a,h);return this.sign=v.sign,this.layer=v.layer,this.mag=v.mag,this}}if(o=e.split("p"),o.length===2){s=10,a=parseFloat(o[0]),o[1]=o[1].replace("(",""),o[1]=o[1].replace(")","");let h=parseFloat(o[1]);if(isFinite(h)||(h=1),isFinite(s)&&isFinite(a)){const v=w.tetrate(s,a,h);return this.sign=v.sign,this.layer=v.layer,this.mag=v.mag,this}}const l=e.split("e"),d=l.length-1;if(d===0){const h=parseFloat(e);if(isFinite(h))return this.fromNumber(h)}else if(d===1){const h=parseFloat(e);if(isFinite(h)&&h!==0)return this.fromNumber(h)}const p=e.split("e^");if(p.length===2){this.sign=1,p[0].charAt(0)=="-"&&(this.sign=-1);let h="";for(let v=0;v<p[1].length;++v){const g=p[1].charCodeAt(v);if(g>=43&&g<=57||g===101)h+=p[1].charAt(v);else return this.layer=parseFloat(h),this.mag=parseFloat(p[1].substr(v+1)),this.normalize(),this}}if(d<1)return this.sign=0,this.layer=0,this.mag=0,this;const _=parseFloat(l[0]);if(_===0)return this.sign=0,this.layer=0,this.mag=0,this;let b=parseFloat(l[l.length-1]);if(d>=2){const h=parseFloat(l[l.length-2]);isFinite(h)&&(b*=Math.sign(h),b+=Yt(h))}if(!isFinite(_))this.sign=l[0]==="-"?-1:1,this.layer=d,this.mag=b;else if(d===1)this.sign=Math.sign(_),this.layer=1,this.mag=b+Math.log10(Math.abs(_));else if(this.sign=Math.sign(_),this.layer=d,d===2){const h=w.mul(D(1,2,b),f(_));return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}else this.mag=b;return this.normalize(),this}fromValue(e){return e instanceof w||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Re(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Re(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Nn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Re(this.m,e)+"e"+Re(this.e,e):this.layer===1?Re(this.m,e)+"e"+Re(this.e,e):this.layer<=Nn?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Re(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Re(this.mag,e)}abs(){return R(this.sign===0?0:1,this.layer,this.mag)}neg(){return R(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?w.dZero:this.layer===0?D(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?w.dZero:this.layer===0?D(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?w.dZero:this.layer===0?D(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?w.dZero:this.layer===0?D(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=f(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return R(0,0,0);let n,r;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(w.cmpabs(this,t)>0?(n=this,r=t):(n=t,r=this),n.layer===0&&r.layer===0)return f(n.sign*n.mag+r.sign*r.mag);const s=n.layer*Math.sign(n.mag),a=r.layer*Math.sign(r.mag);if(s-a>=2)return n;if(s===0&&a===-1){if(Math.abs(r.mag-Math.log10(n.mag))>Zt)return n;{const o=Math.pow(10,Math.log10(n.mag)-r.mag),l=r.sign+n.sign*o;return D(Math.sign(l),1,r.mag+Math.log10(Math.abs(l)))}}if(s===1&&a===0){if(Math.abs(n.mag-Math.log10(r.mag))>Zt)return n;{const o=Math.pow(10,n.mag-Math.log10(r.mag)),l=r.sign+n.sign*o;return D(Math.sign(l),1,Math.log10(r.mag)+Math.log10(Math.abs(l)))}}if(Math.abs(n.mag-r.mag)>Zt)return n;{const o=Math.pow(10,n.mag-r.mag),l=r.sign+n.sign*o;return D(Math.sign(l),1,r.mag+Math.log10(Math.abs(l)))}}plus(e){return this.add(e)}sub(e){return this.add(f(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=f(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return R(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return R(this.sign*t.sign,0,1);let n,r;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,r=t):(n=t,r=this),n.layer===0&&r.layer===0)return f(n.sign*r.sign*n.mag*r.mag);if(n.layer>=3||n.layer-r.layer>=2)return D(n.sign*r.sign,n.layer,n.mag);if(n.layer===1&&r.layer===0)return D(n.sign*r.sign,1,n.mag+Math.log10(r.mag));if(n.layer===1&&r.layer===1)return D(n.sign*r.sign,1,n.mag+r.mag);if(n.layer===2&&r.layer===1){const s=D(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(D(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return D(n.sign*r.sign,s.layer+1,s.sign*s.mag)}if(n.layer===2&&r.layer===2){const s=D(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(D(Math.sign(r.mag),r.layer-1,Math.abs(r.mag)));return D(n.sign*r.sign,s.layer+1,s.sign*s.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=f(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?w.dNaN:this.layer===0?D(this.sign,0,1/this.mag):D(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=f(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=f(e),n=this.mag>0?this.layer:-this.layer,r=t.mag>0?t.layer:-t.layer;return n>r?1:n<r?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=f(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=f(e);return this.lt(t)?t:this}min(e){const t=f(e);return this.gt(t)?t:this}maxabs(e){const t=f(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=f(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=f(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=f(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let r=this.mag,s=n.mag;return this.layer>n.layer&&(s=Yt(s)),this.layer<n.layer&&(r=Yt(r)),Math.abs(r-s)<=t*Math.max(Math.abs(r),Math.abs(s))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=f(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=f(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=f(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=f(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(w.dZero)?w.dZero:this.log10()}absLog10(){return this.sign===0?w.dNaN:this.layer>0?D(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):D(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?w.dNaN:this.layer>0?D(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):D(this.sign,0,Math.log10(this.mag))}log(e){return e=f(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?w.dNaN:this.layer===0&&e.layer===0?D(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):w.div(this.log10(),e.log10())}log2(){return this.sign<=0?w.dNaN:this.layer===0?D(this.sign,0,Math.log2(this.mag)):this.layer===1?D(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?D(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):D(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?w.dNaN:this.layer===0?D(this.sign,0,Math.log(this.mag)):this.layer===1?D(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?D(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):D(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=f(e),n=this,r=t;if(n.sign===0)return r.eq(0)?R(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(r.sign===0)return R(1,0,1);if(r.sign===1&&r.layer===0&&r.mag===1)return n;const s=n.absLog10().mul(r).pow10();return this.sign===-1?Math.abs(r.toNumber()%2)%2===1?s.neg():Math.abs(r.toNumber()%2)%2===0?s:w.dNaN:s}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return w.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return D(1,0,t);if(e.sign===0)return w.dOne;e=R(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?D(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?D(-e.sign,e.layer+1,-e.mag):w.dOne}pow_base(e){return f(e).pow(this)}root(e){const t=f(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?w.exp(w.mul(this,w.ln(this).sub(1))):w.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(R(1,0,24)))return f(us(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let r=e,s=12*r,a=1/s,o=t+a;if(o===t||(t=o,r=r*n,s=360*r,a=1/s,o=t-a,o===t))return w.exp(t);t=o,r=r*n,s=1260*r;let l=1/s;return t=t+l,r=r*n,s=1680*r,l=1/s,t=t-l,w.exp(t)}else return this.layer===1?w.exp(w.mul(this,w.ln(this).sub(1))):w.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?w.dOne:this.layer===0&&this.mag<=709.7?f(Math.exp(this.sign*this.mag)):this.layer===0?D(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?D(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):D(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return f(Math.sqrt(this.sign*this.mag));if(this.layer===1)return D(1,2,Math.log10(this.mag)-.3010299956639812);{const e=w.div(R(this.sign,this.layer-1,this.mag),R(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=R(1,0,1)){if(e===1)return w.pow(this,t);if(e===0)return new w(t);if(this.eq(w.dOne))return w.dOne;if(this.eq(-1))return w.pow(this,t);if(e===Number.POSITIVE_INFINITY){const s=this.toNumber();if(s<=1.444667861009766&&s>=.06598803584531254){if(s>1.444667861009099)return new w(Math.E);const a=w.ln(this).neg();return a.lambertw().div(a)}else return s>1.444667861009766?new w(Number.POSITIVE_INFINITY):w.dNaN}if(this.eq(w.dZero)){let s=Math.abs((e+1)%2);return s>1&&(s=2-s),new w(s)}if(e<0)return w.iteratedlog(t,this,-e);t=f(t);const n=e;e=Math.trunc(e);const r=n-e;if(this.gt(w.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let s=0;s<e;++s){const a=t;if(t=this.pow(t),a.eq(t))return t}if(r!=0){const s=this.pow(t);return t.mul(1-r).add(s.mul(r))}return t}r!==0&&(t.eq(w.dOne)?this.gt(10)?t=this.pow(r):(t=f(w.tetrate_critical(this.toNumber(),r)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let s=0;s<e;++s){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return R(t.sign,t.layer+(e-s-1),t.mag);if(s>1e4)return t}return t}iteratedexp(e=2,t=R(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return w.tetrate(e,-t,this);e=f(e);let n=f(this);const r=t;t=Math.trunc(t);const s=r-t;if(n.layer-e.layer>3){const a=Math.min(t,n.layer-e.layer-3);t-=a,n.layer-=a}for(let a=0;a<t;++a){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(a>1e4)return n}return s>0&&s<1&&(e.eq(10)?n=n.layeradd10(-s):n=n.layeradd(-s,e)),n}slog(e=10){if(e=f(e),e.lte(w.dZero)||e.eq(w.dOne))return w.dNaN;if(e.lt(w.dOne))return this.eq(w.dOne)?w.dZero:this.eq(w.dZero)?w.dNegOne:w.dNaN;if(this.mag<0||this.eq(w.dZero))return w.dNegOne;let t=0,n=f(this);if(n.layer-e.layer>3){const r=n.layer-e.layer-3;t+=r,n.layer-=r}for(let r=0;r<100;++r)if(n.lt(w.dZero))n=w.pow(e,n),t-=1;else{if(n.lte(w.dOne))return f(t+w.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=w.log(n,e)}return f(t)}static slog_critical(e,t){return e>10?t-1:w.critical_section(e,t,ls)}static tetrate_critical(e,t){return w.critical_section(e,t,os)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let r=0,s=0;for(let l=0;l<Ke.length;++l)if(Ke[l]==e){r=n[l][Math.floor(t)],s=n[l][Math.ceil(t)];break}else if(Ke[l]<e&&Ke[l+1]>e){const d=(e-Ke[l])/(Ke[l+1]-Ke[l]);r=n[l][Math.floor(t)]*(1-d)+n[l+1][Math.floor(t)]*d,s=n[l][Math.ceil(t)]*(1-d)+n[l+1][Math.ceil(t)]*d;break}const a=t-Math.floor(t);return r*(1-a)+s*a}layeradd10(e){e=w.fromValue_noAlloc(e).toNumber();const t=f(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let r=0;r<100;++r){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const r=this.slog(t).toNumber()+e;return r>=0?w.tetrate(t,r):Number.isFinite(r)?r>=-1?w.log(w.tetrate(t,r+1),t):w.log(w.log(w.tetrate(t,r+2),t),t):w.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return f(wn(this.toNumber()));if(this.layer===0)return f(wn(this.sign*this.mag));if(this.layer===1)return $n(this);if(this.layer===2)return $n(this);if(this.layer>=3)return R(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return R(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=R(1,0,1)){t=f(t);const n=e;e=Math.trunc(e);const r=n-e;r!==0&&(t.eq(w.dOne)?(++e,t=new w(r)):this.eq(10)?t=t.layeradd10(r):t=t.layeradd(r,this));for(let s=0;s<e;++s){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(s>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?f(Math.sin(this.sign*this.mag)):R(0,0,0)}cos(){return this.mag<0?w.dOne:this.layer===0?f(Math.cos(this.sign*this.mag)):R(0,0,0)}tan(){return this.mag<0?this:this.layer===0?f(Math.tan(this.sign*this.mag)):R(0,0,0)}asin(){return this.mag<0?this:this.layer===0?f(Math.asin(this.sign*this.mag)):R(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?f(Math.acos(this.toNumber())):this.layer===0?f(Math.acos(this.sign*this.mag)):R(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?f(Math.atan(this.sign*this.mag)):f(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return w.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return w.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?R(Number.NaN,Number.NaN,Number.NaN):w.ln(this.add(1).div(f(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(w.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let x=w;x.dZero=R(0,0,0);x.dOne=R(1,0,1);x.dNegOne=R(-1,0,1);x.dTwo=R(1,0,2);x.dTen=R(1,0,10);x.dNaN=R(Number.NaN,Number.NaN,Number.NaN);x.dInf=R(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);x.dNegInf=R(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);x.dNumberMax=D(1,0,Number.MAX_VALUE);x.dNumberMin=D(1,0,Number.MIN_VALUE);const cs=new x(1);function _t(e,t,n=!0){let r=x.log10(e).floor(),s=x.div(e,x.pow(10,r));s.toStringWithDecimalPlaces(t)==="10"&&(s=cs,r=r.add(1));const a=r.gte(1e9)?Se(r,Math.max(Math.max(t,3),W.defaultDecimalsShown)):r.gte(1e4)?Ft(r,0):r.toStringWithDecimalPlaces(0);return n?s.toStringWithDecimalPlaces(t)+"e"+a:"e"+a}function Ft(e,t){if(e==null)return"NaN";if(e=new x(e),e.mag<.001)return 0 .toFixed(t);const r=e.toStringWithDecimalPlaces(t).split(".");return r[0]=r[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),r.length==1?r[0]:r[0]+"."+r[1]}function En(e,t){return e==null?"NaN":(e=new x(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),W.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const ds=new x("eeee1000"),fs=new x("e100000"),Sn=new x("e1000"),Fn=new x(1e9),ps=new x(1e6),ms=new x(1e3),hs=new x(.98),gs=new x(.001),Vn=new x(0);function Se(e,t,n){if(t==null&&(t=W.defaultDecimalsShown),n=n!=null?n:W.defaultShowSmall,e=new x(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+Se(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(ds)){const r=e.slog();return r.gte(ps)?"F"+Se(r.floor()):x.pow(10,r.sub(r.floor())).toStringWithDecimalPlaces(3)+"F"+Ft(r.floor(),0)}else{if(e.gte(fs))return _t(e,0,!1);if(e.gte(Sn))return _t(e,0);if(e.gte(Fn))return _t(e,t);if(e.gte(ms))return Ft(e,0);if(e.gte(gs)||!n)return En(e,t);if(e.eq(Vn))return 0 .toFixed(t)}return e=Dn(e),e.lt(Sn)?_t(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):Se(e,t)+"\u207B\xB9"}function we(e){return e=new x(e),e.sign<0?"-"+we(e.neg()):e.gte(Fn)||e.lte(hs)&&!e.eq(Vn)?Se(e):Se(e,0)}function Bn(e){return x.lt(e,0)?"-"+Bn(x.neg(e)):x.gt(e,2**51)?Se(x.div(e,31536e3))+"y":(e=new x(e).toNumber(),e<60?Se(e)+"s":e<3600?we(Math.floor(e/60))+"m "+Se(e%60)+"s":e<86400?we(Math.floor(e/3600))+"h "+we(Math.floor(e/60)%60)+"m "+we(e%60)+"s":e<31536e3?we(Math.floor(e/84600)%365)+"d "+we(Math.floor(e/3600)%24)+"h "+we(Math.floor(e/60)%60)+"m":we(Math.floor(e/31536e3))+"y "+we(Math.floor(e/84600)%365)+"d "+we(Math.floor(e/3600)%24)+"h")}function ys(e,t,n){e=new x(e);let r=e.toStringWithDecimalPlaces(t);return new x(r).gte(n)&&(r=x.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),r}function vs(e,t){return Se(e,t,!0)}function Dn(e){let t=x.log10(e).ceil();const n=x.div(e,x.pow(10,t));return t=t.neg(),e=new x(10).pow(t).times(n),e}var _s=Object.freeze(Object.defineProperty({__proto__:null,default:x,exponentialFormat:_t,commaFormat:Ft,regularFormat:En,format:Se,formatWhole:we,formatTime:Bn,toPlaces:ys,formatSmall:vs,invertOOM:Dn},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:bs,commaFormat:Ns,regularFormat:ws,format:An,formatWhole:Kt,formatTime:sn,toPlaces:$s,formatSmall:Ss,invertOOM:Ts}=_s;window.Decimal=x;window.exponentialFormat=bs;window.commaFormat=Ns;window.regularFormat=ws;window.format=An;window.formatWhole=Kt;window.formatTime=sn;window.toPlaces=$s;window.formatSmall=Ss;window.invertOOM=Ts;function Ms(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function Xt(e){return typeof e=="function"}var re=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(re||{});const Vt=Symbol("DoNotCache");function L(e,t){const n=e[t];Xt(n)&&n.length===0&&!n[Vt]?e[t]=I(n.bind(e)):Xt(n)&&(e[t]=n.bind(e),e[t][Vt]=!0)}const $t=Symbol("Component"),kt=Symbol("GatherProps");let Cs=0;function Ln(e="feature-"){return e+Cs++}var $e=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))($e||{});function pe(e){return e[Vt]=!0,e}function ae(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}function xs(e,...t){const n=[],r=s=>{Object.keys(s).forEach(a=>{const o=s[a];o&&typeof o=="object"&&(t.includes(o.type)?n.push(o):!(o instanceof x)&&!ce(o)&&r(o))})};return r(e),n}const Xe={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var an=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(an||{}),Ue={classic:Xe,paper:{...Xe,variables:{...Xe.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Xe,variables:{...Xe.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Xe,variables:{...Xe.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const ie=Symbol("ProxyState"),st=Symbol("ProxyPath");function on(e,t={}){const n=t;let r=!1;function s(){return r||(Object.assign(n,e(n)),r=!0),n}return new Proxy(n,{get(a,o){return o===ie?s():s()[o]},set(a,o,l){return s()[o]=l,!0},has(a,o){return o===ie?!0:Reflect.has(s(),o)},ownKeys(){return Reflect.ownKeys(s())},getOwnPropertyDescriptor(a,o){return r||(Object.assign(n,e(n)),r=!0),Object.getOwnPropertyDescriptor(a,o)}})}var X=window.state=tn({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const qn=ht({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function Rn(e){return JSON.stringify(e,(t,n)=>i(n))}const kn={get(e,t){var r;if(t===ie||t===st)return e[t];const n=e[ie][t];if(t!=="value"&&(_r(n)||Array.isArray(n))){if(n!==((r=e[t])==null?void 0:r[ie])){const s=[...e[st],t];e[t]=new Proxy({[ie]:n,[st]:s},kn)}return e[t]}return n},set(e,t,n,r){if(!X.hasNaN&&(typeof n=="number"&&isNaN(n)||n instanceof x&&(isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag)))){const s=e[ie][t];if(!(typeof s=="number"&&isNaN(s)||s instanceof x&&(isNaN(s.sign)||isNaN(s.layer)||isNaN(s.mag))))throw qn.autosave=!1,X.hasNaN=!0,X.NaNPath=[...e[st],t],X.NaNReceiver=r,console.error("Attempted to set NaN value",[...e[st],t],e[ie]),"Attempted to set NaN value. See above for details"}return e[ie][t]=n,!0},ownKeys(e){return Reflect.ownKeys(e[ie])},has(e,t){return Reflect.has(e[ie],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[ie],t)}};var O=window.player=new Proxy({[ie]:qn,[st]:["player"]},kn);const J=In();let it=null,Nt=null;function Bt(){const e=Date.now();let t=(e-O.time)/1e3;O.time=e;const n=t;if(X.lastTenTicks.push(n),X.lastTenTicks.length>10&&(X.lastTenTicks=X.lastTenTicks.slice(1)),!((Nt==null?void 0:Nt.value)&&!O.keepGoing)&&!X.hasNaN&&(t=Math.max(t,0),O.devSpeed!==0)){if(O.offlineTime!=null){if(x.gt(O.offlineTime,W.offlineLimit*3600)&&(O.offlineTime=W.offlineLimit*3600),x.gt(O.offlineTime,0)&&O.devSpeed!==0){const r=Math.max(O.offlineTime/10,t);O.offlineTime=O.offlineTime-r,t+=r}else O.devSpeed===0&&(O.offlineTime+=t);(!O.offlineProd||x.lt(O.offlineTime,0))&&(O.offlineTime=null)}t=Math.min(t,W.maxTickLength),O.devSpeed!=null&&(t*=O.devSpeed),Number.isFinite(t)||(t=1e308),!x.eq(t,0)&&(O.timePlayed+=t,Number.isFinite(O.timePlayed)||(O.timePlayed=1e308),J.emit("update",t,n),Z.unthrottled?(requestAnimationFrame(Bt),it!=null&&(clearInterval(it),it=null)):it==null&&(it=setInterval(Bt,50)))}}async function Ps(){Nt=(await Et(()=>Promise.resolve().then(function(){return nr}),void 0)).hasWon,de(Nt,e=>{e&&J.emit("gameWon")}),Z.unthrottled?requestAnimationFrame(Bt):it=setInterval(Bt,50)}document.fonts.onloadingdone=()=>J.emit("fontsLoaded");var Is=Object.freeze(Object.defineProperty({__proto__:null,globalBus:J,startGameLoop:Ps},Symbol.toStringTag,{value:"Module"}));var K=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n};const Os=["onSubmit"],js={class:"field"},Es={key:0,class:"field-title"},Fs=["placeholder"],Vs=G({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,r=fn(We(n,"title"),"span"),s=gt(null);nn(()=>{var d;(d=s.value)==null||d.focus()});const a=I({get(){return i(n.modelValue)||""},set(d){t("update:modelValue",d)}});function o(){t("submit")}function l(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(d,p)=>(m(),$("form",{onSubmit:mt(o,["prevent"])},[c("div",js,[i(r)?(m(),$("span",Es,[(m(),U(Ne(i(r))))])):F("",!0),e.textArea?(m(),U(i(br),{key:1,modelValue:i(a),"onUpdate:modelValue":p[0]||(p[0]=_=>ce(a)?a.value=_:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:l,ref_key:"field",ref:s},null,8,["modelValue","placeholder","maxHeight"])):Mt((m(),$("input",{key:2,type:"text","onUpdate:modelValue":p[1]||(p[1]=_=>ce(a)?a.value=_:null),placeholder:e.placeholder,class:oe({fullWidth:!e.title}),onBlur:l,ref_key:"field",ref:s},null,42,Fs)),[[mr,i(a)]])])],40,Os))}});var Oe=K(Vs,[["__scopeId","data-v-67b44a54"]]);const Bs=["x1","y1","x2","y2"],Ds=G({__name:"BoardLink",props:{link:null},setup(e){const n=be(e),r=I(()=>{const a=n.link.value.startNode.position;return n.link.value.offsetStart&&(a.x+=i(n.link.value.offsetStart).x,a.y+=i(n.link.value.offsetStart).y),a}),s=I(()=>{const a=n.link.value.endNode.position;return n.link.value.offsetEnd&&(a.x+=i(n.link.value.offsetEnd).x,a.y+=i(n.link.value.offsetEnd).y),a});return(a,o)=>(m(),$("line",et({class:"link"},e.link,{class:{pulsing:e.link.pulsing},x1:i(r).x,y1:i(r).y,x2:i(s).x,y2:i(s).y}),null,16,Bs))}});var As=K(Ds,[["__scopeId","data-v-5542940a"]]);const Ls=["transform"],qs={key:0},Rs=["transform","onMousedown","onTouchstart","onMouseup","onTouchend"],ks=["fill","stroke-width","stroke"],Us=["fill"],zs={key:0},Gs=["r","fill","stroke"],Ws=["r","fill","stroke"],Hs=["r","fill"],Zs=["r","stroke-dasharray","stroke-dashoffset","stroke"],Ys={key:1,transform:"rotate(45, 0, 0)"},Ks=["width","height","transform","fill","stroke"],Xs=["width","height","transform","fill","stroke"],Js=["width","height","transform","fill"],Qs=["width","height","transform","stroke-dasharray","stroke-dashoffset","stroke"],ei=["fill"],ti={key:0},ni=["fill","y"],ri=["fill","y"],si=G({__name:"BoardNode",props:{node:null,nodeType:null,dragging:null,dragged:null,hasDragged:{type:Boolean},receivingNode:{type:Boolean},selectedNode:null,selectedAction:null},emits:["mouseDown","endDragging"],setup(e,{emit:t}){const n=e,r=Math.sqrt(2),s=be(n),a=C(!1),o=I(()=>i(s.selectedNode)===i(s.node)),l=I(()=>se(s.nodeType.value.draggable,i(s.node)));de(l,te=>{const ne=i(s.node);i(s.dragging)===ne&&!te&&t("endDragging",ne.id)});const d=I(()=>{var ne;const te=i(s.node);return(ne=se(s.nodeType.value.actions,te))==null?void 0:ne.filter(fe=>se(fe.visibility,te)!==$e.None)}),p=I(()=>{var fe;const te=i(s.node),ne=i(s.dragged);return se(s.nodeType.value.draggable,te)&&((fe=i(s.dragging))==null?void 0:fe.id)===te.id&&ne?{x:te.position.x+Math.round(ne.x/25)*25,y:te.position.y+Math.round(ne.y/25)*25}:te.position}),_=I(()=>se(s.nodeType.value.shape,i(s.node))),b=I(()=>se(s.nodeType.value.title,i(s.node))),h=I(()=>se(s.nodeType.value.label,i(s.node))),v=I(()=>se(s.nodeType.value.size,i(s.node))),g=I(()=>se(s.nodeType.value.progress,i(s.node))||0),T=I(()=>Ue[Z.theme].variables["--background"]),M=I(()=>se(s.nodeType.value.outlineColor,i(s.node))||Ue[Z.theme].variables["--outline"]),le=I(()=>se(s.nodeType.value.fillColor,i(s.node))||Ue[Z.theme].variables["--raised-background"]),y=I(()=>se(s.nodeType.value.progressColor,i(s.node))),S=I(()=>se(s.nodeType.value.titleColor,i(s.node))||Ue[Z.theme].variables["--foreground"]),V=I(()=>se(s.nodeType.value.progressDisplay,i(s.node))),B=I(()=>i(s.dragging)!=null&&i(s.hasDragged)&&se(s.nodeType.value.canAccept,i(s.node))),q=I(()=>se(s.nodeType.value.actionDistance,i(s.node)));function ge(te){t("mouseDown",te,s.node.value.id,l.value)}function Ht(){var te,ne,fe;(te=s.hasDragged)!=null&&te.value||(fe=(ne=s.nodeType.value).onClick)==null||fe.call(ne,s.node.value)}function rt(te,ne){var fe;(ne.onClick(i(s.node))||((fe=i(s.selectedAction))==null?void 0:fe.id)===ne.id)&&(te.preventDefault(),te.stopPropagation())}function vt(te,ne){var fe;((fe=i(s.selectedAction))==null?void 0:fe.id)===ne.id&&(te.preventDefault(),te.stopPropagation())}return(te,ne)=>{var fe;return m(),$("g",{class:oe(["boardnode",e.node.type]),style:ve({opacity:((fe=e.dragging)==null?void 0:fe.id)===e.node.id&&e.hasDragged?.5:1}),transform:`translate(${i(p).x},${i(p).y})`},[N(lt,{name:"actions",appear:""},{default:E(()=>[i(o)&&i(d)?(m(),$("g",qs,[(m(!0),$(Y,null,ze(i(d),(Te,hn)=>{var gn,yn;return m(),$("g",{key:Te.id,class:oe(["action",{selected:((gn=e.selectedAction)==null?void 0:gn.id)===Te.id}]),transform:`translate(
                            ${(-i(v)-30)*Math.sin(((i(d).length-1)/2-hn)*i(q))},
                            ${(i(v)+30)*Math.cos(((i(d).length-1)/2-hn)*i(q))}
                        )`,onMousedown:Ye=>rt(Ye,Te),onTouchstart:Ye=>rt(Ye,Te),onMouseup:Ye=>vt(Ye,Te),onTouchend:mt(Ye=>vt(Ye,Te),["stop"])},[c("circle",{fill:i(se)(Te.fillColor,e.node),r:"20","stroke-width":((yn=e.selectedAction)==null?void 0:yn.id)===Te.id?4:0,stroke:i(M)},null,8,ks),c("text",{fill:i(S),class:"material-icons"},A(i(se)(Te.icon,e.node)),9,Us)],42,Rs)}),128))])):F("",!0)]),_:1}),c("g",{class:"node-container",onMouseenter:ne[0]||(ne[0]=Te=>a.value=!0),onMouseleave:ne[1]||(ne[1]=Te=>a.value=!1),onMousedown:ge,onTouchstartPassive:ge,onMouseup:Ht,onTouchendPassive:Ht},[i(_)===i(At).Circle?(m(),$("g",zs,[i(B)?(m(),$("circle",{key:0,class:"receiver",r:i(v)+8,fill:i(T),stroke:e.receivingNode?"#0F0":"#0F03","stroke-width":2},null,8,Gs)):F("",!0),c("circle",{class:"body",r:i(v),fill:i(le),stroke:i(M),"stroke-width":4},null,8,Ws),i(V)===i(en).Fill?(m(),$("circle",{key:1,class:"progressFill",r:Math.max(i(v)*i(g)-2,0),fill:i(y)},null,8,Hs)):(m(),$("circle",{key:2,r:i(v)+4.5,class:"progressRing",fill:"transparent","stroke-dasharray":(i(v)+4.5)*2*Math.PI,"stroke-width":5,"stroke-dashoffset":(i(v)+4.5)*2*Math.PI-i(g)*(i(v)+4.5)*2*Math.PI,stroke:i(y)},null,8,Zs))])):i(_)===i(At).Diamond?(m(),$("g",Ys,[i(B)?(m(),$("rect",{key:0,class:"receiver",width:i(v)*i(r)+16,height:i(v)*i(r)+16,transform:`translate(${-(i(v)*i(r)+16)/2}, ${-(i(v)*i(r)+16)/2})`,fill:i(T),stroke:e.receivingNode?"#0F0":"#0F03","stroke-width":2},null,8,Ks)):F("",!0),c("rect",{class:"body",width:i(v)*i(r),height:i(v)*i(r),transform:`translate(${-i(v)*i(r)/2}, ${-i(v)*i(r)/2})`,fill:i(le),stroke:i(M),"stroke-width":4},null,8,Xs),i(V)===i(en).Fill?(m(),$("rect",{key:1,class:"progressFill",width:Math.max(i(v)*i(r)*i(g)-2,0),height:Math.max(i(v)*i(r)*i(g)-2,0),transform:`translate(${-Math.max(i(v)*i(r)*i(g)-2,0)/2}, ${-Math.max(i(v)*i(r)*i(g)-2,0)/2})`,fill:i(y)},null,8,Js)):(m(),$("rect",{key:2,class:"progressDiamond",width:i(v)*i(r)+9,height:i(v)*i(r)+9,transform:`translate(${-(i(v)*i(r)+9)/2}, ${-(i(v)*i(r)+9)/2})`,fill:"transparent","stroke-dasharray":(i(v)*i(r)+9)*4,"stroke-width":5,"stroke-dashoffset":(i(v)*i(r)+9)*4-i(g)*(i(v)*i(r)+9)*4,stroke:i(y)},null,8,Qs))])):F("",!0),c("text",{fill:i(S),class:"node-title"},A(i(b)),9,ei)],32),N(lt,{name:"fade",appear:""},{default:E(()=>[i(h)?(m(),$("g",ti,[c("text",{fill:i(h).color||i(S),class:oe(["node-title",{pulsing:i(h).pulsing}]),y:-i(v)-20},A(i(h).text),11,ni)])):F("",!0)]),_:1}),N(lt,{name:"fade",appear:""},{default:E(()=>[i(o)&&e.selectedAction?(m(),$("text",{key:0,fill:i(S),class:"node-title",y:i(v)+75},"Tap again to confirm",8,ri)):F("",!0)]),_:1})],14,Ls)}}});var ii=K(si,[["__scopeId","data-v-3e8db0d0"]]);const ai={class:"stage",width:"100%",height:"100%"},oi={class:"g1"},li=G({__name:"Board",props:{nodes:null,types:null,state:null,visibility:null,width:null,height:null,style:null,classes:null,links:null,selectedAction:null,selectedNode:null,mousePosition:null},setup(e){const n=be(e),r=C({x:0,y:0}),s=C({x:0,y:0}),a=C(null),o=C(!1),l=C(null),d=C(1),p=I(()=>a.value==null?void 0:n.nodes.value.find(y=>y.id===a.value)),_=I(()=>{const y=n.nodes.value.slice();if(p.value){const S=y.splice(y.indexOf(p.value),1)[0];y.push(S)}return y}),b=I(()=>{const y=p.value;if(y==null)return null;const S={x:y.position.x+s.value.x,y:y.position.y+s.value.y};let V=Number.MAX_VALUE;return n.nodes.value.reduce((B,q)=>{if(q.id===y.id)return B;const ge=n.types.value[q.type];if(!se(ge.canAccept,q))return B;const rt=Math.pow(S.x-q.position.x,2)+Math.pow(S.y-q.position.y,2);let vt=se(ge.size,q);return rt>V||rt>vt*vt?B:(V=rt,q)},null)}),h=I(()=>Object.entries(rr.value).filter(([y])=>y in St.value));function v(y){y.setTransformOrigin(null)}function g(y,S=null,V=!1){if(a.value==null){y.preventDefault(),y.stopPropagation();let B,q;if("touches"in y)if(y.touches.length===1)B=y.touches[0].clientX,q=y.touches[0].clientY;else return;else B=y.clientX,q=y.clientY;r.value={x:B,y:q},s.value={x:0,y:0},o.value=!1,V&&(a.value=S)}S!=null&&(n.state.value.selectedNode=null,n.state.value.selectedAction=null)}function T(y){const{x:S,y:V,scale:B}=l.value.panZoomInstance.getTransform();let q,ge;if("touches"in y)if(y.touches.length===1)q=y.touches[0].clientX,ge=y.touches[0].clientY;else{M(a.value),n.mousePosition.value=null;return}else q=y.clientX,ge=y.clientY;n.mousePosition.value={x:q-S-10,y:ge-V-50},s.value={x:s.value.x+(q-r.value.x)/B,y:s.value.y+(ge-r.value.y)/B},r.value={x:q,y:ge},(Math.abs(s.value.x)>10||Math.abs(s.value.y)>10)&&(o.value=!0),a.value&&(y.preventDefault(),y.stopPropagation())}function M(y){var S,V;if(a.value!=null&&a.value===y&&p.value!=null){p.value.position.x+=Math.round(s.value.x/25)*25,p.value.position.y+=Math.round(s.value.y/25)*25;const B=n.nodes.value;B.splice(B.indexOf(p.value),1),B.push(p.value),b.value&&((V=(S=n.types.value[b.value.type]).onDrop)==null||V.call(S,b.value,p.value)),a.value=null}else o.value||(n.state.value.selectedNode=null,n.state.value.selectedAction=null)}function le(){const{x:y,y:S,scale:V}=l.value.panZoomInstance.getTransform(),{x:B,y:q}=r.value;n.mousePosition.value={x:B-y-10,y:q-S-50},d.value=V}return(y,S)=>{const V=jt("panZoom");return e.visibility!==i($e).None?Mt((m(),U(V,{key:0,style:ve([{width:e.width,height:e.height},e.style]),class:oe(e.classes),selector:".g1",options:{initialZoom:1,minZoom:.1,maxZoom:10,zoomDoubleClickSpeed:1},ref_key:"stage",ref:l,onInit:v,onMousemove:T,onTouchmove:T,onMousedown:S[0]||(S[0]=B=>g(B)),onTouchstart:S[1]||(S[1]=B=>g(B)),onMouseup:S[2]||(S[2]=()=>M(a.value)),onTouchendPassive:S[3]||(S[3]=()=>M(a.value)),onMouseleave:S[4]||(S[4]=()=>M(a.value)),onZoom:le},{default:E(()=>[(m(),$("svg",ai,[c("g",oi,[N(vn,{name:"link",appear:""},{default:E(()=>[(m(!0),$(Y,null,ze(i(e.links)||[],(B,q)=>(m(),$("g",{key:q},[N(As,{link:B},null,8,["link"])]))),128))]),_:1}),N(vn,{name:"grow",duration:500,appear:""},{default:E(()=>[(m(!0),$(Y,null,ze(i(_),B=>{var q;return m(),$("g",{key:B.id,style:{"transition-duration":"0s"}},[N(ii,{node:B,nodeType:e.types[B.type],dragging:i(p),dragged:s.value,hasDragged:o.value,receivingNode:((q=i(b))==null?void 0:q.id)===B.id,selectedNode:i(e.selectedNode),selectedAction:i(e.selectedAction),onMouseDown:g,onEndDragging:M},null,8,["node","nodeType","dragging","dragged","hasDragged","receivingNode","selectedNode","selectedAction"])])}),128))]),_:1}),(m(!0),$(Y,null,ze(i(h),([B,{x:q,y:ge}])=>(m(),$(Y,{key:B},[c("text",{class:"player-mouse",style:ve(`transform: scale(${1/d.value}) translate(${q}px, ${ge}px)`)}," \u{1F884} ",4),c("text",{class:"player-name",style:ve(`transform: scale(${1/d.value}) translate(${q+20}px, ${ge+8}px)`)},A(i(St)[B]),5)],64))),128))])]))]),_:1},8,["style","class","options"])),[[rn,e.visibility===i($e).Visible]]):F("",!0)}}});const ui=G({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var _;const n=C({}),r=new ResizeObserver(l),s=C(null);nn(()=>{const b=s.value;b!=null&&r.observe(b)});let a=!0,o=C((_=s.value)==null?void 0:_.getBoundingClientRect());function l(){a&&(a=!1,De(()=>{var b;o.value=(b=s.value)==null?void 0:b.getBoundingClientRect(),Object.values(n.value).filter(h=>h).forEach(h=>h.rect=h.element.getBoundingClientRect()),t("updateNodes",n.value),a=!0}))}J.on("fontsLoaded",l);const d={attributes:!1,childList:!0,subtree:!1};Pt(zn,(b,h)=>{const v=new MutationObserver(()=>p(b));v.observe(h,d),n.value[b]={element:h,observer:v,rect:h.getBoundingClientRect()},l()}),Pt(Gn,b=>{var h;(h=n.value[b])==null||h.observer.disconnect(),n.value[b]=void 0,l()}),Pt(Wn,n),Pt(Hn,o);function p(b){const h=n.value[b];h!=null&&(h.rect=h.element.getBoundingClientRect(),t("updateNodes",n.value))}return(b,h)=>(m(),$(Y,null,[Ge(b.$slots,"default",{},void 0,!0),c("div",{ref_key:"resizeListener",ref:s,class:"resize-listener"},null,512)],64))}});var Un=K(ui,[["__scopeId","data-v-2b1dc1bc"]]);const ci=["onPointerdown"],di={class:"modal-wrapper"},fi={class:"modal-container"},pi={class:"modal-header"},mi=z(" default header "),hi={class:"modal-body"},gi=z(" default body "),yi={class:"modal-footer"},vi=c("div",{class:"modal-default-flex-grow"},null,-1),He=G({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const s=be(e),a=I(()=>s.modelValue||l.value);function o(){n("update:modelValue",!1)}const l=C(!1),d=C(null),p=I(()=>{var _,b;return(b=(_=d.value)==null?void 0:_.nodes)!=null?b:null});return t({isOpen:a,nodes:p}),(_,b)=>(m(),U(hr,{to:"#modal-root"},[N(lt,{name:"modal",onBeforeEnter:b[0]||(b[0]=h=>l.value=!0),onAfterLeave:b[1]||(b[1]=h=>l.value=!1)},{default:E(()=>[Mt(c("div",et({class:"modal-mask",onPointerdown:mt(o,["self"])},_.$attrs),[c("div",di,[c("div",fi,[c("div",pi,[Ge(_.$slots,"header",{shown:i(a)},()=>[mi])]),c("div",hi,[N(Un,{ref_key:"contextRef",ref:d},{default:E(()=>[Ge(_.$slots,"body",{shown:i(a)},()=>[gi])]),_:3},512)]),c("div",yi,[Ge(_.$slots,"footer",{shown:i(a)},()=>[c("div",{class:"modal-default-footer"},[vi,c("button",{class:"button modal-default-button",onClick:o}," Close ")])])])])])],16,ci),[[rn,e.modelValue]])]),_:3})]))}}),zn=Symbol("RegisterNode"),Gn=Symbol("UnregisterNode"),Wn=Symbol("Nodes"),Hn=Symbol("Bounds"),ye=tn({});window.layers=ye;const ut={},Me=[];function Zn(e,t){return on(()=>{const n={},r=n.emitter=In();if(n.on=r.on.bind(r),n.emit=r.emit.bind(r),n.nodes=C({}),n.id=e,Me.push(e),ut[e]=new Set,n.minimized=Ut(!1),Object.assign(n,t.call(n)),Me[Me.length-1]==null||Me[Me.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${Me}
Trying to pop ${n.id}`;return Me.pop(),L(n,"color"),L(n,"display"),L(n,"name"),ae(n,"name",n.id),L(n,"minWidth"),ae(n,"minWidth",600),L(n,"minimizable"),ae(n,"minimizable",!0),n})}function Yn(e,t){if(console.info("Adding layer",e.id),ye[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,ye[e.id]);return}ae(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),ye[e.id]=e,J.emit("addLayer",e,t.layers[e.id])}function _i(e){return ye[e]}function Kn(e){console.info("Removing layer",e.id),J.emit("removeLayer",e),ye[e.id]=void 0}function bi(e){Kn(e),Yn(e,O)}function Ni(e){const t=C(!1);return{openModal:()=>t.value=!0,modal:pe(()=>N(He,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>N("h2",null,[i(e.name)]),body:i(e.display)}))}}J.on("update",function(t){Object.values(ye).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(ye).forEach(n=>{n==null||n.emit("update",t)}),Object.values(ye).forEach(n=>{n==null||n.emit("postUpdate",t)})});var wi=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:zn,UnregisterNodeInjectionKey:Gn,NodesInjectionKey:Wn,BoundsInjectionKey:Hn,layers:ye,persistentRefs:ut,addingLayers:Me,createLayer:Zn,addLayer:Yn,getLayer:_i,removeLayer:Kn,reloadLayer:bi,setupLayerModal:Ni},Symbol.toStringTag,{value:"Module"}));const Jt=Symbol("PersistentState"),Qt=Symbol("DefaultValue"),Dt=Symbol("StackTrace"),Xn=Symbol("Deleted");function $i(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function Ut(e){const t=ce(e)?e:C(e);return t[Jt]=t,t[Qt]=ce(e)?e.value:e,t[Dt]=$i(),t[Xn]=!1,Me.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[Dt]):ut[Me[Me.length-1]].add(t),t}J.on("addLayer",(e,t)=>{const n=[],r=(s,a=[])=>{let o=!1;return Object.keys(s).forEach(l=>{const d=s[l];if(d&&typeof d=="object")if(Jt in d){if(o=!0,d[Xn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",d,`
Created at:
`+d[Dt]);return}ut[e.id].delete(ie in d?d[ie]:d);const p=a.reduce((b,h)=>(h in b||(b[h]={}),b[h]),t),_=p[l];p[l]=d[Jt],gr(p)?_!=null?p[l]=_:p[l]=d[Qt]:_!=null?p[l].value=_:p[l].value=d[Qt]}else!(d instanceof x)&&!ce(d)&&!n.includes(d)&&(typeof d.type=="symbol"&&n.push(d),r(d,[...a,l])&&(_n(d)&&!_n(s)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",ie in s?s[ie]:s,l):o=!0))}),o};r(e),ut[e.id].forEach(s=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,s,`
Created at:
`+s[Dt])}),ut[e.id].clear()});J.on("setupVue",e=>xr.install(e));const Jn=Symbol("Board");var en=(e=>(e.Outline="Outline",e.Fill="Fill",e))(en||{}),At=(e=>(e.Circle="Circle",e.Diamond="Triangle",e))(At||{});function Si(e){return on(()=>{const t=e();t.id=Ln("board-"),t.type=Jn,t[$t]=li,t.state=Ut({nodes:t.startNodes().map((r,s)=>(r.id=s,r)),selectedNode:null,selectedAction:null}),t.nodes=I(()=>n.state.value.nodes),t.selectedNode=I(()=>n.nodes.value.find(r=>r.id===n.state.value.selectedNode)||null),t.selectedAction=I(()=>{const r=n.selectedNode.value;if(r==null)return null;const s=n.types[r.type];return s.actions==null?null:s.actions.find(a=>a.id===n.state.value.selectedAction)||null}),t.mousePosition=C(null),t.links=I(()=>n.selectedAction.value==null?null:n.selectedAction.value.links&&n.selectedNode.value?se(n.selectedAction.value.links,n.selectedNode.value):null),L(t,"visibility"),ae(t,"visibility",$e.Visible),L(t,"width"),ae(t,"width","100%"),L(t,"height"),ae(t,"height","400px"),L(t,"classes"),L(t,"style");for(const r in t.types){const s=t.types[r];if(L(s,"title"),L(s,"label"),L(s,"size"),ae(s,"size",50),L(s,"draggable"),ae(s,"draggable",!1),L(s,"shape"),ae(s,"shape","Circle"),L(s,"canAccept"),ae(s,"canAccept",!1),L(s,"progress"),L(s,"progressDisplay"),ae(s,"progressDisplay","Fill"),L(s,"progressColor"),ae(s,"progressColor","none"),L(s,"fillColor"),L(s,"outlineColor"),L(s,"titleColor"),L(s,"actionDistance"),ae(s,"actionDistance",Math.PI/6),s.nodes=I(()=>n.state.value.nodes.filter(a=>a.type===r)),ae(s,"onClick",function(a){n.state.value.selectedNode=a.id}),s.actions)for(const a of s.actions)L(a,"visibility"),ae(a,"visibility",$e.Visible),L(a,"icon"),L(a,"fillColor"),L(a,"tooltip"),L(a,"links")}t[kt]=function(){const{nodes:r,types:s,state:a,visibility:o,width:l,height:d,style:p,classes:_,links:b,selectedAction:h,selectedNode:v,mousePosition:g}=this;return{nodes:r,types:s,state:a,visibility:o,width:l,height:d,style:i(p),classes:_,links:b,selectedAction:h,selectedNode:v,mousePosition:g}};const n=t;return n})}function se(e,t){return Xt(e)?e(t):i(e)}const bt={};J.on("addLayer",e=>{const t=xs(e,Jn);bt[e.id]=e.on("postUpdate",n=>{t.forEach(r=>{Object.values(r.types).forEach(s=>s.nodes.value.forEach(a=>{var o;return(o=s.update)==null?void 0:o.call(s,a,n)}))})})});J.on("removeLayer",e=>{var t;(t=bt[e.id])==null||t.call(bt),bt[e.id]=void 0});const ln=e=>(Pe("data-v-2a68614e"),e=e(),Ie(),e),Ti=ln(()=>c("span",null,"Chat",-1)),Mi={key:0,style:{"margin-left":"10px"}},Ci={key:0,class:"chat-user"},xi=ln(()=>c("hr",{style:{"margin-top":"0"}},null,-1)),Pi={class:"chat-submit"},Ii=ln(()=>c("span",{class:"material-icons"},"check",-1)),Oi=[Ii],ji=G({__name:"Chat",setup(e){const t=C(!1),n=C(0),r=C(""),s=ht([]),a=C(null);function o(){Je("chat",r.value),r.value=""}J.on("chat",(d,p)=>{s.push({user:d,message:p});const _=a.value&&a.value.scrollTop>=a.value.scrollHeight-a.value.clientHeight;_&&De(()=>{a.value&&(a.value.scrollTop=a.value.scrollHeight-a.value.clientHeight)}),(!_||!t.value)&&d&&n.value++});function l(){De(()=>{a.value&&n.value>0&&a.value.scrollTop>=a.value.scrollHeight-a.value.clientHeight&&(n.value=0)})}return de(t,d=>{d&&(n.value=0)}),(d,p)=>Mt((m(),$("div",{class:oe(["chat",{open:t.value}])},[c("div",{class:"chat-toggle",onClick:p[0]||(p[0]=_=>t.value=!t.value)},[Ti,n.value?(m(),$("span",Mi,"["+A(n.value>9?"9+":n.value)+"]",1)):F("",!0)]),c("div",{class:"chat-messages",ref_key:"scroll",ref:a,onScrollPassive:l},[(m(!0),$(Y,null,ze(s,(_,b)=>(m(),$("div",{key:b,class:"chat-message-container"},[_.user?(m(),$("span",Ci,A(i(St)[_.user]),1)):F("",!0),c("span",{class:"chat-message",style:ve(_.user?"":"font-style: italic")},A(_.message),5)]))),128))],544),xi,c("div",Pi,[N(Oe,{modelValue:r.value,"onUpdate:modelValue":p[1]||(p[1]=_=>r.value=_),onSubmit:o,submitOnBlur:!1},null,8,["modelValue"]),c("button",{onPointerdown:o,class:"button"},Oi,32)])],2)),[[rn,i(_e)]])}});var Ei=K(ji,[["__scopeId","data-v-2a68614e"]]);function Fe(e){if(typeof e!="object"||e==null)return!1;switch(e._type){case"method":return"object"in e&&"method"in e;case"property":return"object"in e&&"property"in e;case"getObject":return"id"in e;case"ternary":return"condition"in e&&"true"in e&&"false"in e;default:return!1}}function Fi(e){if(typeof e!="object"||e==null)return!1;if(e._type==null)return Object.values(e).every(t=>t!=null);if(typeof e._type=="string")switch(e._type){case"createDictionary":return"entries"in e;default:return Fe(e)}return!1}function Qn(e){return typeof e!="object"||e==null||e._type!=="entry"?!1:"key"in e&&"value"in e}function Vi(e){if(typeof e!="object"||e==null)return!1;if("_type"in e)switch(e._type){case"filter":return"array"in e&&"condition"in e;case"map":return"array"in e&&"value"in e;case"keys":return"dictionary"in e;case"values":return"dictionary"in e;default:return Fe(e)}return e.every(t=>t!=null)}function Bi(e){if(typeof e=="string")return!0;if(typeof e!="object"||e==null)return!1;switch(e._type){case"concat":return"operands"in e;default:return Fe(e)}}function un(e){if(typeof e=="number")return!0;if(typeof e!="object"||e==null)return!1;switch(e._type){case"addition":return"operands"in e;case"subtraction":return"operands"in e;case"random":return"min"in e&&"max"in e;case"randomInt":return"min"in e&&"max"in e;default:return Fe(e)}}function Di(e){if(typeof e=="boolean")return!0;if(typeof e!="object"||e==null)return!1;switch(e._type){case"equals":return"operands"in e;case"notEquals":return"operands"in e;case"greaterThan":return"operands"in e;case"greaterThanOrEqual":return"operands"in e;case"lessThan":return"operands"in e;case"lessThanOrEqual":return"operands"in e;case"objectExists":return"operands"in e;case"propertyExists":return"operands"in e&&"property"in e;default:return Fe(e)}}function Ai(e){if(typeof e!="object"||e==null)return!1;switch(e._type){case"branch":return"condition"in e;case"forEach":return"array"in e&&"forEach"in e;case"repeat":return"iterations"in e&&"run"in e;case"wait":return"duration"in e;case"addItemsToInventory":return"node"in e&&"items"in e;case"setData":return"object"in e&&"key"in e&&"value"in e;case"addNode":return"nodeType"in e&&"pos"in e;case"removeNode":return"node"in e;case"event":return"event"in e;case"error":return"message"in e;case"@return":return!0;case"@break":return!0;default:return Fe(e)}}function Li(e){return typeof e!="object"||e==null?!1:"type"in e?Fe(e):"x"in e&&"y"in e}function qi(e){return typeof e=="number"?!0:typeof e!="object"||e==null?!1:"type"in e?un(e)||Fe(e):"width"in e&&"height"in e}function Ri(e){return typeof e!="object"||e==null?!1:"slots"in e}function ki(e){return typeof e!="object"||e==null?!1:"item"in e&&"quantity"in e?!0:Fe(e)}function Ui(e){return typeof e!="object"||e==null?!1:"display"in e&&"duration"in e&&"run"in e}function cn(e){if(typeof e=="string")return!0;if(typeof e!="object"||e==null)return!1;switch(e._type){case"dictionary":return"keyType"in e&&"valueType"in e;case"array":return"elementType"in e;case"object":return"properties"in e;case"number":return!0;case"boolean":return!0;case"string":return!0;case"id":return"of"in e;case"itemStack":return!0;case"action":return!0;default:return!1}}function zi(e){return typeof e!="object"||e==null?!1:"run"in e}function Gi(e){return!(typeof e!="object"||e==null||!("value"in e)||!cn(e))}const u=Symbol("Invalid");function Wi(e){return typeof e!="object"?(console.log("Content pack is not an object"),!1):"display"in e?!0:(console.log("Content pack is missing 'display' property"),!1)}function Hi(e){const t=e.filter(Wi),n=Zi(t),r=Yi(t),s=Ki(t),a=Xi(t,s),o=Ji(t);return Qi(n,r,s,a,o),{items:n,nodes:r,types:s,objects:a,eventListeners:o}}function Zi(e){return e.reduce((t,n)=>{if("items"in n){if(typeof n.items!="object")return console.log("Content Pack contained 'items' property that wasn't a dictionary",n.display),t;Object.keys(n.items).forEach(r=>{const s=n.items[r];if(r in t){console.log("Trying to add item with duplicate ID",n.display,r);return}if(typeof s!="object"){console.log("Item is not an object",n.display,r);return}if(!("display"in s)){console.log("Item is missing 'display' property",n.display,r);return}j(s,"display","node","maxStackSize"),t[r]=s})}return t},{})}function Yi(e){return e.reduce((t,n)=>{if("nodes"in n){if(typeof n.nodes!="object")return console.log("Content Pack contained 'nodes' property that wasn't a dictionary",n.display),t;Object.keys(n.nodes).forEach(r=>{const s=n.nodes[r];if(r in t){console.log("Trying to add node with duplicate ID",n.display,r);return}if(typeof s!="object"){console.log("Node is not an object",n.display,r);return}const a=["display","size"].find(o=>!(o in s));if(a){console.log(`Node is missing '${a}' property`,n.display,r);return}j(s,"display","size","draggable","data","inventory","actions","place"),t[r]=s})}return t},{})}function Ki(e){return e.reduce((t,n)=>{if("types"in n){if(typeof n.types!="object")return console.log("Content Pack contained 'types' property that wasn't a dictionary",n.display),t;Object.keys(n.types).forEach(r=>{const s=n.types[r];if(r in t){console.log("Trying to add custom type with duplicate ID",n.display,r);return}if(typeof s!="object"){console.log("Custom type is not an object",n.display,r);return}j(s,"data","methods","properties"),t[r]=s})}return t},{})}function Xi(e,t){const n={};return Object.keys(t).forEach(r=>{var l;const s=(l=t[r].data)!=null?l:{},a=Object.keys(s),o=e.reduce((d,p)=>{const _=p.display;if(r in p){if(typeof p[r]!="object")return console.log(`Content Pack contained '${r}' property that wasn't a dictionary`,p.display),d;Object.keys(p[r]).forEach(b=>{var v;if(typeof p[r]!="object"){console.log("Custom object type not found",p.display,r);return}const h=p[r][b];if(typeof h!="object"){console.log("Custom object is not an object",p.display,r,b);return}d[b]=a.reduce((g,T)=>{const M=s[T];if(T in h)if(T in g){if(typeof M!="object"||M._type!=="dictionary"||h[T]!=="object")return console.log("Custom object attempted to override property",_,r,b,T),g;const le=g[T];Object.keys(h[T]).forEach(y=>{if(y in le){console.log("Custom object attempted to override dictionary entry",_,r,b,T,y);return}le[y]=h[T][y]})}else g[T]=h[T];return g},(v=d[b])!=null?v:{})})}return d},{});o&&(n[r]=o)}),n}function Ji(e){return e.reduce((t,n)=>{if("eventListeners"in n){if(typeof n.eventListeners!="object")return console.log("Content Pack contained 'eventListeners' property that wasn't an object",n.display),t;Object.keys(n.eventListeners).forEach(r=>{r in t||(t[r]=[]),t[r].push(n.eventListeners[r])})}return t},{})}function Qi(e,t,n,r,s){Object.keys(e).forEach(a=>{const o=e[a];(P(o,"display",H)===u||k(o,"node",H)===u||k(o,"maxStackSize",me)===u)&&(console.log(`Item type '${a}' removed due to invalid property`),delete e[a])}),Object.keys(t).forEach(a=>{const o=t[a];(P(o,"display",H)===u||P(o,"size",ca)===u||k(o,"draggable",ue)===u||k(o,"data",qt)===u||k(o,"inventory",la)===u||k(o,"actions",na)===u)&&(console.log(`Node type '${a}' removed due to invalid property`),delete t[a])}),Object.keys(n).forEach(a=>{const o=n[a];(k(o,"data",qt)===u||k(o,"methods",sa)===u||k(o,"properties",ia)===u)&&(console.log(`Object type '${a}' removed due to invalid property`),delete n[a])}),Object.keys(r).forEach(a=>{a in n||(console.log(`Could not determine type of custom object '${a}'`),delete r[a]),Object.keys(r[a]).forEach(o=>{const l=r[a][o],d=n[a].data;d?Object.keys(d).some(_=>{const b=P(l,_,It(d[_]));return b===u||b==null?(console.log(`Object ${o} removed due to invalid data`,_),!0):!1})?delete r[o]:j(l,...Object.keys(d)):j(l)})}),Object.keys(s).forEach(a=>{const o=s[a];for(let l=0;l<o.length;l++){const d=k(o,l,ct);if(d===u||d==null){console.log("Could not resolve event listener",a,l),o.splice(l,1),l--;continue}}})}function P(e,t,n){const r=n(e[t]);return r===u?u:(r!=null&&(e[t]=r),r)}function k(e,t,n){if(e[t]==null)return null;const r=n(e[t]);return r===u?u:(r!=null&&(e[t]=r),r)}function j(e,...t){Object.keys(e).forEach(n=>t.includes(n)||delete e[n])}function H(e){if(!Bi(e))return u;if(typeof e=="string")return e;switch(e._type){case"concat":{const t=P(e,"operands",ea);return t===u?u:(j(e,"_type","operands"),t!=null&&t.every(n=>typeof n=="string")?t.join(""):null)}default:return Le(e)}}function me(e){if(!un(e))return u;if(typeof e=="number")return e;switch(e._type){case"addition":{const t=P(e,"operands",ot);return t===u?u:(j(e,"_type","operands"),t!=null&&t.every(n=>typeof n=="number")?t.reduce((n,r)=>n+r):null)}case"subtraction":{const t=P(e,"operands",ot);return t===u?u:(j(e,"_type","operands"),t!=null&&t.every(n=>typeof n=="number")?t.reduce((n,r)=>n-r):null)}case"random":return null;case"randomInt":return null;default:return Le(e)}}function ue(e){if(!Di(e))return null;if(typeof e=="boolean")return e;switch(e._type){case"equals":{const t=P(e,"operands",Tn);if(t===u)return u;if(j(e,"_type","operands"),t!=null&&t.every(n=>Mn(n))){for(let n=1;n<t.length;n++)if(t[n]!=t[n-1])return!1;return!0}return null}case"notEquals":{const t=P(e,"operands",Tn);if(t===u)return u;if(j(e,"_type","operands"),t!=null&&t.every(n=>Mn(n))){for(let n=1;n<t.length;n++)for(let r=n-1;r>=0;r++)if(t[n]==t[r])return!1;return!0}return null}case"greaterThan":{const t=P(e,"operands",ot);if(t===u)return u;if(j(e,"_type","operands"),t!=null&&t.every(n=>typeof n=="number")){for(let n=1;n<t.length;n++)if(t[n]>t[n-1])return!1;return!0}return null}case"greaterThanOrEqual":{const t=P(e,"operands",ot);if(t===u)return u;if(j(e,"_type","operands"),t!=null&&t.every(n=>typeof n=="number")){for(let n=1;n<t.length;n++)if(t[n]>=t[n-1])return!1;return!0}return null}case"lessThan":{const t=P(e,"operands",ot);if(t===u)return u;if(j(e,"_type","operands"),t!=null&&t.every(n=>typeof n=="number")){for(let n=1;n<t.length;n++)if(t[n]<t[n-1])return!1;return!0}return null}case"lessThanOrEqual":{const t=P(e,"operands",ot);if(t===u)return u;if(j(e,"_type","operands"),t!=null&&t.every(n=>typeof n=="number")){for(let n=1;n<t.length;n++)if(t[n]<=t[n-1])return!1;return!0}return null}case"objectExists":return P(e,"object",H)===u?u:(j(e,"_type","object"),null);case"propertyExists":{const t=P(e,"object",H),n=P(e,"property",H);return t===u||n===u?u:(j(e,"_type","object","property"),null)}default:return Le(e)}}function Be(e){let t=H(e);return t!=u||(t=me(e),t!=u)||(t=ue(e),t!=u)||(t=Lt(e),t!=u)||(t=zt(e)),t}function Ae(e){return function(t){if(!Vi(t))return null;if("_type"in t)switch(t._type){case"filter":return P(t,"array",Ae(e))===u?u:(j(t,"_type","array","condition"),null);case"map":return P(t,"array",Lt)===u?u:(j(t,"_type","array","value"),null);case"keys":{const n=P(t,"dictionary",zt);return n===u?u:(j(t,"_type","dictionary"),n!=null?Object.keys(n):null)}case"values":{const n=P(t,"dictionary",Ze(e));if(n===u)return u;if(j(t,"_type","dictionary"),n!=null){const r=Object.values(n);for(let s=0;s<r.length;s++)if(P(r,s,e)===u)return u;return r}return null}default:return Le(t)}for(let n=0;n<t.length;n++)if(P(t,n,e)===u)return u;return t}}const ea=Ae(H),ot=Ae(me),Tn=Ae(ue),Lt=Ae(Be),ct=Ae(oa),ta=Ae(dn);function Ze(e){return function(t){if(!Fi(t))return u;if(t._type==null)return Object.keys(t).forEach(n=>P(t,n,e)),Object.values(t).some(n=>n===u)?u:t;switch(t._type){case"createDictionary":{const n=P(t,"entries",Ae(aa(e)));return n===u?u:(j(t,"_type","entries"),n!=null&&n.every(Qn)?Object.fromEntries(n.map(r=>[r.key,r.value])):null)}default:return Le(t)}}}const zt=Ze(Be),na=Ze(er),ra=Ze(dn),qt=Ze(dt),sa=Ze(da),ia=Ze(fa);function aa(e){return function(t){if(!Qn(t))return u;const n=P(t,"key",H),r=P(t,"value",e);return n===u||r===u?u:(j(t,"_type","key","value"),n!=null&&r!=null?t:null)}}function Le(e){if(!Fe(e))return u;switch(e._type){case"method":{const t=P(e,"object",H),n=P(e,"method",H),r=k(e,"params",zt);return t===u||n===u||r===u?u:(j(e,"_type","object","method","params"),null)}case"property":{const t=P(e,"object",H),n=P(e,"property",H);return t===u||n===u?u:(j(e,"_type","object","property"),null)}case"getObject":return P(e,"id",H)===u?u:(j(e,"_type","id"),null);case"ternary":{const t=P(e,"condition",ue),n=P(e,"true",Be),r=P(e,"false",Be);return t===u||n===u||r===u?u:(j(e,"_type","condition","false","true"),null)}}return u}function er(e){if(!Ui(e))return u;const t=k(e,"cost",ra),n=P(e,"display",H),r=P(e,"duration",me),s=P(e,"run",ct),a=k(e,"tooltip",H);return t===u||n===u||r===u||s===u||a===u?u:(j(e,"cost","display","duration","run","tooltip"),n!=null&&r!=null&&s!=null&&t===e.cost&&a===e.tooltip?e:null)}function oa(e){if(!Ai(e))return u;switch(e._type){case"branch":{const t=P(e,"condition",ue),n=k(e,"true",ct),r=k(e,"false",ct);return t===u||n===u||r===u?u:(j(e,"_type","condition","true","false"),t!=null&&n===e.true&&r===e.false?e:null)}case"forEach":{const t=P(e,"array",Lt),n=P(e,"forEach",Lt);return t===u||n===u?u:(j(e,"_type","array","forEach"),t!=null&&n!=null?e:null)}case"repeat":{const t=P(e,"iterations",me),n=P(e,"run",ct);return t===u||n===u?u:(j(e,"_type","iterations","run"),t!=null&&n!=null?e:null)}case"wait":{const t=k(e,"node",H),n=P(e,"duration",me);return t===u||n===u?u:(j(e,"_type","node","duration"),t!=null&&n!=null?e:null)}case"addItemsToInventory":{const t=P(e,"node",H),n=P(e,"items",ta);return t===u||n===u?u:(j(e,"_type","node","items"),t!=null&&n!=null?e:null)}case"setData":{const t=P(e,"object",H),n=P(e,"key",H),r=P(e,"value",Be);return t===u||n===u||r===u?u:(j(e,"_type","object","key","value"),t!=null&&n!=null&&r!=null?e:null)}case"addNode":{const t=P(e,"nodeType",H),n=P(e,"pos",ua),r=k(e,"data",Be);return t===u||n===u||r===u?u:(j(e,"_type","nodeType","pos","data"),t!=null&&n!=null&&r===e.data?e:null)}case"removeNode":{const t=P(e,"node",H);return t===u?u:(j(e,"_type","node"),t!=null?e:null)}case"event":{const t=P(e,"event",H),n=k(e,"data",Be);return t===u||n===u?u:(j(e,"_type","event","data"),t!=null&&n===e.data?e:null)}case"error":{const t=P(e,"message",H);return t===u?u:(j(e,"_type","message"),t!=null?e:null)}case"@return":{const t=k(e,"value",Be);return t===u?u:(j(e,"_type","value"),t===e.value?e:null)}case"@break":j(e,"_type");break;default:Le(e);break}return null}function la(e){if(!Ri(e))return u;const t=P(e,"slots",me),n=k(e,"canPlayerExtract",ue),r=k(e,"canPlayerInsert",ue);return t===u||n===u||r===u?u:(j(e,"slots","canPlayerExtract","canPlayerInsert"),t!=null&&n===e.canPlayerExtract&&r===e.canPlayerInsert?e:null)}function dn(e){if(!ki(e))return u;if(typeof e=="object"&&"item"in e&&"quantity"in e){const t=P(e,"item",H),n=P(e,"quantity",me);return t===u||n===u?u:(j(e,"item","quantity"),t!=null&&n!=null?e:null)}else return Le(e)}function ua(e){if(!Li(e))return u;if(typeof e=="object"&&"x"in e&&"y"in e){const t=P(e,"x",me),n=P(e,"y",me);return t===u||n===u?u:(j(e,"x","y"),t!=null&&n!=null?e:null)}else return Le(e)}function ca(e){if(!qi(e))return u;if(un(e))return me(e);if(typeof e=="object"&&"width"in e&&"height"in e){const t=P(e,"width",me),n=P(e,"height",me);return t===u||n===u?u:(j(e,"width","height"),t!=null&&n!=null?e:null)}else return Le(e)}function Mn(e){switch(typeof e){case"boolean":case"number":case"string":return!0;case"object":if("_type"in e)return!1;break}return!1}function dt(e){if(!cn(e))return u;if(typeof e=="string")return e;switch(e._type){case"dictionary":{const t=P(e,"keyType",dt),n=P(e,"valueType",dt),r=k(e,"internal",ue);return t===u||n===u||r===u?u:(j(e,"_type","keyType","valueType","internal"),t!=null&&n!=null&&e.internal===r?e:null)}case"array":{const t=P(e,"elementType",dt),n=k(e,"internal",ue);return t===u||n===u?u:(j(e,"_type","elementType","internal"),t!=null&&e.internal===n?e:null)}case"object":{const t=P(e,"properties",qt),n=k(e,"internal",ue);return t===u||n===u?u:(j(e,"_type","properties","internal"),t!=null&&e.internal===n?e:null)}case"number":{const t=k(e,"default",me),n=k(e,"internal",ue);return t===u||n===u?u:(j(e,"_type","default","internal"),t==e.default&&e.internal===n?e:null)}case"boolean":{const t=k(e,"default",ue),n=k(e,"internal",ue);return t===u||n===u?u:(j(e,"_type","default","internal"),t==e.default&&e.internal===n?e:null)}case"string":{const t=k(e,"default",H),n=k(e,"internal",ue);return t===u||n===u?u:(j(e,"_type","default","internal"),t==e.default&&e.internal===n?e:null)}case"id":{const t=P(e,"of",H),n=k(e,"internal",ue);return t===u||n===u?u:(j(e,"_type","of","internal"),t!=null&&e.internal===n?e:null)}case"itemStack":{const t=k(e,"internal",ue);return t===u?u:(j(e,"_type","internal"),e.internal===t?e:null)}case"action":{const t=k(e,"internal",ue);return t===u?u:(j(e,"_type","internal"),e.internal===t?e:null)}}return u}function da(e){if(!zi(e))return u;const t=P(e,"run",ct),n=k(e,"params",zt),r=k(e,"returns",dt);return t===u||n===u||r===u?u:(j(e,"run","params","returns"),t!=null&&e.params===n&&e.returns===r?e:u)}function fa(e){if(!Gi(e))return u;const t=Be(e.value),n=dt(e);return t===u||t==null||n===u?u:(e.value=t,n!=null?e:null)}function It(e){return function(t){if(!cn(e))return u;if(typeof e=="string")return typeof t=="string"?t:u;if(t==null)if("default"in e)t=e.default;else return u;switch(e._type){case"dictionary":return Ze(It(e.valueType))(t);case"array":return Ae(It(e.elementType))(t);case"object":const n=P(e,"properties",qt);if(n===u||n==null)return u;const r=Object.keys(n);j(t,...r);for(let s=0;s<r.length;s++){const a=P(t,r[s],It(n[r[s]]));if(a===u||a==null)return u}return t;case"number":return me(t);case"boolean":return ue(t);case"string":return H(t);case"id":return H(t);case"itemStack":return dn(t);case"action":return er(t)}return u}}const pa="Core",ma={newGame:[{_type:"addNode",nodeType:"core-tree",pos:{x:0,y:0}}]},ha={"core-tree":{display:"\u{1F333}",size:1,draggable:!1,data:{drops:{_type:"number",default:{_type:"randomInt",min:4,max:8}}},inventory:{slots:1,canPlayerExtract:!0,canPlayerInsert:!1},actions:{Chop:{display:"\u{1FA93}",duration:1e3,run:[{_type:"addItemsToInventory",node:"@instance",items:{_type:"method",object:"#core-treeLootTable",method:"roll",params:{rolls:1}},overflow:"destroy"},{_type:"setData",object:"@instance",key:"drops",value:{_type:"subtraction",operands:[{_type:"property",object:"@instance",property:"drops"},1]}},{_type:"branch",condition:{_type:"equals",operands:[{_type:"property",object:"@instance",property:"drops"},0]},true:[{_type:"removeNode",node:"@instance"}]}]}}},"core-chest":{display:"\u{1F4E6}",size:1,data:{tier:"core-woodChestTier"},inventory:{slots:{_type:"property",object:{_type:"getObject",id:{_type:"property",object:"@instance",property:"tier"}},property:"slots"},canPlayerExtract:!0,canPlayerInsert:!0},actions:{_type:"property",object:{_type:"property",object:"@instance",property:"tier"},property:"actions"}},"core-sapling":{display:"\u{1F331}",size:1,draggable:!1,place:[{_type:"wait",node:"@instance",duration:{_type:"randomInt",min:1e4,max:1e5}},{_type:"removeNode",node:"@instance"},{_type:"addNode",nodeType:"core-tree",pos:{x:{_type:"property",object:"@instance",property:"x"},y:{_type:"property",object:"@instance",property:"y"}}}]}},ga={"core-log":{display:"\u{1FAB5}"},"core-sapling":{display:"\u{1F331}",node:"core-sapling"}},ya={"core-weightedLootTable":{data:{items:{_type:"dictionary",keyType:{_type:"string"},valueType:{_type:"object",properties:{weight:{_type:"number",default:1},item:{_type:"id",of:"item"},quantity:{_type:"number",default:1}}}},currentRollValue:{_type:"number",internal:!0,default:0}},methods:{roll:{params:{rolls:{_type:"number",default:1}},returns:{_type:"itemStack"},run:[{_type:"repeat",iterations:{_type:"property",object:"@params",property:"rolls"},run:[{_type:"setData",object:"@instance",key:"currentRollValue",value:{_type:"random",min:0,max:{_type:"addition",operands:{_type:"map",array:{_type:"values",dictionary:{_type:"property",object:"@instance",property:"items"}},value:{_type:"property",object:"@element",property:"weight"}}}}},{_type:"forEach",array:{_type:"values",dictionary:{_type:"property",object:"@instance",property:"items"}},forEach:[{_type:"setData",object:"@instance",key:"currentRollValue",value:{_type:"subtraction",operands:[{_type:"property",object:"@instance",property:"currentRollValue"},{_type:"property",object:"@element",property:"weight"}]}},{_type:"branch",condition:{_type:"lessThanOrEqual",operands:[{_type:"property",object:"@instance",property:"currentRollValue"},0]},true:[{_type:"@return",value:"@element"}]}]},{_type:"error",message:"Failed to roll loot table"},{_type:"@return",value:"null"}]}]}}},"core-chestTier":{data:{upgradesFrom:{_type:"dictionary",keyType:{_type:"id",of:"core-chestTier"},valueType:{_type:"object",properties:{cost:{_type:"array",elementType:{_type:"object",properties:{item:{_type:"id",of:"item"},quantity:{_type:"number"}}}}}}},slots:{_type:"number"}},properties:{actions:{_type:"dictionary",keyType:{_type:"id",of:"core-chestTier"},valueType:{_type:"action"},value:{_type:"createDictionary",entries:{_type:"map",array:{_type:"filter",array:{_type:"values",dictionary:{_type:"getAllOfType",of:"core-chestTier"}},condition:{_type:"contains",array:{_type:"keys",dictionary:{_type:"property",object:"@element",property:"upgradesFrom"}},value:{_type:"property",object:"@instance",property:"id"}}},value:{_type:"entry",key:{_type:"property",object:"@element",property:"id"},value:{_type:"action",display:"\u21EA",tooltip:{_type:"concat",operands:["Upgrade to ",{_type:"property",object:"@element",property:"display"}]},cost:{_type:"property",object:{_type:"property",object:{_type:"property",object:"@element",property:"upgradesFrom"},property:{_type:"property",object:"@instance",property:"id"}},property:"cost"},run:[{_type:"setData",object:"@instance",key:"tier",value:{_type:"property",object:"@element",property:"id"}}]}}}}}}}};var va={display:pa,eventListeners:ma,nodes:ha,items:ga,types:ya,"core-weightedLootTable":{"core-treeLootTable":{items:{singleLog:{item:"core-log"},singleSapling:{item:"core-sapling"}}}},"core-chestTier":{"core-woodChestTier":{display:"Wood Chest",upgradesFrom:{},slots:4}}};const _a={core:va},Gt=Zn("main",function(){const e=Ut(["core"]),t=C({}),n=C({}),r=C({}),s=C({}),a=C({});de(e,d=>{const{items:p,nodes:_,types:b,objects:h,eventListeners:v}=Hi(d.map(g=>typeof g=="string"?_a[g]:g));console.log(p,_,b,h,v),t.value=p,n.value=_,r.value=b,s.value=h,a.value=v},{immediate:!0});const o=Si(()=>({startNodes:()=>[],types:{placeholder:{shape:At.Diamond,size:10,title:"placeholder"}},width:"calc(100% + 20px)",height:"calc(100% + 100px)",style:"margin-top: -50px; margin-left: -10px; overflow: hidden"})),l=C({x:0,y:0});return setInterval(()=>{const d=o.mousePosition.value;d&&(d.x!==l.value.x||d.y!==l.value.y)&&(l.value=d,Je("set cursor position",d))},50),{name:"Main",minimizable:!1,contentPacks:e,board:o,display:pe(()=>N(Y,null,[Ct(o),N(Ei,null,null)]))}}),ba=e=>[Gt],tr=I(()=>!1);function Na(e,t){}var nr=Object.freeze(Object.defineProperty({__proto__:null,main:Gt,getInitialLayers:ba,hasWon:tr,fixOldSave:Na},Symbol.toStringTag,{value:"Module"}));const tt=C(!1),_e=C(null),je=C(!1),St=C({}),rr=C({}),Cn=On(),at=C(),ft=C("");function Je(e,...t){var n;!tt.value||(n=at.value)==null||n.emit(e,...t)}function wa(){return O.layers.main[ie]}J.on("loadSettings",e=>{ae(e,"server",window.location.origin),ae(e,"nickname",xn()),de(()=>e.server,t=>{at.value&&at.value.close(),at.value=Nr(t),$a(at.value),tt.value=!1,ft.value="",at.value.connect()},{immediate:!0}),de(()=>e.nickname,t=>{_e.value&&Je("set nickname",t)}),Pn(pe(()=>N(Y,null,[N(Oe,{title:"Server URL","onUpdate:modelValue":t=>e.server=t,modelValue:e.server},null),N("div",{style:"font-style: italic; font-size: small; margin-top: -10px;"},[tt.value?N("span",null,[z("Connected!")]):ft.value?N("span",{style:"color: red"},[ft.value]):N("span",null,[z("Connecting...")])])]))),Pn(pe(()=>N(Y,null,[N(Oe,{title:pe(()=>N("span",null,[z("Nickname"),N("button",{class:"button",style:"position: absolute; right: 0px; top: 2px;",onClick:()=>e.nickname=xn()},[N("span",{class:"material-icons"},[z("casino")])])])),"onUpdate:modelValue":t=>e.nickname=t,modelValue:e.nickname},null)])))});function $a(e){e.on("connect",()=>{ft.value="",tt.value=!0}),e.on("connect_error",t=>{ft.value=`${t.name}: ${t.message}`}),e.on("disconnect",(t,n)=>{var r;ft.value=n instanceof Error?`${n.name}: ${n.message}`:(r=n==null?void 0:n.description)!=null?r:t,tt.value=!1}),e.on("server version",t=>{Cr(W.versionNumber,t)||(Cn.info("Server only accepts game versions in range: "+t),e.disconnect())}),e.on("info",t=>{Cn.info(t),J.emit("serverSentInfo")}),e.on("chat",(t,n)=>{J.emit("chat",t,n)}),e.on("set rooms",t=>{J.emit("setRooms",t)}),e.on("joined room",(t,n)=>{_e.value=t,je.value=n,J.emit("chat",void 0,"you joined "+t)}),e.on("left room",()=>{_e.value=null}),e.on("set nicknames",t=>{St.value=t}),e.on("set cursor position",(t,n)=>{t!==e.id&&(rr.value[t]=n)}),e.on("set content packs",t=>{Gt.contentPacks.value=t})}function xn(){return wr({dictionaries:[$r,Sr,Tr],length:3,separator:" ",style:"capital"})}de(tt,e=>{!e&&_e.value&&Sa()});function Sa(){je.value||ir(),_e.value=null,je.value=!1}function sr(e={}){return Object.assign({id:`${W.id}-0`,name:"Default Save",tabs:W.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:W.id,modVersion:W.versionNumber,layers:{}},e)}function Ce(e){const t=ke.compressToUTF16(Rn(e!=null?e:O[ie]));return localStorage.setItem((e!=null?e:O[ie]).id,t),t}async function ir(){Ma();try{let e=localStorage.getItem(Z.active);if(e==null){await Qe(pt());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=ke.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==W.id){await Qe(pt());return}t.id=Z.active,await Qe(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await Qe(pt())}}function pt(){const e=Ot(),t=sr({id:e});return Ce(t),Z.saves.push(e),t}function Ot(){let e,t=0;do e=`${W.id}-${t++}`;while(localStorage.getItem(e));return e}async function Qe(e){console.info("Loading save",e);const{layers:t,removeLayer:n,addLayer:r}=await Et(()=>Promise.resolve().then(function(){return wi}),void 0),{fixOldSave:s,getInitialLayers:a}=await Et(()=>Promise.resolve().then(function(){return nr}),void 0);for(const o in t){const l=t[o];l&&n(l)}a(e).forEach(o=>r(o,e)),e=sr(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==W.versionNumber&&s(e.modVersion,e),Object.assign(O,e),Z.active=O.id,J.emit("onLoad")}setInterval(()=>{O.autosave&&(!_e.value||je.value)&&Ce()},1e3);window.onbeforeunload=()=>{O.autosave&&(!_e.value||je.value)&&Ce()};window.save=Ce;const Ta=window.hardReset=async()=>{await Qe(pt())},Tt=ht({active:"",saves:[],showTPS:!0,theme:an.Nordic,unthrottled:!1});de(Tt,e=>{const t=ke.compressToUTF16(JSON.stringify(e));localStorage.setItem(W.id,t)},{deep:!0});var Z=window.settings=Tt;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:an.Nordic};J.emit("loadSettings",e),Object.assign(Tt,e),Ta()};function Ma(){try{let e=localStorage.getItem(W.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=ke.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(Tt,t)}J.emit("loadSettings",Tt)}catch{}}const ar=ht([]);function Pn(e){ar.push(e)}const Ca=ht([]),xa=ht([]);function Ee(e,t="span"){return typeof e=="function"?G({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),G({template:e})):G({render:()=>({})}):e}function Ct(e){if(wt(e))return typeof e=="function"?e():Ee(e);const t=e[$t];return N(t,e[kt](),null)}function Pa(e){if(wt(e))return typeof e=="function"?e():typeof e=="string"?N(Y,null,[e]):N(e,null,null);const t=e[$t];return N(t,e[kt](),null)}function wt(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[Vt]===!0}function or(e,t="div"){const n=gt();return Rt(()=>{n.value=Ee(xe(e),t)}),n}function fn(e,t="div"){const n=gt(null);return Rt(()=>{const r=xe(e);n.value=r==null?null:Ee(r,t)}),n}function Ia(e){return I(()=>xe(e))}function xe(e){return i(i(e))}function ee(...e){return e.includes(Object)||e.push(Object),e}const Oa=G({components:{Context:Un},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:ee(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:ee(Number,String),required:!0},name:{type:ee(String),required:!0},color:ee(String),minimizable:ee(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:n,minimized:r,minWidth:s,tab:a}=be(e),o=or(t),l=I(()=>W.allowGoBack&&n.value>0&&!r.value);function d(){O.tabs.splice(i(e.index),1/0)}De(()=>_(r.value,i(s.value))),de([r,Ia(s)],([b,h])=>_(b,h));function p(b){e.nodes.value=b}function _(b,h){const v=typeof h=="number"||Number.isNaN(parseInt(h))?h+"px":h,g=a.value();g!=null&&(b?(g.style.flexGrow="0",g.style.flexShrink="0",g.style.width="60px",g.style.minWidth=g.style.flexBasis="",g.style.margin="0"):(g.style.flexGrow="",g.style.flexShrink="",g.style.width="",g.style.minWidth=g.style.flexBasis=v,g.style.margin=""))}return{component:o,showGoBack:l,updateNodes:p,unref:i,goBack:d}}});function ja(e,t,n,r,s,a){const o=jt("Context");return m(),$("div",{class:"layer-container",style:ve({"--layer-color":e.unref(e.color)})},[e.showGoBack?(m(),$("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...l)=>e.goBack&&e.goBack(...l))},"\u2190")):F("",!0),e.minimized.value?(m(),$("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=l=>e.minimized.value=!1)},[c("div",null,A(e.unref(e.name)),1)])):(m(),$("div",{key:2,class:oe(["layer-tab",{showGoBack:e.showGoBack}])},[N(o,{onUpdateNodes:e.updateNodes},{default:E(()=>[(m(),U(Ne(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(m(),$("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=l=>e.minimized.value=!0)}," \u25BC ")):F("",!0)],4)}var Ea=K(Oa,[["render",ja],["__scopeId","data-v-34c9d881"]]);const lr=e=>(Pe("data-v-4b4bda40"),e=e(),Ie(),e),Fa=lr(()=>c("h2",null,"Changelog",-1)),Va=lr(()=>c("details",{open:""},[c("summary",null,[z("v0.0 Initial Commit - "),c("time",null,"2021-09-04")]),z(" This is the first release :D "),c("ul",null,[c("li",{class:"feature"},"Did everything"),c("li",{class:"fix"},"Had some fun"),c("li",{class:"breaking"},"Removed everything"),c("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),Ba=G({__name:"Changelog",setup(e,{expose:t}){const n=C(!1);return t({open(){n.value=!0}}),(r,s)=>(m(),U(He,{modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=a=>n.value=a)},{header:E(()=>[Fa]),body:E(()=>[Va]),_:1},8,["modelValue"]))}});var Da=K(Ba,[["__scopeId","data-v-4b4bda40"]]);const Aa={class:"field"},La=G({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,r=I(()=>Ee(i(n.title)||"<span></span>","span")),s=I({get(){return!!n.modelValue},set(a){t("update:modelValue",a)}});return(a,o)=>(m(),$("label",Aa,[Mt(c("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":o[0]||(o[0]=l=>ce(s)?s.value=l:null)},null,512),[[yr,i(s)]]),(m(),U(Ne(i(r))))]))}});var Ve=K(La,[["__scopeId","data-v-2b109500"]]);J.on("setupVue",e=>e.use(Mr));function qa(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}const Ra=G({props:{visibility:{type:ee(Number),required:!0},display:{type:ee(Object,String,Function),required:!0},style:ee(String,Object,Array),classes:ee(Object),glowColor:ee(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:n,glowColor:r,floating:s}=be(e),a=or(n),o=I(()=>{const d=xe(r);return d?i(s)?qa(d):{boxShadow:`0px 9px 5px -6px ${d}`}:{}});function l(){t("selectTab")}return{selectTab:l,component:a,glowColorStyle:o,unref:i,Visibility:$e}}});function ka(e,t,n,r,s,a){var o;return e.unref(e.visibility)!==e.Visibility.None?(m(),$("button",{key:0,onClick:t[0]||(t[0]=(...l)=>e.selectTab&&e.selectTab(...l)),class:oe(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:ve([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.glowColorStyle,(o=e.unref(e.style))!=null?o:{}])},[(m(),U(Ne(e.component)))],6)):F("",!0)}var ur=K(Ra,[["render",ka],["__scopeId","data-v-610a2549"]]);const Ua=G({__name:"Sticky",setup(e){const t=C("0"),n=new ResizeObserver(s),r=gt(null);function s(){let a=r.value;if(a==null)return;let o=0;for(;a.previousSibling;){const l=a.previousSibling;l.dataset&&"vSticky"in l.dataset&&(o+=l.offsetHeight),a=l}t.value=o+"px"}return De(s),document.fonts.ready.then(s),nn(()=>{var o;const a=(o=r.value)==null?void 0:o.parentElement;a&&n.observe(a)}),(a,o)=>(m(),$("div",{class:"sticky",style:ve({top:t.value}),ref_key:"element",ref:r,"data-v-sticky":""},[Ge(a.$slots,"default",{},void 0,!0)],4))}});var za=K(Ua,[["__scopeId","data-v-cccac690"]]);const Ga=G({props:{visibility:{type:ee(Number),required:!0},activeTab:{type:ee(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:ee(Object),required:!0},style:ee(String,Object,Array),classes:ee(Object),buttonContainerStyle:ee(String,Object,Array),buttonContainerClasses:ee(Object)},components:{Sticky:za,TabButton:ur},setup(e){const{activeTab:t}=be(e),n=I(()=>Ue[Z.theme].floatingTabs),r=gt("");Rt(()=>{const l=xe(t);if(l==null){r.value="";return}if(wt(l)){r.value=Ee(l);return}r.value=Ee(i(l.display))});const s=I(()=>{const l=xe(t);return wt(l)||!l?void 0:i(l.classes)}),a=I(()=>{const l=xe(t);return wt(l)||!l?void 0:i(l.style)});function o(l){const{display:d,style:p,classes:_,glowColor:b,visibility:h}=l;return{display:d,style:i(p),classes:_,glowColor:b,visibility:h}}return{floating:n,tabClasses:s,tabStyle:a,Visibility:$e,component:r,gatherButtonProps:o,unref:i}}});function Wa(e,t,n,r,s,a){var d,p;const o=jt("TabButton"),l=jt("Sticky");return e.unref(e.visibility)!==e.Visibility.None?(m(),$("div",{key:0,class:oe(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:ve([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(d=e.unref(e.style))!=null?d:[],(p=e.tabStyle)!=null?p:[]])},[N(l,{class:oe(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:ve(e.unref(e.buttonContainerStyle))},{default:E(()=>[c("div",{class:oe(["tab-buttons",{floating:e.floating}])},[(m(!0),$(Y,null,ze(e.unref(e.tabs),(_,b)=>(m(),U(o,et({onSelectTab:h=>e.selected.value=b,floating:e.floating,key:b,active:e.unref(_.tab)===e.unref(e.activeTab)},e.gatherButtonProps(_)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(m(),U(Ne(e.unref(e.component)),{key:0})):F("",!0)],6)):F("",!0)}var Ha=K(Ga,[["render",Wa],["__scopeId","data-v-11575f45"]]);const Za=Symbol("TabButton"),Ya=Symbol("TabFamily");function Ka(e,t){if(Object.keys(e).length===0)throw console.warn("Cannot create tab family with 0 tabs"),"Cannot create tab family with 0 tabs";const n=Ut(Object.keys(e)[0]);return on(()=>{var a;const r=(a=t==null?void 0:t())!=null?a:{};r.id=Ln("tabFamily-"),r.type=Ya,r[$t]=Ha,r.tabs=Object.keys(e).reduce((o,l)=>{const d=e[l]();return d.type=Za,d[$t]=ur,L(d,"visibility"),ae(d,"visibility",$e.Visible),L(d,"tab"),L(d,"display"),L(d,"classes"),L(d,"style"),L(d,"glowColor"),o[l]=d,o},{}),r.selected=n,r.activeTab=I(()=>{const o=i(s.tabs);if(n.value in o&&i(o[n.value].visibility)===$e.Visible)return i(o[n.value].tab);const l=Object.values(o).find(d=>i(d.visibility)===$e.Visible);return l?i(l.tab):null}),L(r,"visibility"),ae(r,"visibility",$e.Visible),L(r,"classes"),L(r,"style"),L(r,"buttonContainerClasses"),L(r,"buttonContainerStyle"),r[kt]=function(){const{visibility:o,activeTab:l,selected:d,tabs:p,style:_,classes:b,buttonContainerClasses:h,buttonContainerStyle:v}=this;return{visibility:o,activeTab:l,selected:d,tabs:p,style:i(_),classes:b,buttonContainerClasses:h,buttonContainerStyle:v}};const s=r;return s})}var Xa=G({props:{element:Object,display:{type:ee(Object,String,Function),required:!0},style:ee(Object,String,Array),classes:ee(Object),direction:ee(String),xoffset:ee(String),yoffset:ee(String),pinned:Object},setup(e){const{element:t,display:n,pinned:r}=be(e),s=C(!1),a=I(()=>(xe(r)||s.value)&&o.value),o=fn(n),l=gt(Ee(pe(()=>{const _=xe(t);return _==null?"":Pa(_)})));function d(_){const b=r;_.shiftKey&&b&&(b.value=!b.value,_.stopPropagation(),_.preventDefault())}const p=I(()=>xe(r)&&Ue[Z.theme].showPin);return{Direction:re,isHovered:s,isShown:a,comp:o,elementComp:l,unref:i,togglePinned:d,showPin:p}}});const Ja={key:0,class:"material-icons pinned"};function Qa(e,t,n,r,s,a){return m(),$("div",{class:oe(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=o=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=o=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...o)=>e.togglePinned&&e.togglePinned(...o))},[Ge(e.$slots,"default",{},void 0,!0),e.elementComp?(m(),U(Ne(e.elementComp),{key:0})):F("",!0),N(lt,{name:"fade"},{default:E(()=>{var o;return[e.isShown?(m(),$("div",{key:0,class:oe(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:ve([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(o=e.unref(e.style))!=null?o:{}])},[e.showPin?(m(),$("span",Ja,"push_pin")):F("",!0),e.comp?(m(),U(Ne(e.comp),{key:1})):F("",!0)],6)):F("",!0)]}),_:1})],34)}var Q=K(Xa,[["render",Qa],["__scopeId","data-v-6102fa3a"]]);const pn=e=>(Pe("data-v-760d2b9e"),e=e(),Ie(),e),eo={class:"room"},to={key:0,class:"actions"},no=pn(()=>c("span",{class:"material-icons"},"check",-1)),ro=pn(()=>c("span",{class:"material-icons"},"close",-1)),so={key:1,class:"details"},io={key:0,class:"material-icons"},ao={key:1,class:"material-icons"},oo={class:"room-host"},lo={class:"room-host"},uo={key:2,class:"details",style:{display:"flex"}},co=pn(()=>c("span",null,"Password:",-1)),fo=G({__name:"Room",props:{isPrivate:{type:Boolean},room:null},emits:["connect"],setup(e,{emit:t}){const n=e,{room:r}=be(n),s=C(!1),a=C("");de(s,d=>{d&&(a.value="")});function o(){r.value.hasPassword?s.value=!0:t("connect")}function l(){t("connect",a.value),s.value=!1}return(d,p)=>(m(),$("div",eo,[s.value?(m(),$("div",to,[c("button",{onPointerdown:l,class:"button"},[N(Q,{display:"Join",direction:i(re).Left,class:"info"},{default:E(()=>[no]),_:1},8,["direction"])],32),c("button",{onPointerdown:p[0]||(p[0]=_=>s.value=!s.value),class:"button"},[N(Q,{display:"Cancel",direction:i(re).Left,class:"info"},{default:E(()=>[ro]),_:1},8,["direction"])],32)])):F("",!0),s.value?(m(),$("div",uo,[co,N(Oe,{modelValue:a.value,"onUpdate:modelValue":p[1]||(p[1]=_=>a.value=_),class:"editname",onSubmit:l,onCancel:p[2]||(p[2]=_=>s.value=!s.value),submitOnBlur:!1},null,8,["modelValue"])])):(m(),$("div",so,[i(r).hasPassword?(m(),$("span",io,"lock")):F("",!0),e.isPrivate?(m(),$("span",ao,"visibility_off")):F("",!0),c("button",{class:"button open",onClick:o},[c("h3",null,A(i(r).name),1)]),c("div",oo,"Hosted by "+A(i(r).host),1),c("div",lo,A(i(r).numContentPacks)+" active content packs",1)]))]))}});var po=K(fo,[["__scopeId","data-v-760d2b9e"]]);const yt=e=>(Pe("data-v-bc8c88e2"),e=e(),Ie(),e),mo=yt(()=>c("h2",null,"Multiplayer",-1)),ho={style:{"text-align":"center"}},go=yt(()=>c("br",null,null,-1)),yo={class:"players-list"},vo={key:0,style:{"font-size":"small",color:"grey","margin-left":"10px"}},_o=yt(()=>c("div",{style:{"flex-grow":"1"}},null,-1)),bo=["onClick"],No=yt(()=>c("br",null,null,-1)),wo={key:1},$o=z(" Not connected to a server. Please set up networking in the options modal. "),So=yt(()=>c("br",null,null,-1)),To=[$o,So],Mo={class:"modal-footer"},Co={class:"footer"},xo=yt(()=>c("div",{style:{"flex-grow":"1"}},null,-1));var Po=G({__name:"RoomsDialog",setup(e,{expose:t}){const n=C(!1),r=C(null);t({open(){n.value=!0}});const s=C(null),a=C(""),o=C(""),l=C(""),d=C(""),p=C(!1),_=Ka({roomList:()=>({display:"Room List",tab:pe(()=>{var g;return N(Y,null,[((g=s.value)!=null?g:[]).map(T=>N(po,{room:T,isPrivate:!1,onConnect:M=>h(T.name,M)},null)),s.value!=null&&s.value.length===0?N("div",{style:"text-align: center"},[z("No public rooms found")]):null,s.value==null?N("div",{style:"text-align: center"},[z("Loading public rooms list...")]):null,N("br",null,null),N("button",{class:"button large",onClick:b},[z("Refresh")])])})}),direct:()=>({display:"Private Room",tab:pe(()=>N(Y,null,[N("div",{class:"direct-connect"},[N("div",{class:"field"},[N(Oe,{"onUpdate:modelValue":g=>a.value=g,modelValue:a.value,title:"Room Name"},null)]),N("div",{class:"field"},[N(Oe,{"onUpdate:modelValue":g=>o.value=g,modelValue:o.value,title:"Room Password"},null)]),N("button",{class:"button large",onClick:()=>h(a.value,o.value)},[z("Connect")])])]))}),host:()=>({display:"Host",tab:pe(()=>N(Y,null,[N("div",{class:"field"},[N(Oe,{"onUpdate:modelValue":g=>l.value=g,modelValue:l.value,title:"Room Name"},null)]),N("div",{class:"field"},[N(Oe,{"onUpdate:modelValue":g=>d.value=g,modelValue:d.value,title:"Room Password"},null)]),N(Ve,{"onUpdate:modelValue":g=>p.value=g,modelValue:p.value,title:"Private"},null),N("div",{style:"font-size: small"},[z("You will host the currently active single player world, allowing other players to join and modify your save. It is recommended to backup your save frequently.")]),N("br",null,null),N("button",{class:"button large",onClick:()=>v(l.value,d.value,p.value)},[z("Host")])]))})},()=>({style:"margin-left: 0; margin-right: 0; --layer-color: var(--link)"}));de([n,_.selected],([g,T])=>{g&&T==="roomList"?b():g&&T==="host"&&(l.value=`${Z.nickname}'s ${O.name}`)}),de(_e,g=>{g||(a.value="",o.value="",l.value=`${Z.nickname}'s ${O.name}`,d.value="",b())}),J.on("setRooms",g=>s.value=g),J.on("serverSentInfo",()=>{n.value&&b()});function b(){s.value=null,Je("get rooms")}function h(g,T){Je("connect to room",g,T,Z.nickname)}function v(g,T,M){Je("create room",{name:g,password:T,nickname:Z.nickname,contentPacks:Gt.contentPacks.value,privateRoom:M===!0,state:wa()})}return(g,T)=>(m(),U(He,{modelValue:n.value,"onUpdate:modelValue":T[2]||(T[2]=M=>n.value=M),ref_key:"modal",ref:r},{header:E(()=>[mo]),body:E(({shown:M})=>[M?(m(),$(Y,{key:0},[i(tt)?(m(),$(Y,{key:0},[i(_e)?(m(),$(Y,{key:0},[c("div",ho,[c("h3",null,"Connected to "+A(i(_e)),1)]),go,c("ul",yo,[(m(!0),$(Y,null,ze(i(St),(le,y)=>(m(),$("div",{key:y,style:{display:"flex"}},[c("span",null,A(le),1),le===i(Z).nickname?(m(),$("span",vo,"(YOU)")):F("",!0),_o,i(je)&&le!==i(Z).nickname?(m(),$("button",{key:1,class:"button",style:{color:"red",display:"inline"},onClick:S=>i(Je)("kick user",le)}," KICK ",8,bo)):F("",!0)]))),128))]),No,c("button",{class:"button large",onClick:T[0]||(T[0]=()=>v(l.value,d.value,p.value))},A(i(je)?"Close":"Leave")+" room ",1)],64)):(m(),U(Ne(i(Ct)(i(_))),{key:1}))],64)):(m(),$("div",wo,To))],64)):F("",!0)]),footer:E(()=>[c("div",Mo,[c("div",Co,[xo,c("button",{class:"button modal-default-button",onClick:T[1]||(T[1]=M=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var Io=K(Po,[["__scopeId","data-v-bc8c88e2"]]);const nt=e=>(Pe("data-v-7dec2dec"),e=e(),Ie(),e),Oo={class:"info-modal-header"},jo=["src","alt"],Eo={class:"info-modal-title"},Fo={key:0},Vo={key:0},Bo={key:0},Do=nt(()=>c("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),Ao=nt(()=>c("br",null,null,-1)),Lo=nt(()=>c("br",null,null,-1)),qo=["href"],Ro=nt(()=>c("span",{class:"material-icons info-modal-discord"},"discord",-1)),ko=nt(()=>c("div",null,[c("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[c("span",{class:"material-icons info-modal-discord"},"discord"),z(" The Paper Pilot Community ")])],-1)),Uo=nt(()=>c("div",null,[c("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[c("span",{class:"material-icons info-modal-discord"},"discord"),z(" The Modding Tree ")])],-1)),zo=nt(()=>c("br",null,null,-1));var Go=G({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:r,logo:s,author:a,discordName:o,discordLink:l,versionNumber:d,versionTitle:p}=W,_=be(n),b=C(!1),h=I(()=>sn(O.timePlayed)),v=I(()=>Ee(pe(()=>N(Y,null,[Ca.map(Ct)]))));t({open(){b.value=!0}});function g(){var T;(T=i(_.changelog))==null||T.open()}return(T,M)=>(m(),U(He,{modelValue:b.value,"onUpdate:modelValue":M[0]||(M[0]=le=>b.value=le)},{header:E(()=>[c("div",Oo,[i(s)?(m(),$("img",{key:0,class:"info-modal-logo",src:i(s),alt:i(r)},null,8,jo)):F("",!0),c("div",Eo,[c("h2",null,A(i(r)),1),c("h4",null,[z(" v"+A(i(d)),1),i(p)?(m(),$("span",Fo,": "+A(i(p)),1)):F("",!0)])])])]),body:E(({shown:le})=>[le?(m(),$("div",Vo,[i(a)?(m(),$("div",Bo,"By "+A(i(a)),1)):F("",!0),Do,Ao,c("div",{class:"link",onClick:g},"Changelog"),Lo,c("div",null,[i(l)?(m(),$("a",{key:0,href:i(l),class:"info-modal-discord-link"},[Ro,z(" "+A(i(o)),1)],8,qo)):F("",!0)]),ko,Uo,zo,c("div",null,"Time Played: "+A(i(h)),1),(m(),U(Ne(i(v))))])):F("",!0)]),_:1},8,["modelValue"]))}});var Wo=K(Go,[["__scopeId","data-v-7dec2dec"]]);const Ho={class:"field"},Zo={key:0,class:"field-title"},cr=G({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var o;const n=e,r=fn(We(n,"title"),"span"),s=C((o=n.options.find(l=>l.value===n.modelValue))!=null?o:null);de(We(n,"modelValue"),l=>{var d;xe(s)!==l&&(s.value=(d=n.options.find(p=>p.value===l))!=null?d:null)});function a(l){t("update:modelValue",l.value)}return(l,d)=>(m(),$("div",Ho,[i(r)?(m(),$("span",Zo,[(m(),U(Ne(i(r))))])):F("",!0),N(i(Pr),{options:e.options,modelValue:s.value,"onUpdate:modelValue":[d[0]||(d[0]=p=>s.value=p),a],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}}),dr=e=>(Pe("data-v-bc13791c"),e=e(),Ie(),e),Yo=dr(()=>c("div",{class:"header"},[c("h2",null,"Options")],-1)),Ko=dr(()=>c("hr",null,null,-1));var Xo=G({__name:"Options",setup(e,{expose:t}){const n=C(!1);t({open(){n.value=!0}});const r=Object.keys(Ue).map(g=>({label:Ms(g),value:g})),s=I(()=>Ee(pe(()=>N(Y,null,[ar.map(Ct)])))),{showTPS:a,theme:o,unthrottled:l}=be(Z),{autosave:d,offlineProd:p}=be(O),_=I({get(){return O.devSpeed===0},set(g){O.devSpeed=g?0:null}}),b=pe(()=>N("span",null,[z("Offline Production"),N(Q,{display:"Save-specific"},{default:()=>[z("*")]})])),h=pe(()=>N("span",null,[z("Autosave"),N(Q,{display:"Save-specific"},{default:()=>[z("*")]})])),v=pe(()=>N("span",null,[z("Pause game"),N(Q,{display:"Save-specific"},{default:()=>[z("*")]})]));return(g,T)=>(m(),U(He,{modelValue:n.value,"onUpdate:modelValue":T[6]||(T[6]=M=>n.value=M)},{header:E(()=>[Yo]),body:E(()=>[N(cr,{title:"Theme",options:i(r),modelValue:i(o),"onUpdate:modelValue":T[0]||(T[0]=M=>ce(o)?o.value=M:null)},null,8,["options","modelValue"]),(m(),U(Ne(i(s)))),N(Ve,{title:"Show TPS",modelValue:i(a),"onUpdate:modelValue":T[1]||(T[1]=M=>ce(a)?a.value=M:null)},null,8,["modelValue"]),Ko,N(Ve,{title:"Unthrottled",modelValue:i(l),"onUpdate:modelValue":T[2]||(T[2]=M=>ce(l)?l.value=M:null)},null,8,["modelValue"]),N(Ve,{title:i(b),modelValue:i(p),"onUpdate:modelValue":T[3]||(T[3]=M=>ce(p)?p.value=M:null)},null,8,["title","modelValue"]),N(Ve,{title:i(h),modelValue:i(d),"onUpdate:modelValue":T[4]||(T[4]=M=>ce(d)?d.value=M:null)},null,8,["title","modelValue"]),i(W).enablePausing?(m(),U(Ve,{key:0,title:i(v),modelValue:i(_),"onUpdate:modelValue":T[5]||(T[5]=M=>ce(_)?_.value=M:null)},null,8,["title","modelValue"])):F("",!0)]),_:1},8,["modelValue"]))}});var Jo=K(Xo,[["__scopeId","data-v-bc13791c"]]);const Qo={key:0},el=["onClick","disabled"],tl={key:0},nl=["onClick"],rl=G({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const r=be(e),s=C(!1);de(s,l=>{t("confirmingChanged",l)});function a(){if(i(r.skipConfirm)){t("click");return}s.value&&t("click"),s.value=!s.value}function o(){s.value=!1}return(l,d)=>(m(),$("span",{class:oe(["container",{confirming:s.value}])},[s.value?(m(),$("span",Qo,"Are you sure?")):F("",!0),c("button",{onClick:mt(a,["stop"]),class:"button danger",disabled:e.disabled},[s.value?(m(),$("span",tl,"Yes")):Ge(l.$slots,"default",{key:1},void 0,!0)],8,el),s.value?(m(),$("button",{key:1,class:"button",onClick:mt(o,["stop"])},"No",8,nl)):F("",!0)],2))}});var sl=K(rl,[["__scopeId","data-v-2f8ef34c"]]);const il=["onClick"],al=G({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=C(!1),r=C(null);function s(){t("click"),r.value&&clearTimeout(r.value),n.value=!1,De(()=>{n.value=!0,r.value=setTimeout(()=>n.value=!1,500)})}return(a,o)=>(m(),$("button",{onClick:mt(s,["stop"]),class:oe(["feedback",{activated:n.value,left:e.left}])},[Ge(a.$slots,"default",{},void 0,!0)],10,il))}});var ol=K(al,[["__scopeId","data-v-01a1b95c"]]);const qe=e=>(Pe("data-v-0136bef4"),e=e(),Ie(),e),ll=qe(()=>c("div",{class:"handle material-icons"},"drag_handle",-1)),ul={key:0,class:"actions"},cl=qe(()=>c("span",{class:"material-icons"},"content_paste",-1)),dl=qe(()=>c("span",{class:"material-icons"},"content_copy",-1)),fl=qe(()=>c("span",{class:"material-icons"},"edit",-1)),pl=qe(()=>c("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),ml={key:1,class:"actions"},hl=qe(()=>c("span",{class:"material-icons"},"check",-1)),gl=qe(()=>c("span",{class:"material-icons"},"close",-1)),yl={key:2,class:"details"},vl={class:"save-version"},_l=qe(()=>c("br",null,null,-1)),bl={key:0},Nl={key:3,class:"details"},wl={key:4,class:"details error"},$l=qe(()=>c("br",null,null,-1)),Sl=G({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:r}=be(n),s=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=C(!1),o=C(!1),l=C("");de(a,()=>l.value=r.value.name||"");const d=I(()=>r.value&&r.value.id===O.id),p=I(()=>d.value?O.time:r.value&&r.value.time||0);function _(){t("editName",l.value),a.value=!1}return(b,h)=>(m(),$("div",{class:oe(["save",{active:i(d)}])},[ll,a.value?(m(),$("div",ml,[c("button",{onClick:_,class:"button"},[N(Q,{display:"Save",direction:i(re).Left,class:"info"},{default:E(()=>[hl]),_:1},8,["direction"])]),c("button",{onClick:h[5]||(h[5]=v=>a.value=!a.value),class:"button"},[N(Q,{display:"Cancel",direction:i(re).Left,class:"info"},{default:E(()=>[gl]),_:1},8,["direction"])])])):(m(),$("div",ul,[i(r).error==null&&!o.value?(m(),U(ol,{key:0,onClick:h[0]||(h[0]=v=>t("export")),class:"button",left:""},{default:E(()=>[N(Q,{display:"Export",direction:i(re).Left,class:"info"},{default:E(()=>[cl]),_:1},8,["direction"])]),_:1})):F("",!0),i(r).error==null&&!o.value?(m(),$("button",{key:1,onClick:h[1]||(h[1]=v=>t("duplicate")),class:"button"},[N(Q,{display:"Duplicate",direction:i(re).Left,class:"info"},{default:E(()=>[dl]),_:1},8,["direction"])])):F("",!0),i(r).error==null&&!o.value?(m(),$("button",{key:2,onClick:h[2]||(h[2]=v=>a.value=!a.value),class:"button"},[N(Q,{display:"Edit Name",direction:i(re).Left,class:"info"},{default:E(()=>[fl]),_:1},8,["direction"])])):F("",!0),N(sl,{disabled:i(d),onClick:h[3]||(h[3]=v=>t("delete")),onConfirmingChanged:h[4]||(h[4]=v=>o.value=v)},{default:E(()=>[N(Q,{display:"Delete",direction:i(re).Left,class:"info"},{default:E(()=>[pl]),_:1},8,["direction"])]),_:1},8,["disabled"])])),i(r).error==null&&!a.value?(m(),$("div",yl,[c("button",{class:"button open",onClick:h[6]||(h[6]=v=>t("open"))},[c("h3",null,A(i(r).name),1)]),c("span",vl,"v"+A(i(r).modVersion),1),_l,i(p)?(m(),$("div",bl,"Last played "+A(i(s).format(i(p))),1)):F("",!0)])):i(r).error==null&&a.value?(m(),$("div",Nl,[N(Oe,{modelValue:l.value,"onUpdate:modelValue":h[7]||(h[7]=v=>l.value=v),class:"editname",onSubmit:_},null,8,["modelValue"])])):(m(),$("div",wl,[z(" Error: Failed to load save with id "+A(i(r).id),1),$l,z(A(i(r).error),1)]))],2))}});var Tl=K(Sl,[["__scopeId","data-v-0136bef4"]]);const mn=e=>(Pe("data-v-a8b59e3e"),e=e(),Ie(),e),Ml=mn(()=>c("h2",null,"Saves Manager",-1)),Cl={key:1},xl={class:"modal-footer"},Pl={key:1,class:"field"},Il=mn(()=>c("span",{class:"field-title"},"Create Save",-1)),Ol={class:"field-buttons"},jl={class:"footer"},El=mn(()=>c("div",{style:{"flex-grow":"1"}},null,-1)),Fl=G({__name:"SavesManager",setup(e,{expose:t}){const n=C(!1),r=C(null);t({open(){n.value=!0}});const s=C(!1),a=C(""),o=C(null);de(a,y=>{y?De(()=>{try{if(y[0]!=="{")if(y[0]==="e")y=decodeURIComponent(escape(atob(y)));else if(y[0]==="\u1BE1")y=ke.decompressFromUTF16(y);else{console.warn("Unable to determine preset encoding",y),s.value=!0;return}const S=JSON.parse(y);if(typeof S!="object"){s.value=!0;return}const V=Ot();S.id=V,Ce(S),a.value="",s.value=!1,Z.saves.push(V)}catch{s.value=!0}}):s.value=!1});let l={},d=C(Object.keys(l).reduce((y,S)=>(y.push({label:S.split("/").slice(-1)[0].slice(0,-4),value:l[S]}),y),[]));const p=tn({});function _(y){if(p[y]==null){let S=localStorage.getItem(y);if(S==null)p[y]={error:"Save doesn't exist in localStorage",id:y};else if(S==="dW5kZWZpbmVk")p[y]={error:"Save is undefined",id:y};else try{if(S[0]!=="{")if(S[0]==="e")S=decodeURIComponent(escape(atob(S)));else if(S[0]==="\u1BE1")S=ke.decompressFromUTF16(S);else return console.warn("Unable to determine preset encoding",S),s.value=!0,p[y]={error:"Unable to determine preset encoding",id:y},p[y];p[y]={...JSON.parse(S),id:y}}catch(V){p[y]={error:V,id:y},console.warn(`SavesManager: Failed to load info about save with id ${y}:
${V}
${S}`)}}return p[y]}de(n,y=>{y&&Object.keys(p).forEach(S=>delete p[S])});const b=I(()=>Z.saves.reduce((y,S)=>(y[S]=_(S),y),{}));function h(y){let S;switch(O.id===y?S=Rn(O[ie]):S=JSON.stringify(b.value[y]),W.exportEncoding){default:console.warn(`Unknown save encoding: ${W.exportEncoding}. Defaulting to lz`);case"lz":S=ke.compressToUTF16(S);break;case"base64":S=btoa(unescape(encodeURIComponent(S)));break;case"plain":break}const V=document.createElement("textarea");V.value=S,document.body.appendChild(V),V.select(),V.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(V)}function v(y){O.id===y&&Ce();const S={...b.value[y],id:Ot()};Ce(S),Z.saves.push(S.id)}function g(y){Z.saves=Z.saves.filter(S=>S!==y),localStorage.removeItem(y),p[y]=void 0}function T(y){b.value[O.id].time=O.time,Ce(),p[O.id]=void 0,Qe(b.value[y]),p[y]=void 0}function M(y){if(o.value=y,De(()=>{o.value=null}),y[0]!=="{")if(y[0]==="e")y=decodeURIComponent(escape(atob(y)));else if(y[0]==="\u1BE1")y=ke.decompressFromUTF16(y);else{console.warn("Unable to determine preset encoding",y);return}const S=JSON.parse(y);S.id=Ot(),Ce(S),Z.saves.push(S.id),T(S.id)}function le(y,S){const V=b.value[y];V&&(V.name=S,O.id===y?(O.name=S,Ce()):(Ce(V),p[y]=void 0))}return(y,S)=>(m(),U(He,{modelValue:n.value,"onUpdate:modelValue":S[4]||(S[4]=V=>n.value=V),ref_key:"modal",ref:r},{header:E(()=>[Ml]),body:E(({shown:V})=>[V&&(!i(_e)||i(je))?(m(),U(i(Ir),{key:0,list:i(Z).saves,handle:".handle",itemKey:B=>B},{item:E(({element:B})=>[N(Tl,{save:i(b)[B],onOpen:q=>T(B),onExport:q=>h(B),onEditName:q=>le(B,q),onDuplicate:q=>v(B),onDelete:q=>g(B)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):(m(),$("div",Cl,"You are connected to a server - cannot change saves"))]),footer:E(()=>[c("div",xl,[!i(_e)||i(je)?(m(),U(Oe,{key:0,modelValue:a.value,"onUpdate:modelValue":S[0]||(S[0]=V=>a.value=V),title:"Import Save",placeholder:"Paste your save here!",class:oe({importingFailed:s.value})},null,8,["modelValue","class"])):F("",!0),!i(_e)||i(je)?(m(),$("div",Pl,[Il,c("div",Ol,[c("button",{class:"button",onClick:S[1]||(S[1]=V=>T(i(pt)().id))},"New Game"),Object.keys(i(d)).length>0?(m(),U(cr,{key:0,options:i(d),modelValue:o.value,"onUpdate:modelValue":S[2]||(S[2]=V=>M(V)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):F("",!0)])])):F("",!0),c("div",jl,[El,c("button",{class:"button modal-default-button",onClick:S[3]||(S[3]=V=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var fr=K(Fl,[["__scopeId","data-v-a8b59e3e"]]);const he=e=>(Pe("data-v-3b279211"),e=e(),Ie(),e),Vl=["src","alt"],Bl={key:1,class:"title"},Dl=he(()=>c("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),Al={class:"discord"},Ll={class:"discord-links"},ql={key:0},Rl=["href"],kl=he(()=>c("li",null,[c("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Ul=he(()=>c("li",null,[c("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),zl={href:"https://forums.moddingtree.com/",target:"_blank"},Gl=he(()=>c("span",{class:"material-icons"},"forum",-1)),Wl=he(()=>c("span",{class:"material-icons"},"info",-1)),Hl=he(()=>c("span",{class:"material-icons"},"library_books",-1)),Zl=he(()=>c("span",{class:"material-icons"},"group",-1)),Yl=he(()=>c("span",{class:"material-icons"},"settings",-1)),Kl=he(()=>c("span",{class:"material-icons"},"library_books",-1)),Xl=he(()=>c("span",{class:"material-icons"},"group",-1)),Jl=he(()=>c("span",{class:"material-icons"},"settings",-1)),Ql=he(()=>c("span",{class:"material-icons"},"info",-1)),eu={href:"https://forums.moddingtree.com/",target:"_blank"},tu=he(()=>c("span",{class:"material-icons"},"forum",-1)),nu={class:"discord"},ru={class:"discord-links"},su={key:0},iu=["href"],au=he(()=>c("li",null,[c("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),ou=he(()=>c("li",null,[c("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),lu=G({__name:"Nav",setup(e){const t=C(null),n=C(null),r=C(null),s=C(null),a=C(null);J.on("openMultiplayer",()=>{var v;return(v=a.value)==null?void 0:v.open()});const{useHeader:o,banner:l,title:d,discordName:p,discordLink:_,versionNumber:b}=W;function h(){window.open(_,"mywindow")}return(v,g)=>(m(),$(Y,null,[i(o)?(m(),$("div",et({key:0,class:"nav"},v.$attrs),[i(l)?(m(),$("img",{key:0,src:i(l),class:"banner",alt:i(d)},null,8,Vl)):(m(),$("div",Bl,A(i(d)),1)),c("div",{onClick:g[0]||(g[0]=T=>{var M;return(M=s.value)==null?void 0:M.open()}),class:"version-container"},[N(Q,{display:"Changelog",direction:i(re).Down,class:"version"},{default:E(()=>[c("span",null,"v"+A(i(b)),1)]),_:1},8,["direction"])]),Dl,c("div",Al,[c("span",{onClick:h,class:"material-icons"},"discord"),c("ul",Ll,[i(_)?(m(),$("li",ql,[c("a",{href:i(_),target:"_blank"},A(i(p)),9,Rl)])):F("",!0),kl,Ul])]),c("div",null,[c("a",zl,[N(Q,{display:"Forums",direction:i(re).Down,yoffset:"5px"},{default:E(()=>[Gl]),_:1},8,["direction"])])]),c("div",{onClick:g[1]||(g[1]=T=>{var M;return(M=t.value)==null?void 0:M.open()})},[N(Q,{display:"Info",direction:i(re).Down,class:"info"},{default:E(()=>[Wl]),_:1},8,["direction"])]),c("div",{onClick:g[2]||(g[2]=T=>{var M;return(M=n.value)==null?void 0:M.open()})},[N(Q,{display:"Saves",direction:i(re).Down,xoffset:"-20px"},{default:E(()=>[Hl]),_:1},8,["direction"])]),c("div",{onClick:g[3]||(g[3]=T=>{var M;return(M=a.value)==null?void 0:M.open()})},[N(Q,{display:"Multiplayer",direction:i(re).Down,xoffset:"-20px"},{default:E(()=>[Zl]),_:1},8,["direction"])]),c("div",{onClick:g[4]||(g[4]=T=>{var M;return(M=r.value)==null?void 0:M.open()})},[N(Q,{display:"Options",direction:i(re).Down,xoffset:"-66px"},{default:E(()=>[Yl]),_:1},8,["direction"])])],16)):(m(),$("div",et({key:1,class:"overlay-nav"},v.$attrs),[c("div",{onClick:g[5]||(g[5]=T=>{var M;return(M=s.value)==null?void 0:M.open()}),class:"version-container"},[N(Q,{display:"Changelog",direction:i(re).Right,xoffset:"25%",class:"version"},{default:E(()=>[c("span",null,"v"+A(i(b)),1)]),_:1},8,["direction"])]),c("div",{onClick:g[6]||(g[6]=T=>{var M;return(M=n.value)==null?void 0:M.open()})},[N(Q,{display:"Saves",direction:i(re).Right},{default:E(()=>[Kl]),_:1},8,["direction"])]),c("div",{onClick:g[7]||(g[7]=T=>{var M;return(M=a.value)==null?void 0:M.open()})},[N(Q,{display:"Multiplayer",direction:i(re).Right},{default:E(()=>[Xl]),_:1},8,["direction"])]),c("div",{onClick:g[8]||(g[8]=T=>{var M;return(M=r.value)==null?void 0:M.open()})},[N(Q,{display:"Options",direction:i(re).Right},{default:E(()=>[Jl]),_:1},8,["direction"])]),c("div",{onClick:g[9]||(g[9]=T=>{var M;return(M=t.value)==null?void 0:M.open()})},[N(Q,{display:"Info",direction:i(re).Right},{default:E(()=>[Ql]),_:1},8,["direction"])]),c("div",null,[c("a",eu,[N(Q,{display:"Forums",direction:i(re).Right,xoffset:"7px"},{default:E(()=>[tu]),_:1},8,["direction"])])]),c("div",nu,[c("span",{onClick:h,class:"material-icons"},"discord"),c("ul",ru,[i(_)?(m(),$("li",su,[c("a",{href:i(_),target:"_blank"},A(i(p)),9,iu)])):F("",!0),au,ou])])],16)),N(Wo,{ref_key:"info",ref:t,changelog:s.value},null,8,["changelog"]),N(fr,{ref_key:"savesManager",ref:n},null,512),N(Jo,{ref_key:"options",ref:r},null,512),N(Da,{ref_key:"changelog",ref:s},null,512),N(Io,{ref_key:"roomsDialog",ref:a},null,512)],64))}});var pr=K(lu,[["__scopeId","data-v-3b279211"]]);const uu={class:"inner-tab"},cu=G({__name:"Game",setup(e){const t=We(O,"tabs"),n=I(()=>Object.keys(ye)),r=W.useHeader;function s(a){const{display:o,minimized:l,minWidth:d,name:p,color:_,minimizable:b,nodes:h}=a;return{display:o,minimized:l,minWidth:d,name:p,color:_,minimizable:b,nodes:h}}return(a,o)=>(m(),$("div",{class:oe(["tabs-container",{useHeader:i(r)}])},[(m(!0),$(Y,null,ze(i(t),(l,d)=>{var p,_;return m(),$("div",{key:d,class:oe(["tab",i((p=i(ye)[l])==null?void 0:p.classes)]),ref_for:!0,ref:`tab-${d}`,style:ve(i((_=i(ye)[l])==null?void 0:_.style))},[d===0&&!i(r)?(m(),U(pr,{key:0})):F("",!0),c("div",uu,[i(n).includes(l)?(m(),U(Ea,et({key:0},s(i(ye)[l]),{index:d,tab:()=>{var b;return(b=a.$refs[`tab-${d}`])==null?void 0:b[0]}}),null,16,["index","tab"])):(m(),U(Ne(l),{key:1,index:d},null,8,["index"]))])],6)}),128))],2))}});var du=K(cu,[["__scopeId","data-v-4cb9ce0f"]]);const xt=e=>(Pe("data-v-4a50ce42"),e=e(),Ie(),e),fu={class:"game-over-modal-header"},pu=["src","alt"],mu={class:"game-over-modal-title"},hu=xt(()=>c("h2",null,"Congratulations!",-1)),gu={key:0},yu=xt(()=>c("br",null,null,-1)),vu=xt(()=>c("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),_u=xt(()=>c("br",null,null,-1)),bu=["href"],Nu=xt(()=>c("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),wu=G({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:r,discordLink:s,versionNumber:a,versionTitle:o}=W,l=I(()=>sn(O.timePlayed)),d=I(()=>tr.value&&!O.keepGoing),p=We(O,"autosave");function _(){O.keepGoing=!0}function b(){Qe(pt())}return(h,v)=>(m(),U(He,{"model-value":i(d)},{header:E(()=>[c("div",fu,[i(n)?(m(),$("img",{key:0,class:"game-over-modal-logo",src:i(n),alt:i(t)},null,8,pu)):F("",!0),c("div",mu,[hu,c("h4",null,"You've beaten "+A(i(t))+" v"+A(i(a))+": "+A(i(o)),1)])])]),body:E(({shown:g})=>[g?(m(),$("div",gu,[c("div",null,"It took you "+A(i(l))+" to beat the game.",1),yu,vu,_u,c("div",null,[c("a",{href:i(s),class:"game-over-modal-discord-link"},[Nu,z(" "+A(i(r)),1)],8,bu)]),N(Ve,{title:"Autosave",modelValue:i(p),"onUpdate:modelValue":v[0]||(v[0]=T=>ce(p)?p.value=T:null)},null,8,["modelValue"])])):F("",!0)]),footer:E(()=>[c("div",{class:"game-over-footer"},[c("button",{onClick:_,class:"button"},"Keep Going"),c("button",{onClick:b,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var $u=K(wu,[["__scopeId","data-v-4a50ce42"]]);const Wt=e=>(Pe("data-v-3de07c06"),e=e(),Ie(),e),Su=Wt(()=>c("div",{class:"nan-modal-header"},[c("h2",null,"NaN value detected!")],-1)),Tu={key:0},Mu=Wt(()=>c("br",null,null,-1)),Cu=["href"],xu=Wt(()=>c("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Pu=Wt(()=>c("br",null,null,-1)),Iu={class:"nan-footer"},Ou=G({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=W,r=We(O,"autosave"),s=We(X,"hasNaN"),a=C(null),o=I(()=>{var v;return(v=X.NaNPath)==null?void 0:v.join(".")}),l=I(()=>{var v;return(v=X.NaNPath)==null?void 0:v.slice(-1)[0]}),d=I(()=>X.NaNReceiver&&l.value?X.NaNReceiver[l.value]:null),p=I({get(){return O.devSpeed===0},set(v){O.devSpeed=v?null:0}});function _(){X.NaNReceiver&&l.value&&(X.NaNReceiver[l.value]=new x(0),X.hasNaN=!1)}function b(){X.NaNReceiver&&l.value&&(X.NaNReceiver[l.value]=new x(1),X.hasNaN=!1)}function h(){X.NaNReceiver&&l.value&&(X.NaNReceiver[l.value]=new x(NaN),X.hasNaN=!1)}return(v,g)=>(m(),$(Y,null,[N(He,et({modelValue:i(s),"onUpdate:modelValue":g[4]||(g[4]=T=>ce(s)?s.value=T:null)},v.$attrs),{header:E(()=>[Su]),body:E(()=>[c("div",null,[z(' Attempted to assign "'+A(i(o))+'" to NaN',1),i(d)?(m(),$("span",Tu,A(" ")+"(previously "+A(i(An)(i(d)))+")",1)):F("",!0),z(". Auto-saving has been "+A(i(r)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),Mu,c("div",null,[c("a",{href:i(n),class:"nan-modal-discord-link"},[xu,z(" "+A(i(t)),1)],8,Cu)]),Pu,N(Ve,{title:"Autosave",modelValue:i(r),"onUpdate:modelValue":g[0]||(g[0]=T=>ce(r)?r.value=T:null)},null,8,["modelValue"]),i(W).enablePausing?(m(),U(Ve,{key:0,title:"Pause game",modelValue:i(p),"onUpdate:modelValue":g[1]||(g[1]=T=>ce(p)?p.value=T:null)},null,8,["modelValue"])):F("",!0)]),footer:E(()=>[c("div",Iu,[c("button",{onClick:g[2]||(g[2]=T=>{var M;return(M=a.value)==null?void 0:M.open()}),class:"button"},"Open Saves Manager"),c("button",{onClick:_,class:"button"},"Set to 0"),c("button",{onClick:b,class:"button"},"Set to 1"),i(d)&&i(x).neq(i(d),0)&&i(x).neq(i(d),1)?(m(),$("button",{key:0,onClick:g[3]||(g[3]=T=>s.value=!1),class:"button"}," Set to previous ")):F("",!0),c("button",{onClick:h,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),N(fr,{ref_key:"savesManager",ref:a},null,512)],64))}});var ju=K(Ou,[["__scopeId","data-v-3de07c06"]]);const Eu={key:0,class:"tpsDisplay"},Fu={key:0,class:"low"},Vu=G({__name:"TPS",setup(e){const t=I(()=>x.div(X.lastTenTicks.length,X.lastTenTicks.reduce((a,o)=>a+o,0))),n=C([]);Rt(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const r=I(()=>n.value.reduce((a,o)=>x.max(a,o),0)),s=I(()=>x.sub(t.value,r.value).gt(1));return(a,o)=>i(t).isNan()?F("",!0):(m(),$("div",Eu,[z(" TPS: "+A(i(Kt)(i(t)))+" ",1),N(lt,{name:"fade"},{default:E(()=>[i(s)?(m(),$("span",Fu,A(i(Kt)(i(r))),1)):F("",!0)]),_:1})]))}});var Bu=K(Vu,[["__scopeId","data-v-46a3ed5b"]]);var Du=G({__name:"App",setup(e){const t=W.useHeader,n=I(()=>Ue[Z.theme].variables),r=We(Z,"showTPS"),s=I(()=>Ee(pe(()=>N(Y,null,[xa.map(Ct)]))));return(a,o)=>(m(),$(Y,null,[c("div",{id:"modal-root",style:ve(i(n))},null,4),c("div",{class:oe(["app",{useHeader:i(t)}]),style:ve(i(n))},[i(t)?(m(),U(pr,{key:0})):F("",!0),N(du),i(i(r))?(m(),U(Bu,{key:1})):F("",!0),N($u),N(ju),(m(),U(Ne(i(s))))],6)],64))}});var Au=K(Du,[["__scopeId","data-v-7c41425b"]]);function Lu(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisterError:a}=e;let o,l;const d=async(p=!0)=>{p&&(o==null||o.addEventListener("controlling",_=>{_.isUpdate&&window.location.reload()})),l&&l.waiting&&await jr(l.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){o=new Or("./sw.js",{scope:"./",type:"classic"}),o.addEventListener("activated",p=>{p.isUpdate||r==null||r()});{const p=()=>{n==null||n()};o.addEventListener("waiting",p),o.addEventListener("externalwaiting",p)}o.register({immediate:t}).then(p=>{l=p,s==null||s(p)}).catch(p=>{a==null||a(p)})}return d}function qu(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisterError:a}=e,o=C(!1),l=C(!1);return{updateServiceWorker:Lu({immediate:t,onNeedRefresh(){o.value=!0,n==null||n()},onOfflineReady(){l.value=!0,r==null||r()},onRegistered:s,onRegisterError:a}),offlineReady:l,needRefresh:o}}document.title=W.title;window.projInfo=W;if(W.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await ir();const{globalBus:e,startGameLoop:t}=await Et(()=>Promise.resolve().then(function(){return Is}),void 0),n=window.vue=vr(Au);e.emit("setupVue",n),n.mount("#app"),De(()=>{const r=On(),{updateServiceWorker:s}=qu({onNeedRefresh(){r.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){s()}})},onOfflineReady(){r.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(a){a&&setInterval(a.update,60*60*1e3)}})}),t()});
