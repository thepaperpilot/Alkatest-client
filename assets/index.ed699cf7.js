/* empty css                    */import"./vue.d05e9977.js";import{Z as V,u as yt,q as je,C as r,b1 as Q,aa as R,z as Me,w as Ge,ay as bt,aE as f,a0 as b,a1 as u,_ as D,aN as ie,$ as P,l as Z,b8 as ot,br as kn,G as J,bu as Ze,t as C,a8 as v,a7 as E,O as G,b2 as lt,ar as _e,aK as $e,aG as Qe,A as oe,b6 as I,bs as Bt,aq as Ae,bb as ut,T as $n,j as Sn,bv as Pt,aL as gt,J as F,I as te,aH as de,aF as me,bn as Mn,aJ as Ue,be as Cn}from"./@vue.8948d9b0.js";import{i as Tn}from"./is-plain-object.906d88e8.js";import{c as At}from"./nanoevents.1080beb7.js";import{L as ke}from"./lz-string.f2f3b7cf.js";import{p as In}from"./vue-textarea-autosize.35804eaf.js";import{l as Pn}from"./socket.io-client.03bb8f3a.js";import{n as xn,l as Fn,t as On,r as Vn}from"./unique-names-generator.9178d3e3.js";import{u as Ut,s as En}from"./vue-toastification.c733544e.js";import{s as Dn}from"./semver.334eb41f.js";import{Y as Ln}from"./vue-next-select.4d64b28b.js";import{D as Rn}from"./vuedraggable.8c50e176.js";import{v as qn,n as Bn}from"./workbox-window.8d14e8b7.js";import"./lru-cache.9506e0ec.js";import"./yallist.fd762fe7.js";import"./engine.io-client.6ba5801d.js";import"./engine.io-parser.730afdce.js";import"./@socket.io.aec831e2.js";import"./socket.io-parser.0ab387d5.js";import"./sortablejs.d3dca1aa.js";const An=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}};An();const Un="modulepreload",xt={},jn="./",tt=function(t,n){return!n||n.length===0?t():Promise.all(n.map(s=>{if(s=`${jn}${s}`,s in xt)return;xt[s]=!0;const i=s.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${a}`))return;const l=document.createElement("link");if(l.rel=i?"stylesheet":Un,i||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),i)return new Promise((o,d)=>{l.addEventListener("load",o),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t())},Gn="Chromatic Latice",zn="A multiplayer game about light and hexagons",Hn="chromatic",Wn="thepaperpilot",Kn="",Yn="",Zn="0.0.0",Jn="Initial Commit",Xn=!1,Qn=!1,es=2,ts=!0,ns=null,ss="",is=["main"],as=3600,rs=1,os=!0,ls="base64";var L={title:Gn,description:zn,id:Hn,author:Wn,discordName:Kn,discordLink:Yn,versionNumber:Zn,versionTitle:Jn,allowGoBack:Xn,defaultShowSmall:Qn,defaultDecimalsShown:es,useHeader:ts,banner:ns,logo:ss,initialTabs:is,maxTickLength:as,offlineLimit:rs,enablePausing:os,exportEncoding:ls};const ft=17,us=9e15,cs=Math.log10(9e15),ds=1/9e15,ms=308,fs=-324,Ft=5,hs=function(){const e=[];for(let n=fs+1;n<=ms;n++)e.push(Number("1e"+n));const t=323;return function(n){return e[n+t]}}(),Te=[2,Math.E,3,4,5,6,7,8,9,10],gs=[[1,1.0891168053867777,1.1789745164521264,1.2701428397304229,1.3632066654400328,1.4587804913784246,1.557523817412741,1.660158301473385,1.767487542936873,1.8804205225512542,2],[1,1.1121114330934,1.23103892493161,1.35838369631113,1.49605193039935,1.64635423375119,1.81213853570186,1.99697132461829,2.20538955455724,2.44325744833852,Math.E],[1,1.1187738849693603,1.2464963939368214,1.38527004705667,1.5376664685821402,1.7068895236551784,1.897001227148399,2.1132403089001035,2.362480153784171,2.6539010333870774,3],[1,1.1367350847096405,1.2889510672956703,1.4606478703324786,1.6570295196661111,1.8850062585672889,2.1539465047453485,2.476829779693097,2.872061932789197,3.3664204535587183,4],[1,1.1494592900767588,1.319708228183931,1.5166291280087583,1.748171114438024,2.0253263297298045,2.3636668498288547,2.7858359149579424,3.3257226212448145,4.035730287722532,5],[1,1.159225940787673,1.343712473580932,1.5611293155111927,1.8221199554561318,2.14183924486326,2.542468319282638,3.0574682501653316,3.7390572020926873,4.6719550537360774,6],[1,1.1670905356972596,1.3632807444991446,1.5979222279405536,1.8842640123816674,2.2416069644878687,2.69893426559423,3.3012632110403577,4.121250340630164,5.281493033448316,7],[1,1.1736630594087796,1.379783782386201,1.6292821855668218,1.9378971836180754,2.3289975651071977,2.8384347394720835,3.5232708454565906,4.478242031114584,5.868592169644505,8],[1,1.1793017514670474,1.394054150657457,1.65664127441059,1.985170999970283,2.4069682290577457,2.9647310119960752,3.7278665320924946,4.814462547283592,6.436522247411611,9],[1,1.18422737399915,1.4066113788546144,1.680911177655277,2.027492094355525,2.4775152854601967,3.080455730250329,3.918234505962507,5.1332705696484595,6.9878696918072905,10]],ps=[[-1,-.9194161097107025,-.8335625019330468,-.7425599821143978,-.6466611521029437,-.5462617907227869,-.4419033816638769,-.3342645487554494,-.224140440909962,-.11241087890006762,0],[-1,-.90603157029014,-.80786507256596,-.7064666939634,-.60294836853664,-.49849837513117,-.39430303318768,-.29147201034755,-.19097820800866,-.09361896280296,0],[-1,-.9021579584316141,-.8005762598234203,-.6964780623319391,-.5911906810998454,-.486050182576545,-.3823089430815083,-.28106046722897615,-.1831906535795894,-.08935809204418144,0],[-1,-.8917227442365535,-.781258746326964,-.6705130326902455,-.5612813129406509,-.4551067709033134,-.35319256652135966,-.2563741554088552,-.1651412821106526,-.0796919581982668,0],[-1,-.8843387974366064,-.7678744063886243,-.6529563724510552,-.5415870994657841,-.4352842206588936,-.33504449124791424,-.24138853420685147,-.15445285440944467,-.07409659641336663,0],[-1,-.8786709358426346,-.7577735191184886,-.6399546189952064,-.527284921869926,-.4211627631006314,-.3223479611761232,-.23107655627789858,-.1472057700818259,-.07035171210706326,0],[-1,-.8740862815291583,-.7497032990976209,-.6297119746181752,-.5161838335958787,-.41036238255751956,-.31277212146489963,-.2233976621705518,-.1418697367979619,-.06762117662323441,0],[-1,-.8702632331800649,-.7430366914122081,-.6213373075161548,-.5072025698095242,-.40171437727184167,-.30517930701410456,-.21736343968190863,-.137710238299109,-.06550774483471955,0],[-1,-.8670016295947213,-.7373984232432306,-.6143173985094293,-.49973884395492807,-.394584953527678,-.2989649949848695,-.21245647317021688,-.13434688362382652,-.0638072667348083,0],[-1,-.8641642839543857,-.732534623168535,-.6083127477059322,-.4934049257184696,-.3885773075899922,-.29376029055315767,-.2083678561173622,-.13155653399373268,-.062401588652553186,0]],c=function(t){return $.fromValue_noAlloc(t)},x=function(e,t,n){return $.fromComponents(e,t,n)},O=function(t,n,s){return $.fromComponents_noNormalize(t,n,s)},Ne=function(t,n){const s=n+1,i=Math.ceil(Math.log10(Math.abs(t))),a=Math.round(t*Math.pow(10,s-i))*Math.pow(10,i-s);return parseFloat(a.toFixed(Math.max(s-i,0)))},ht=function(e){return Math.sign(e)*Math.log10(Math.abs(e))},vs=function(e){if(!isFinite(e))return e;if(e<-50)return e===Math.trunc(e)?Number.NEGATIVE_INFINITY:0;let t=1;for(;e<10;)t=t*e,++e;e-=1;let n=.9189385332046727;n=n+(e+.5)*Math.log(e),n=n-e;const s=e*e;let i=e;return n=n+1/(12*i),i=i*s,n=n+1/(360*i),i=i*s,n=n+1/(1260*i),i=i*s,n=n+1/(1680*i),i=i*s,n=n+1/(1188*i),i=i*s,n=n+691/(360360*i),i=i*s,n=n+7/(1092*i),i=i*s,n=n+3617/(122400*i),Math.exp(n)/t},jt=.5671432904097838,Ot=function(e,t=1e-10){let n,s;if(!Number.isFinite(e)||e===0)return e;if(e===1)return jt;e<10?n=0:n=Math.log(e)-Math.log(Math.log(e));for(let i=0;i<100;++i){if(s=(e*Math.exp(-n)+n*n)/(n+1),Math.abs(s-n)<t*Math.abs(s))return s;n=s}throw Error(`Iteration failed to converge: ${e.toString()}`)};function Vt(e,t=1e-10){let n,s,i,a;if(!Number.isFinite(e.mag)||e===$.dZero)return e;if(e===$.dOne)return c(jt);$.abs(e),n=$.ln(e);for(let l=0;l<100;++l){if(s=$.exp(-n),i=n.sub(e.mul(s)),a=n.sub(i.div(n.add(1).sub(n.add(2).mul(i).div($.mul(2,n).add(2))))),$.abs(a.sub(n)).lt($.abs(a).mul(t)))return a;n=a}throw Error(`Iteration failed to converge: ${e.toString()}`)}const g=class{constructor(e){this.sign=Number.NaN,this.mag=Number.NaN,this.layer=Number.NaN,e instanceof g||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0)}get m(){if(this.sign===0)return 0;if(this.layer===0){const e=Math.floor(Math.log10(this.mag));let t;return this.mag===5e-324?t=5:t=this.mag/hs(e),this.sign*t}else if(this.layer===1){const e=this.mag-Math.floor(this.mag);return this.sign*Math.pow(10,e)}else return this.sign}set m(e){this.layer<=2?this.fromMantissaExponent(e,this.e):(this.sign=Math.sign(e),this.sign===0&&(this.layer,this.exponent))}get e(){return this.sign===0?0:this.layer===0?Math.floor(Math.log10(this.mag)):this.layer===1?Math.floor(this.mag):this.layer===2?Math.floor(Math.sign(this.mag)*Math.pow(10,Math.abs(this.mag))):this.mag*Number.POSITIVE_INFINITY}set e(e){this.fromMantissaExponent(this.m,e)}get s(){return this.sign}set s(e){e===0?(this.sign=0,this.layer=0,this.mag=0):this.sign=e}get mantissa(){return this.m}set mantissa(e){this.m=e}get exponent(){return this.e}set exponent(e){this.e=e}static fromComponents(e,t,n){return new g().fromComponents(e,t,n)}static fromComponents_noNormalize(e,t,n){return new g().fromComponents_noNormalize(e,t,n)}static fromMantissaExponent(e,t){return new g().fromMantissaExponent(e,t)}static fromMantissaExponent_noNormalize(e,t){return new g().fromMantissaExponent_noNormalize(e,t)}static fromDecimal(e){return new g().fromDecimal(e)}static fromNumber(e){return new g().fromNumber(e)}static fromString(e){return new g().fromString(e)}static fromValue(e){return new g().fromValue(e)}static fromValue_noAlloc(e){return e instanceof g?e:new g(e)}static abs(e){return c(e).abs()}static neg(e){return c(e).neg()}static negate(e){return c(e).neg()}static negated(e){return c(e).neg()}static sign(e){return c(e).sign}static sgn(e){return c(e).sign}static round(e){return c(e).round()}static floor(e){return c(e).floor()}static ceil(e){return c(e).ceil()}static trunc(e){return c(e).trunc()}static add(e,t){return c(e).add(t)}static plus(e,t){return c(e).add(t)}static sub(e,t){return c(e).sub(t)}static subtract(e,t){return c(e).sub(t)}static minus(e,t){return c(e).sub(t)}static mul(e,t){return c(e).mul(t)}static multiply(e,t){return c(e).mul(t)}static times(e,t){return c(e).mul(t)}static div(e,t){return c(e).div(t)}static divide(e,t){return c(e).div(t)}static recip(e){return c(e).recip()}static reciprocal(e){return c(e).recip()}static reciprocate(e){return c(e).reciprocate()}static cmp(e,t){return c(e).cmp(t)}static cmpabs(e,t){return c(e).cmpabs(t)}static compare(e,t){return c(e).cmp(t)}static isNaN(e){return e=c(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag)}static isFinite(e){return e=c(e),isFinite(e.sign)&&isFinite(e.layer)&&isFinite(e.mag)}static eq(e,t){return c(e).eq(t)}static equals(e,t){return c(e).eq(t)}static neq(e,t){return c(e).neq(t)}static notEquals(e,t){return c(e).notEquals(t)}static lt(e,t){return c(e).lt(t)}static lte(e,t){return c(e).lte(t)}static gt(e,t){return c(e).gt(t)}static gte(e,t){return c(e).gte(t)}static max(e,t){return c(e).max(t)}static min(e,t){return c(e).min(t)}static minabs(e,t){return c(e).minabs(t)}static maxabs(e,t){return c(e).maxabs(t)}static clamp(e,t,n){return c(e).clamp(t,n)}static clampMin(e,t){return c(e).clampMin(t)}static clampMax(e,t){return c(e).clampMax(t)}static cmp_tolerance(e,t,n){return c(e).cmp_tolerance(t,n)}static compare_tolerance(e,t,n){return c(e).cmp_tolerance(t,n)}static eq_tolerance(e,t,n){return c(e).eq_tolerance(t,n)}static equals_tolerance(e,t,n){return c(e).eq_tolerance(t,n)}static neq_tolerance(e,t,n){return c(e).neq_tolerance(t,n)}static notEquals_tolerance(e,t,n){return c(e).notEquals_tolerance(t,n)}static lt_tolerance(e,t,n){return c(e).lt_tolerance(t,n)}static lte_tolerance(e,t,n){return c(e).lte_tolerance(t,n)}static gt_tolerance(e,t,n){return c(e).gt_tolerance(t,n)}static gte_tolerance(e,t,n){return c(e).gte_tolerance(t,n)}static pLog10(e){return c(e).pLog10()}static absLog10(e){return c(e).absLog10()}static log10(e){return c(e).log10()}static log(e,t){return c(e).log(t)}static log2(e){return c(e).log2()}static ln(e){return c(e).ln()}static logarithm(e,t){return c(e).logarithm(t)}static pow(e,t){return c(e).pow(t)}static pow10(e){return c(e).pow10()}static root(e,t){return c(e).root(t)}static factorial(e,t){return c(e).factorial()}static gamma(e,t){return c(e).gamma()}static lngamma(e,t){return c(e).lngamma()}static exp(e){return c(e).exp()}static sqr(e){return c(e).sqr()}static sqrt(e){return c(e).sqrt()}static cube(e){return c(e).cube()}static cbrt(e){return c(e).cbrt()}static tetrate(e,t=2,n=O(1,0,1)){return c(e).tetrate(t,n)}static iteratedexp(e,t=2,n=O(1,0,1)){return c(e).iteratedexp(t,n)}static iteratedlog(e,t=10,n=1){return c(e).iteratedlog(t,n)}static layeradd10(e,t){return c(e).layeradd10(t)}static layeradd(e,t,n=10){return c(e).layeradd(t,n)}static slog(e,t=10){return c(e).slog(t)}static lambertw(e){return c(e).lambertw()}static ssqrt(e){return c(e).ssqrt()}static pentate(e,t=2,n=O(1,0,1)){return c(e).pentate(t,n)}static affordGeometricSeries(e,t,n,s){return this.affordGeometricSeries_core(c(e),c(t),c(n),s)}static sumGeometricSeries(e,t,n,s){return this.sumGeometricSeries_core(e,c(t),c(n),s)}static affordArithmeticSeries(e,t,n,s){return this.affordArithmeticSeries_core(c(e),c(t),c(n),c(s))}static sumArithmeticSeries(e,t,n,s){return this.sumArithmeticSeries_core(c(e),c(t),c(n),c(s))}static efficiencyOfPurchase(e,t,n){return this.efficiencyOfPurchase_core(c(e),c(t),c(n))}static randomDecimalForTesting(e){if(Math.random()*20<1)return O(0,0,0);const t=Math.random()>.5?1:-1;if(Math.random()*20<1)return O(t,0,1);const n=Math.floor(Math.random()*(e+1));let s=n===0?Math.random()*616-308:Math.random()*16;Math.random()>.9&&(s=Math.trunc(s));let i=Math.pow(10,s);return Math.random()>.9&&(i=Math.trunc(i)),x(t,n,i)}static affordGeometricSeries_core(e,t,n,s){const i=t.mul(n.pow(s));return g.floor(e.div(i).mul(n.sub(1)).add(1).log10().div(n.log10()))}static sumGeometricSeries_core(e,t,n,s){return t.mul(n.pow(s)).mul(g.sub(1,n.pow(e))).div(g.sub(1,n))}static affordArithmeticSeries_core(e,t,n,s){const a=t.add(s.mul(n)).sub(n.div(2)),l=a.pow(2);return a.neg().add(l.add(n.mul(e).mul(2)).sqrt()).div(n).floor()}static sumArithmeticSeries_core(e,t,n,s){const i=t.add(s.mul(n));return e.div(2).mul(i.mul(2).plus(e.sub(1).mul(n)))}static efficiencyOfPurchase_core(e,t,n){return e.div(t).add(e.div(n))}normalize(){if(this.sign===0||this.mag===0&&this.layer===0)return this.sign=0,this.mag=0,this.layer=0,this;if(this.layer===0&&this.mag<0&&(this.mag=-this.mag,this.sign=-this.sign),this.layer===0&&this.mag<ds)return this.layer+=1,this.mag=Math.log10(this.mag),this;let e=Math.abs(this.mag),t=Math.sign(this.mag);if(e>=us)return this.layer+=1,this.mag=t*Math.log10(e),this;for(;e<cs&&this.layer>0;)this.layer-=1,this.layer===0?this.mag=Math.pow(10,this.mag):(this.mag=t*Math.pow(10,e),e=Math.abs(this.mag),t=Math.sign(this.mag));return this.layer===0&&(this.mag<0?(this.mag=-this.mag,this.sign=-this.sign):this.mag===0&&(this.sign=0)),this}fromComponents(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this.normalize(),this}fromComponents_noNormalize(e,t,n){return this.sign=e,this.layer=t,this.mag=n,this}fromMantissaExponent(e,t){return this.layer=1,this.sign=Math.sign(e),e=Math.abs(e),this.mag=t+Math.log10(e),this.normalize(),this}fromMantissaExponent_noNormalize(e,t){return this.fromMantissaExponent(e,t),this}fromDecimal(e){return this.sign=e.sign,this.layer=e.layer,this.mag=e.mag,this}fromNumber(e){return this.mag=Math.abs(e),this.sign=Math.sign(e),this.layer=0,this.normalize(),this}fromString(e){e=e.replace(",","");const t=e.split("^^^");if(t.length===2){const h=parseFloat(t[0]),N=parseFloat(t[1]),p=t[1].split(";");let w=1;if(p.length===2&&(w=parseFloat(p[1]),isFinite(w)||(w=1)),isFinite(h)&&isFinite(N)){const k=g.pentate(h,N,w);return this.sign=k.sign,this.layer=k.layer,this.mag=k.mag,this}}const n=e.split("^^");if(n.length===2){const h=parseFloat(n[0]),N=parseFloat(n[1]),p=n[1].split(";");let w=1;if(p.length===2&&(w=parseFloat(p[1]),isFinite(w)||(w=1)),isFinite(h)&&isFinite(N)){const k=g.tetrate(h,N,w);return this.sign=k.sign,this.layer=k.layer,this.mag=k.mag,this}}const s=e.split("^");if(s.length===2){const h=parseFloat(s[0]),N=parseFloat(s[1]);if(isFinite(h)&&isFinite(N)){const p=g.pow(h,N);return this.sign=p.sign,this.layer=p.layer,this.mag=p.mag,this}}e=e.trim().toLowerCase();let i,a,l=e.split("pt");if(l.length===2){i=10,a=parseFloat(l[0]),l[1]=l[1].replace("(",""),l[1]=l[1].replace(")","");let h=parseFloat(l[1]);if(isFinite(h)||(h=1),isFinite(i)&&isFinite(a)){const N=g.tetrate(i,a,h);return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,this}}if(l=e.split("p"),l.length===2){i=10,a=parseFloat(l[0]),l[1]=l[1].replace("(",""),l[1]=l[1].replace(")","");let h=parseFloat(l[1]);if(isFinite(h)||(h=1),isFinite(i)&&isFinite(a)){const N=g.tetrate(i,a,h);return this.sign=N.sign,this.layer=N.layer,this.mag=N.mag,this}}const o=e.split("e"),d=o.length-1;if(d===0){const h=parseFloat(e);if(isFinite(h))return this.fromNumber(h)}else if(d===1){const h=parseFloat(e);if(isFinite(h)&&h!==0)return this.fromNumber(h)}const m=e.split("e^");if(m.length===2){this.sign=1,m[0].charAt(0)=="-"&&(this.sign=-1);let h="";for(let N=0;N<m[1].length;++N){const p=m[1].charCodeAt(N);if(p>=43&&p<=57||p===101)h+=m[1].charAt(N);else return this.layer=parseFloat(h),this.mag=parseFloat(m[1].substr(N+1)),this.normalize(),this}}if(d<1)return this.sign=0,this.layer=0,this.mag=0,this;const _=parseFloat(o[0]);if(_===0)return this.sign=0,this.layer=0,this.mag=0,this;let y=parseFloat(o[o.length-1]);if(d>=2){const h=parseFloat(o[o.length-2]);isFinite(h)&&(y*=Math.sign(h),y+=ht(h))}if(!isFinite(_))this.sign=o[0]==="-"?-1:1,this.layer=d,this.mag=y;else if(d===1)this.sign=Math.sign(_),this.layer=1,this.mag=y+Math.log10(Math.abs(_));else if(this.sign=Math.sign(_),this.layer=d,d===2){const h=g.mul(x(1,2,y),c(_));return this.sign=h.sign,this.layer=h.layer,this.mag=h.mag,this}else this.mag=y;return this.normalize(),this}fromValue(e){return e instanceof g||e!=null&&typeof e=="object"&&"sign"in e&&"mag"in e&&"layer"in e?this.fromDecimal(e):typeof e=="number"?this.fromNumber(e):typeof e=="string"?this.fromString(e):(this.sign=0,this.layer=0,this.mag=0,this)}toNumber(){return Number.isFinite(this.layer)?this.layer===0?this.sign*this.mag:this.layer===1?this.sign*Math.pow(10,this.mag):this.mag>0?this.sign>0?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:0:Number.NaN}mantissaWithDecimalPlaces(e){return isNaN(this.m)?Number.NaN:this.m===0?0:Ne(this.m,e)}magnitudeWithDecimalPlaces(e){return isNaN(this.mag)?Number.NaN:this.mag===0?0:Ne(this.mag,e)}toString(){return isNaN(this.layer)||isNaN(this.sign)||isNaN(this.mag)?"NaN":this.mag===Number.POSITIVE_INFINITY||this.layer===Number.POSITIVE_INFINITY?this.sign===1?"Infinity":"-Infinity":this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toString():this.m+"e"+this.e:this.layer===1?this.m+"e"+this.e:this.layer<=Ft?(this.sign===-1?"-":"")+"e".repeat(this.layer)+this.mag:(this.sign===-1?"-":"")+"(e^"+this.layer+")"+this.mag}toExponential(e){return this.layer===0?(this.sign*this.mag).toExponential(e):this.toStringWithDecimalPlaces(e)}toFixed(e){return this.layer===0?(this.sign*this.mag).toFixed(e):this.toStringWithDecimalPlaces(e)}toPrecision(e){return this.e<=-7?this.toExponential(e-1):e>this.e?this.toFixed(e-this.exponent-1):this.toExponential(e-1)}valueOf(){return this.toString()}toJSON(){return this.toString()}toStringWithDecimalPlaces(e){return this.layer===0?this.mag<1e21&&this.mag>1e-7||this.mag===0?(this.sign*this.mag).toFixed(e):Ne(this.m,e)+"e"+Ne(this.e,e):this.layer===1?Ne(this.m,e)+"e"+Ne(this.e,e):this.layer<=Ft?(this.sign===-1?"-":"")+"e".repeat(this.layer)+Ne(this.mag,e):(this.sign===-1?"-":"")+"(e^"+this.layer+")"+Ne(this.mag,e)}abs(){return O(this.sign===0?0:1,this.layer,this.mag)}neg(){return O(-this.sign,this.layer,this.mag)}negate(){return this.neg()}negated(){return this.neg()}sgn(){return this.sign}round(){return this.mag<0?g.dZero:this.layer===0?x(this.sign,0,Math.round(this.mag)):this}floor(){return this.mag<0?g.dZero:this.layer===0?x(this.sign,0,Math.floor(this.mag)):this}ceil(){return this.mag<0?g.dZero:this.layer===0?x(this.sign,0,Math.ceil(this.mag)):this}trunc(){return this.mag<0?g.dZero:this.layer===0?x(this.sign,0,Math.trunc(this.mag)):this}add(e){const t=c(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer)||this.sign===0)return t;if(t.sign===0)return this;if(this.sign===-t.sign&&this.layer===t.layer&&this.mag===t.mag)return O(0,0,0);let n,s;if(this.layer>=2||t.layer>=2)return this.maxabs(t);if(g.cmpabs(this,t)>0?(n=this,s=t):(n=t,s=this),n.layer===0&&s.layer===0)return c(n.sign*n.mag+s.sign*s.mag);const i=n.layer*Math.sign(n.mag),a=s.layer*Math.sign(s.mag);if(i-a>=2)return n;if(i===0&&a===-1){if(Math.abs(s.mag-Math.log10(n.mag))>ft)return n;{const l=Math.pow(10,Math.log10(n.mag)-s.mag),o=s.sign+n.sign*l;return x(Math.sign(o),1,s.mag+Math.log10(Math.abs(o)))}}if(i===1&&a===0){if(Math.abs(n.mag-Math.log10(s.mag))>ft)return n;{const l=Math.pow(10,n.mag-Math.log10(s.mag)),o=s.sign+n.sign*l;return x(Math.sign(o),1,Math.log10(s.mag)+Math.log10(Math.abs(o)))}}if(Math.abs(n.mag-s.mag)>ft)return n;{const l=Math.pow(10,n.mag-s.mag),o=s.sign+n.sign*l;return x(Math.sign(o),1,s.mag+Math.log10(Math.abs(o)))}}plus(e){return this.add(e)}sub(e){return this.add(c(e).neg())}subtract(e){return this.sub(e)}minus(e){return this.sub(e)}mul(e){const t=c(e);if(!Number.isFinite(this.layer))return this;if(!Number.isFinite(t.layer))return t;if(this.sign===0||t.sign===0)return O(0,0,0);if(this.layer===t.layer&&this.mag===-t.mag)return O(this.sign*t.sign,0,1);let n,s;if(this.layer>t.layer||this.layer==t.layer&&Math.abs(this.mag)>Math.abs(t.mag)?(n=this,s=t):(n=t,s=this),n.layer===0&&s.layer===0)return c(n.sign*s.sign*n.mag*s.mag);if(n.layer>=3||n.layer-s.layer>=2)return x(n.sign*s.sign,n.layer,n.mag);if(n.layer===1&&s.layer===0)return x(n.sign*s.sign,1,n.mag+Math.log10(s.mag));if(n.layer===1&&s.layer===1)return x(n.sign*s.sign,1,n.mag+s.mag);if(n.layer===2&&s.layer===1){const i=x(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(x(Math.sign(s.mag),s.layer-1,Math.abs(s.mag)));return x(n.sign*s.sign,i.layer+1,i.sign*i.mag)}if(n.layer===2&&s.layer===2){const i=x(Math.sign(n.mag),n.layer-1,Math.abs(n.mag)).add(x(Math.sign(s.mag),s.layer-1,Math.abs(s.mag)));return x(n.sign*s.sign,i.layer+1,i.sign*i.mag)}throw Error("Bad arguments to mul: "+this+", "+e)}multiply(e){return this.mul(e)}times(e){return this.mul(e)}div(e){const t=c(e);return this.mul(t.recip())}divide(e){return this.div(e)}divideBy(e){return this.div(e)}dividedBy(e){return this.div(e)}recip(){return this.mag===0?g.dNaN:this.layer===0?x(this.sign,0,1/this.mag):x(this.sign,this.layer,-this.mag)}reciprocal(){return this.recip()}reciprocate(){return this.recip()}cmp(e){const t=c(e);return this.sign>t.sign?1:this.sign<t.sign?-1:this.sign*this.cmpabs(e)}cmpabs(e){const t=c(e),n=this.mag>0?this.layer:-this.layer,s=t.mag>0?t.layer:-t.layer;return n>s?1:n<s?-1:this.mag>t.mag?1:this.mag<t.mag?-1:0}compare(e){return this.cmp(e)}isNan(){return isNaN(this.sign)||isNaN(this.layer)||isNaN(this.mag)}isFinite(){return isFinite(this.sign)&&isFinite(this.layer)&&isFinite(this.mag)}eq(e){const t=c(e);return this.sign===t.sign&&this.layer===t.layer&&this.mag===t.mag}equals(e){return this.eq(e)}neq(e){return!this.eq(e)}notEquals(e){return this.neq(e)}lt(e){return this.cmp(e)===-1}lte(e){return!this.gt(e)}gt(e){return this.cmp(e)===1}gte(e){return!this.lt(e)}max(e){const t=c(e);return this.lt(t)?t:this}min(e){const t=c(e);return this.gt(t)?t:this}maxabs(e){const t=c(e);return this.cmpabs(t)<0?t:this}minabs(e){const t=c(e);return this.cmpabs(t)>0?t:this}clamp(e,t){return this.max(e).min(t)}clampMin(e){return this.max(e)}clampMax(e){return this.min(e)}cmp_tolerance(e,t){const n=c(e);return this.eq_tolerance(n,t)?0:this.cmp(n)}compare_tolerance(e,t){return this.cmp_tolerance(e,t)}eq_tolerance(e,t){const n=c(e);if(t==null&&(t=1e-7),this.sign!==n.sign||Math.abs(this.layer-n.layer)>1)return!1;let s=this.mag,i=n.mag;return this.layer>n.layer&&(i=ht(i)),this.layer<n.layer&&(s=ht(s)),Math.abs(s-i)<=t*Math.max(Math.abs(s),Math.abs(i))}equals_tolerance(e,t){return this.eq_tolerance(e,t)}neq_tolerance(e,t){return!this.eq_tolerance(e,t)}notEquals_tolerance(e,t){return this.neq_tolerance(e,t)}lt_tolerance(e,t){const n=c(e);return!this.eq_tolerance(n,t)&&this.lt(n)}lte_tolerance(e,t){const n=c(e);return this.eq_tolerance(n,t)||this.lt(n)}gt_tolerance(e,t){const n=c(e);return!this.eq_tolerance(n,t)&&this.gt(n)}gte_tolerance(e,t){const n=c(e);return this.eq_tolerance(n,t)||this.gt(n)}pLog10(){return this.lt(g.dZero)?g.dZero:this.log10()}absLog10(){return this.sign===0?g.dNaN:this.layer>0?x(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):x(1,0,Math.log10(this.mag))}log10(){return this.sign<=0?g.dNaN:this.layer>0?x(Math.sign(this.mag),this.layer-1,Math.abs(this.mag)):x(this.sign,0,Math.log10(this.mag))}log(e){return e=c(e),this.sign<=0||e.sign<=0||e.sign===1&&e.layer===0&&e.mag===1?g.dNaN:this.layer===0&&e.layer===0?x(this.sign,0,Math.log(this.mag)/Math.log(e.mag)):g.div(this.log10(),e.log10())}log2(){return this.sign<=0?g.dNaN:this.layer===0?x(this.sign,0,Math.log2(this.mag)):this.layer===1?x(Math.sign(this.mag),0,Math.abs(this.mag)*3.321928094887362):this.layer===2?x(Math.sign(this.mag),1,Math.abs(this.mag)+.5213902276543247):x(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}ln(){return this.sign<=0?g.dNaN:this.layer===0?x(this.sign,0,Math.log(this.mag)):this.layer===1?x(Math.sign(this.mag),0,Math.abs(this.mag)*2.302585092994046):this.layer===2?x(Math.sign(this.mag),1,Math.abs(this.mag)+.36221568869946325):x(Math.sign(this.mag),this.layer-1,Math.abs(this.mag))}logarithm(e){return this.log(e)}pow(e){const t=c(e),n=this,s=t;if(n.sign===0)return s.eq(0)?O(1,0,1):n;if(n.sign===1&&n.layer===0&&n.mag===1)return n;if(s.sign===0)return O(1,0,1);if(s.sign===1&&s.layer===0&&s.mag===1)return n;const i=n.absLog10().mul(s).pow10();return this.sign===-1?Math.abs(s.toNumber()%2)%2===1?i.neg():Math.abs(s.toNumber()%2)%2===0?i:g.dNaN:i}pow10(){if(!Number.isFinite(this.layer)||!Number.isFinite(this.mag))return g.dNaN;let e=this;if(e.layer===0){const t=Math.pow(10,e.sign*e.mag);if(Number.isFinite(t)&&Math.abs(t)>=.1)return x(1,0,t);if(e.sign===0)return g.dOne;e=O(e.sign,e.layer+1,Math.log10(e.mag))}return e.sign>0&&e.mag>=0?x(e.sign,e.layer+1,e.mag):e.sign<0&&e.mag>=0?x(-e.sign,e.layer+1,-e.mag):g.dOne}pow_base(e){return c(e).pow(this)}root(e){const t=c(e);return this.pow(t.recip())}factorial(){return this.mag<0?this.add(1).gamma():this.layer===0?this.add(1).gamma():this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}gamma(){if(this.mag<0)return this.recip();if(this.layer===0){if(this.lt(O(1,0,24)))return c(vs(this.sign*this.mag));const e=this.mag-1;let t=.9189385332046727;t=t+(e+.5)*Math.log(e),t=t-e;const n=e*e;let s=e,i=12*s,a=1/i,l=t+a;if(l===t||(t=l,s=s*n,i=360*s,a=1/i,l=t-a,l===t))return g.exp(t);t=l,s=s*n,i=1260*s;let o=1/i;return t=t+o,s=s*n,i=1680*s,o=1/i,t=t-o,g.exp(t)}else return this.layer===1?g.exp(g.mul(this,g.ln(this).sub(1))):g.exp(this)}lngamma(){return this.gamma().ln()}exp(){return this.mag<0?g.dOne:this.layer===0&&this.mag<=709.7?c(Math.exp(this.sign*this.mag)):this.layer===0?x(1,1,this.sign*Math.log10(Math.E)*this.mag):this.layer===1?x(1,2,this.sign*(Math.log10(.4342944819032518)+this.mag)):x(1,this.layer+1,this.sign*this.mag)}sqr(){return this.pow(2)}sqrt(){if(this.layer===0)return c(Math.sqrt(this.sign*this.mag));if(this.layer===1)return x(1,2,Math.log10(this.mag)-.3010299956639812);{const e=g.div(O(this.sign,this.layer-1,this.mag),O(1,0,2));return e.layer+=1,e.normalize(),e}}cube(){return this.pow(3)}cbrt(){return this.pow(1/3)}tetrate(e=2,t=O(1,0,1)){if(e===1)return g.pow(this,t);if(e===0)return new g(t);if(this.eq(g.dOne))return g.dOne;if(this.eq(-1))return g.pow(this,t);if(e===Number.POSITIVE_INFINITY){const i=this.toNumber();if(i<=1.444667861009766&&i>=.06598803584531254){if(i>1.444667861009099)return new g(Math.E);const a=g.ln(this).neg();return a.lambertw().div(a)}else return i>1.444667861009766?new g(Number.POSITIVE_INFINITY):g.dNaN}if(this.eq(g.dZero)){let i=Math.abs((e+1)%2);return i>1&&(i=2-i),new g(i)}if(e<0)return g.iteratedlog(t,this,-e);t=c(t);const n=e;e=Math.trunc(e);const s=n-e;if(this.gt(g.dZero)&&this.lte(1.444667861009766)){e=Math.min(1e4,e);for(let i=0;i<e;++i){const a=t;if(t=this.pow(t),a.eq(t))return t}if(s!=0){const i=this.pow(t);return t.mul(1-s).add(i.mul(s))}return t}s!==0&&(t.eq(g.dOne)?this.gt(10)?t=this.pow(s):(t=c(g.tetrate_critical(this.toNumber(),s)),this.lt(2)&&(t=t.sub(1).mul(this.minus(1)).plus(1))):this.eq(10)?t=t.layeradd10(s):t=t.layeradd(s,this));for(let i=0;i<e;++i){if(t=this.pow(t),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(t.layer-this.layer>3)return O(t.sign,t.layer+(e-i-1),t.mag);if(i>1e4)return t}return t}iteratedexp(e=2,t=O(1,0,1)){return this.tetrate(e,t)}iteratedlog(e=10,t=1){if(t<0)return g.tetrate(e,-t,this);e=c(e);let n=c(this);const s=t;t=Math.trunc(t);const i=s-t;if(n.layer-e.layer>3){const a=Math.min(t,n.layer-e.layer-3);t-=a,n.layer-=a}for(let a=0;a<t;++a){if(n=n.log(e),!isFinite(n.layer)||!isFinite(n.mag))return n.normalize();if(a>1e4)return n}return i>0&&i<1&&(e.eq(10)?n=n.layeradd10(-i):n=n.layeradd(-i,e)),n}slog(e=10){if(e=c(e),e.lte(g.dZero)||e.eq(g.dOne))return g.dNaN;if(e.lt(g.dOne))return this.eq(g.dOne)?g.dZero:this.eq(g.dZero)?g.dNegOne:g.dNaN;if(this.mag<0||this.eq(g.dZero))return g.dNegOne;let t=0,n=c(this);if(n.layer-e.layer>3){const s=n.layer-e.layer-3;t+=s,n.layer-=s}for(let s=0;s<100;++s)if(n.lt(g.dZero))n=g.pow(e,n),t-=1;else{if(n.lte(g.dOne))return c(t+g.slog_critical(e.toNumber(),n.toNumber()));t+=1,n=g.log(n,e)}return c(t)}static slog_critical(e,t){return e>10?t-1:g.critical_section(e,t,ps)}static tetrate_critical(e,t){return g.critical_section(e,t,gs)}static critical_section(e,t,n){t*=10,t<0&&(t=0),t>10&&(t=10),e<2&&(e=2),e>10&&(e=10);let s=0,i=0;for(let o=0;o<Te.length;++o)if(Te[o]==e){s=n[o][Math.floor(t)],i=n[o][Math.ceil(t)];break}else if(Te[o]<e&&Te[o+1]>e){const d=(e-Te[o])/(Te[o+1]-Te[o]);s=n[o][Math.floor(t)]*(1-d)+n[o+1][Math.floor(t)]*d,i=n[o][Math.ceil(t)]*(1-d)+n[o+1][Math.ceil(t)]*d;break}const a=t-Math.floor(t);return s*(1-a)+i*a}layeradd10(e){e=g.fromValue_noAlloc(e).toNumber();const t=c(this);if(e>=1){t.mag<0&&t.layer>0?(t.sign=0,t.mag=0,t.layer=0):t.sign===-1&&t.layer==0&&(t.sign=1,t.mag=-t.mag);const n=Math.trunc(e);e-=n,t.layer+=n}if(e<=-1){const n=Math.trunc(e);if(e-=n,t.layer+=n,t.layer<0)for(let s=0;s<100;++s){if(t.layer++,t.mag=Math.log10(t.mag),!isFinite(t.mag))return t.sign===0&&(t.sign=1),t.layer<0&&(t.layer=0),t.normalize();if(t.layer>=0)break}}for(;t.layer<0;)t.layer++,t.mag=Math.log10(t.mag);return t.sign===0&&(t.sign=1,t.mag===0&&t.layer>=1&&(t.layer-=1,t.mag=1)),t.normalize(),e!==0?t.layeradd(e,10):t}layeradd(e,t){const s=this.slog(t).toNumber()+e;return s>=0?g.tetrate(t,s):Number.isFinite(s)?s>=-1?g.log(g.tetrate(t,s+1),t):g.log(g.log(g.tetrate(t,s+2),t),t):g.dNaN}lambertw(){if(this.lt(-.3678794411710499))throw Error("lambertw is unimplemented for results less than -1, sorry!");if(this.mag<0)return c(Ot(this.toNumber()));if(this.layer===0)return c(Ot(this.sign*this.mag));if(this.layer===1)return Vt(this);if(this.layer===2)return Vt(this);if(this.layer>=3)return O(this.sign,this.layer-1,this.mag);throw"Unhandled behavior in lambertw()"}ssqrt(){if(this.sign==1&&this.layer>=3)return O(this.sign,this.layer-1,this.mag);const e=this.ln();return e.div(e.lambertw())}pentate(e=2,t=O(1,0,1)){t=c(t);const n=e;e=Math.trunc(e);const s=n-e;s!==0&&(t.eq(g.dOne)?(++e,t=new g(s)):this.eq(10)?t=t.layeradd10(s):t=t.layeradd(s,this));for(let i=0;i<e;++i){if(t=this.tetrate(t.toNumber()),!isFinite(t.layer)||!isFinite(t.mag))return t.normalize();if(i>10)return t}return t}sin(){return this.mag<0?this:this.layer===0?c(Math.sin(this.sign*this.mag)):O(0,0,0)}cos(){return this.mag<0?g.dOne:this.layer===0?c(Math.cos(this.sign*this.mag)):O(0,0,0)}tan(){return this.mag<0?this:this.layer===0?c(Math.tan(this.sign*this.mag)):O(0,0,0)}asin(){return this.mag<0?this:this.layer===0?c(Math.asin(this.sign*this.mag)):O(Number.NaN,Number.NaN,Number.NaN)}acos(){return this.mag<0?c(Math.acos(this.toNumber())):this.layer===0?c(Math.acos(this.sign*this.mag)):O(Number.NaN,Number.NaN,Number.NaN)}atan(){return this.mag<0?this:this.layer===0?c(Math.atan(this.sign*this.mag)):c(Math.atan(this.sign*(1/0)))}sinh(){return this.exp().sub(this.negate().exp()).div(2)}cosh(){return this.exp().add(this.negate().exp()).div(2)}tanh(){return this.sinh().div(this.cosh())}asinh(){return g.ln(this.add(this.sqr().add(1).sqrt()))}acosh(){return g.ln(this.add(this.sqr().sub(1).sqrt()))}atanh(){return this.abs().gte(1)?O(Number.NaN,Number.NaN,Number.NaN):g.ln(this.add(1).div(c(1).sub(this))).div(2)}ascensionPenalty(e){return e===0?this:this.root(g.pow(10,e))}egg(){return this.add(9)}lessThanOrEqualTo(e){return this.cmp(e)<1}lessThan(e){return this.cmp(e)<0}greaterThanOrEqualTo(e){return this.cmp(e)>-1}greaterThan(e){return this.cmp(e)>0}};let $=g;$.dZero=O(0,0,0);$.dOne=O(1,0,1);$.dNegOne=O(-1,0,1);$.dTwo=O(1,0,2);$.dTen=O(1,0,10);$.dNaN=O(Number.NaN,Number.NaN,Number.NaN);$.dInf=O(1,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);$.dNegInf=O(-1,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);$.dNumberMax=x(1,0,Number.MAX_VALUE);$.dNumberMin=x(1,0,Number.MIN_VALUE);const _s=new $(1);function We(e,t,n=!0){let s=$.log10(e).floor(),i=$.div(e,$.pow(10,s));i.toStringWithDecimalPlaces(t)==="10"&&(i=_s,s=s.add(1));const a=s.gte(1e9)?re(s,Math.max(Math.max(t,3),L.defaultDecimalsShown)):s.gte(1e4)?nt(s,0):s.toStringWithDecimalPlaces(0);return n?i.toStringWithDecimalPlaces(t)+"e"+a:"e"+a}function nt(e,t){if(e==null)return"NaN";if(e=new $(e),e.mag<.001)return 0 .toFixed(t);const s=e.toStringWithDecimalPlaces(t).split(".");return s[0]=s[0].replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"),s.length==1?s[0]:s[0]+"."+s[1]}function Gt(e,t){return e==null?"NaN":(e=new $(e),e.mag<1e-4?0 .toFixed(t):(e.mag<.1&&t!==0&&(t=Math.max(Math.max(t,e.log10().negate().ceil().toNumber()),L.defaultDecimalsShown)),e.toStringWithDecimalPlaces(t)))}const ys=new $("eeee1000"),bs=new $("e100000"),Et=new $("e1000"),zt=new $(1e9),Ns=new $(1e6),ws=new $(1e3),ks=new $(.98),$s=new $(.001),Ht=new $(0);function re(e,t,n){if(t==null&&(t=L.defaultDecimalsShown),n=n!=null?n:L.defaultShowSmall,e=new $(e),isNaN(e.sign)||isNaN(e.layer)||isNaN(e.mag))return"NaN";if(e.sign<0)return"-"+re(e.neg(),t);if(e.mag===Number.POSITIVE_INFINITY)return"Infinity";if(e.gte(ys)){const s=e.slog();return s.gte(Ns)?"F"+re(s.floor()):$.pow(10,s.sub(s.floor())).toStringWithDecimalPlaces(3)+"F"+nt(s.floor(),0)}else{if(e.gte(bs))return We(e,0,!1);if(e.gte(Et))return We(e,0);if(e.gte(zt))return We(e,t);if(e.gte(ws))return nt(e,0);if(e.gte($s)||!n)return Gt(e,t);if(e.eq(Ht))return 0 .toFixed(t)}return e=Kt(e),e.lt(Et)?We(e,t).replace(/([^(?:e|F)]*)$/,"-$1"):re(e,t)+"\u207B\xB9"}function ae(e){return e=new $(e),e.sign<0?"-"+ae(e.neg()):e.gte(zt)||e.lte(ks)&&!e.eq(Ht)?re(e):re(e,0)}function Wt(e){return $.lt(e,0)?"-"+Wt($.neg(e)):$.gt(e,2**51)?re($.div(e,31536e3))+"y":(e=new $(e).toNumber(),e<60?re(e)+"s":e<3600?ae(Math.floor(e/60))+"m "+re(e%60)+"s":e<86400?ae(Math.floor(e/3600))+"h "+ae(Math.floor(e/60)%60)+"m "+ae(e%60)+"s":e<31536e3?ae(Math.floor(e/84600)%365)+"d "+ae(Math.floor(e/3600)%24)+"h "+ae(Math.floor(e/60)%60)+"m":ae(Math.floor(e/31536e3))+"y "+ae(Math.floor(e/84600)%365)+"d "+ae(Math.floor(e/3600)%24)+"h")}function Ss(e,t,n){e=new $(e);let s=e.toStringWithDecimalPlaces(t);return new $(s).gte(n)&&(s=$.sub(n,Math.pow(.1,t)).toStringWithDecimalPlaces(t)),s}function Ms(e,t){return re(e,t,!0)}function Kt(e){let t=$.log10(e).ceil();const n=$.div(e,$.pow(10,t));return t=t.neg(),e=new $(10).pow(t).times(n),e}var Cs=Object.freeze(Object.defineProperty({__proto__:null,default:$,exponentialFormat:We,commaFormat:nt,regularFormat:Gt,format:re,formatWhole:ae,formatTime:Wt,toPlaces:Ss,formatSmall:Ms,invertOOM:Kt},Symbol.toStringTag,{value:"Module"}));const{exponentialFormat:Ts,commaFormat:Is,regularFormat:Ps,format:Yt,formatWhole:pt,formatTime:Nt,toPlaces:xs,formatSmall:Fs,invertOOM:Os}=Cs;window.Decimal=$;window.exponentialFormat=Ts;window.commaFormat=Is;window.regularFormat=Ps;window.format=Yt;window.formatWhole=pt;window.formatTime=Nt;window.toPlaces=xs;window.formatSmall=Fs;window.invertOOM=Os;function Vs(e){let t=e.replace(/([A-Z])/g," $1");return t=t.charAt(0).toUpperCase()+t.slice(1),t}function Dt(e){return typeof e=="function"}var H=(e=>(e.Up="Up",e.Down="Down",e.Left="Left",e.Right="Right",e.Default="Up",e))(H||{});const st=Symbol("DoNotCache");function Y(e,t){const n=e[t];Dt(n)&&n.length===0&&!n[st]?e[t]=V(n.bind(e)):Dt(n)&&(e[t]=n.bind(e),e[t][st]=!0)}const it=Symbol("Component"),wt=Symbol("GatherProps");let Es=0;function Ds(e="feature-"){return e+Es++}var Pe=(e=>(e[e.Visible=0]="Visible",e[e.Hidden=1]="Hidden",e[e.None=2]="None",e))(Pe||{});function X(e){return e[st]=!0,e}function Se(e,t,n){e[t]===void 0&&n!=null&&(e[t]=n)}const Ie={variables:{"--foreground":"#dfdfdf","--background":"#0f0f0f","--feature-foreground":"#0f0f0f","--tooltip-background":"rgba(0, 0, 0, 0.75)","--raised-background":"#0f0f0f","--points":"#ffffff","--locked":"#bf8f8f","--highlighted":"#333","--bought":"#77bf5f","--danger":"rgb(220, 53, 69)","--link":"#02f2f2","--outline":"#dfdfdf","--accent1":"#627a82","--accent2":"#658262","--accent3":"#7c6282","--border-radius":"15px","--modal-border":"solid 2px var(--color)","--feature-margin":"0px"},floatingTabs:!0,mergeAdjacent:!0,showPin:!0};var kt=(e=>(e.Classic="classic",e.Paper="paper",e.Nordic="nordic",e.Aqua="aqua",e))(kt||{}),ct={classic:Ie,paper:{...Ie,variables:{...Ie.variables,"--background":"#2a323d","--feature-foreground":"#000","--raised-background":"#333c4a","--locked":"#3a3e45","--bought":"#5C8A58","--outline":"#333c4a","--border-radius":"4px","--modal-border":"","--feature-margin":"5px"},floatingTabs:!1},nordic:{...Ie,variables:{...Ie.variables,"--foreground":"#D8DEE9","--background":"#2E3440","--feature-foreground":"#000","--raised-background":"#3B4252","--points":"#E5E9F0","--locked":"#4c566a","--highlighted":"#434c5e","--bought":"#8FBCBB","--danger":"#D08770","--link":"#88C0D0","--outline":"#3B4252","--accent1":"#B48EAD","--accent2":"#A3BE8C","--accent3":"#EBCB8B","--border-radius":"4px","--modal-border":"solid 2px #3B4252","--feature-margin":"5px"},floatingTabs:!1},aqua:{...Ie,variables:{...Ie.variables,"--foreground":"#bfdfff","--background":"#001f3f","--tooltip-background":"rgba(0, 15, 31, 0.75)","--raised-background":"#001f3f","--points":"#dfefff","--locked":"#c4a7b3","--outline":"#bfdfff"}}};const K=Symbol("ProxyState"),Ve=Symbol("ProxyPath");function Zt(e,t={}){const n=t;let s=!1;function i(){return s||(Object.assign(n,e(n)),s=!0),n}return new Proxy(n,{get(a,l){return l===K?i():i()[l]},set(a,l,o){return i()[l]=o,!0},has(a,l){return l===K?!0:Reflect.has(i(),l)},ownKeys(){return Reflect.ownKeys(i())},getOwnPropertyDescriptor(a,l){return s||(Object.assign(n,e(n)),s=!0),Object.getOwnPropertyDescriptor(a,l)}})}var B=window.state=yt({lastTenTicks:[],hasNaN:!1,NaNPath:[]});const Jt=je({id:"",devSpeed:null,name:"",tabs:[],time:-1,autosave:!0,offlineProd:!0,offlineTime:null,timePlayed:0,keepGoing:!1,modID:"",modVersion:"",layers:{}});function Xt(e){return JSON.stringify(e,(t,n)=>r(n))}const Qt={get(e,t){var s;if(t===K||t===Ve)return e[t];const n=e[K][t];if(t!=="value"&&(Tn(n)||Array.isArray(n))){if(n!==((s=e[t])==null?void 0:s[K])){const i=[...e[Ve],t];e[t]=new Proxy({[K]:n,[Ve]:i},Qt)}return e[t]}return n},set(e,t,n,s){if(!B.hasNaN&&(typeof n=="number"&&isNaN(n)||n instanceof $&&(isNaN(n.sign)||isNaN(n.layer)||isNaN(n.mag)))){const i=e[K][t];if(!(typeof i=="number"&&isNaN(i)||i instanceof $&&(isNaN(i.sign)||isNaN(i.layer)||isNaN(i.mag))))throw Jt.autosave=!1,B.hasNaN=!0,B.NaNPath=[...e[Ve],t],B.NaNReceiver=s,console.error("Attempted to set NaN value",[...e[Ve],t],e[K]),"Attempted to set NaN value. See above for details"}return e[K][t]=n,!0},ownKeys(e){return Reflect.ownKeys(e[K])},has(e,t){return Reflect.has(e[K],t)},getOwnPropertyDescriptor(e,t){return Object.getOwnPropertyDescriptor(e[K],t)}};var T=window.player=new Proxy({[K]:Jt,[Ve]:["player"]},Qt);const W=At();let Ee=null,Ke=null;function at(){const e=Date.now();let t=(e-T.time)/1e3;T.time=e;const n=t;if(B.lastTenTicks.push(n),B.lastTenTicks.length>10&&(B.lastTenTicks=B.lastTenTicks.slice(1)),!((Ke==null?void 0:Ke.value)&&!T.keepGoing)&&!B.hasNaN&&(t=Math.max(t,0),T.devSpeed!==0)){if(T.offlineTime!=null){if($.gt(T.offlineTime,L.offlineLimit*3600)&&(T.offlineTime=L.offlineLimit*3600),$.gt(T.offlineTime,0)&&T.devSpeed!==0){const s=Math.max(T.offlineTime/10,t);T.offlineTime=T.offlineTime-s,t+=s}else T.devSpeed===0&&(T.offlineTime+=t);(!T.offlineProd||$.lt(T.offlineTime,0))&&(T.offlineTime=null)}t=Math.min(t,L.maxTickLength),T.devSpeed!=null&&(t*=T.devSpeed),Number.isFinite(t)||(t=1e308),!$.eq(t,0)&&(T.timePlayed+=t,Number.isFinite(T.timePlayed)||(T.timePlayed=1e308),W.emit("update",t,n),U.unthrottled?(requestAnimationFrame(at),Ee!=null&&(clearInterval(Ee),Ee=null)):Ee==null&&(Ee=setInterval(at,50)))}}async function Ls(){Ke=(await tt(()=>Promise.resolve().then(function(){return wn}),void 0)).hasWon,Q(Ke,e=>{e&&W.emit("gameWon")}),U.unthrottled?requestAnimationFrame(at):Ee=setInterval(at,50)}document.fonts.onloadingdone=()=>W.emit("fontsLoaded");var Rs=Object.freeze(Object.defineProperty({__proto__:null,globalBus:W,startGameLoop:Ls},Symbol.toStringTag,{value:"Module"}));var A=(e,t)=>{const n=e.__vccOpts||e;for(const[s,i]of t)n[s]=i;return n};const qs=["onSubmit"],Bs={class:"field"},As={key:0,class:"field-title"},Us=["placeholder"],js=R({__name:"Text",props:{title:null,modelValue:null,textArea:{type:Boolean},placeholder:null,maxHeight:null,submitOnBlur:{type:Boolean}},emits:["update:modelValue","submit","cancel"],setup(e,{emit:t}){const n=e,s=St(Me(n,"title"),"span"),i=Ge(null);bt(()=>{var d;(d=i.value)==null||d.focus()});const a=V({get(){return r(n.modelValue)||""},set(d){t("update:modelValue",d)}});function l(){t("submit")}function o(){n.submitOnBlur!==!1?t("submit"):t("cancel")}return(d,m)=>(f(),b("form",{onSubmit:Ze(l,["prevent"])},[u("div",Bs,[r(s)?(f(),b("span",As,[(f(),D(ie(r(s))))])):P("",!0),e.textArea?(f(),D(r(In),{key:1,modelValue:r(a),"onUpdate:modelValue":m[0]||(m[0]=_=>Z(a)?a.value=_:null),placeholder:e.placeholder,maxHeight:e.maxHeight,onBlur:o,ref_key:"field",ref:i},null,8,["modelValue","placeholder","maxHeight"])):ot((f(),b("input",{key:2,type:"text","onUpdate:modelValue":m[1]||(m[1]=_=>Z(a)?a.value=_:null),placeholder:e.placeholder,class:J({fullWidth:!e.title}),onBlur:o,ref_key:"field",ref:i},null,42,Us)),[[kn,r(a)]])])],40,qs))}});var he=A(js,[["__scopeId","data-v-67b44a54"]]);const Fe=C(!1),se=C(null),ge=C(!1),$t=C({});C({});const Lt=Ut(),De=C(),Re=C("");function Le(e,...t){var n;!Fe.value||(n=De.value)==null||n.emit(e,...t)}function Gs(){return T.layers.main[K]}W.on("loadSettings",e=>{Se(e,"server",window.location.origin),Se(e,"nickname",Rt()),Q(()=>e.server,t=>{De.value&&De.value.close(),De.value=Pn(t),zs(De.value),Fe.value=!1,Re.value="",De.value.connect()},{immediate:!0}),Q(()=>e.nickname,t=>{se.value&&Le("set nickname",t)}),qt(X(()=>v(G,null,[v(he,{title:"Server URL","onUpdate:modelValue":t=>e.server=t,modelValue:e.server},null),v("div",{style:"font-style: italic; font-size: small; margin-top: -10px;"},[Fe.value?v("span",null,[E("Connected!")]):Re.value?v("span",{style:"color: red"},[Re.value]):v("span",null,[E("Connecting...")])])]))),qt(X(()=>v(G,null,[v(he,{title:X(()=>v("span",null,[E("Nickname"),v("button",{class:"button",style:"position: absolute; right: 0px; top: 2px;",onClick:()=>e.nickname=Rt()},[v("span",{class:"material-icons"},[E("casino")])])])),"onUpdate:modelValue":t=>e.nickname=t,modelValue:e.nickname},null)])))});function zs(e){e.on("connect",()=>{Re.value="",Fe.value=!0}),e.on("connect_error",t=>{Re.value=`${t.name}: ${t.message}`}),e.on("disconnect",(t,n)=>{var s;Re.value=n instanceof Error?`${n.name}: ${n.message}`:(s=n==null?void 0:n.description)!=null?s:t,Fe.value=!1}),e.on("server version",t=>{Dn(L.versionNumber,t)||(Lt.info("Server only accepts game versions in range: "+t),e.disconnect())}),e.on("info",t=>{Lt.info(t),W.emit("serverSentInfo")}),e.on("chat",(t,n)=>{W.emit("chat",t,n)}),e.on("set rooms",t=>{W.emit("setRooms",t)}),e.on("joined room",(t,n)=>{se.value=t,ge.value=n,W.emit("chat",void 0,"you joined "+t)}),e.on("left room",()=>{se.value=null}),e.on("set nicknames",t=>{$t.value=t})}function Rt(){return xn({dictionaries:[Fn,On,Vn],length:3,separator:" ",style:"capital"})}Q(Fe,e=>{!e&&se.value&&Hs()});function Hs(){ge.value||tn(),se.value=null,ge.value=!1}function en(e={}){return Object.assign({id:`${L.id}-0`,name:"Default Save",tabs:L.initialTabs.slice(),time:Date.now(),autosave:!0,offlineProd:!0,offlineTime:0,timePlayed:0,keepGoing:!1,modID:L.id,modVersion:L.versionNumber,layers:{}},e)}function le(e){const t=ke.compressToUTF16(Xt(e!=null?e:T[K]));return localStorage.setItem((e!=null?e:T[K]).id,t),t}async function tn(){Ks();try{let e=localStorage.getItem(U.active);if(e==null){await xe(qe());return}if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=ke.decompressFromUTF16(e);else throw"Unable to determine save encoding";const t=JSON.parse(e);if(t.modID!==L.id){await xe(qe());return}t.id=U.active,await xe(t)}catch(e){console.error(`Failed to load save. Falling back to new save.
`,e),await xe(qe())}}function qe(){const e=et(),t=en({id:e});return le(t),U.saves.push(e),t}function et(){let e,t=0;do e=`${L.id}-${t++}`;while(localStorage.getItem(e));return e}async function xe(e){console.info("Loading save",e);const{layers:t,removeLayer:n,addLayer:s}=await tt(()=>Promise.resolve().then(function(){return fi}),void 0),{fixOldSave:i,getInitialLayers:a}=await tt(()=>Promise.resolve().then(function(){return wn}),void 0);for(const l in t){const o=t[l];o&&n(o)}a(e).forEach(l=>s(l,e)),e=en(e),e.offlineProd&&e.time&&(e.offlineTime==null&&(e.offlineTime=0),e.offlineTime+=(Date.now()-e.time)/1e3),e.time=Date.now(),e.modVersion!==L.versionNumber&&i(e.modVersion,e),Object.assign(T,e),U.active=T.id,W.emit("onLoad")}setInterval(()=>{T.autosave&&(!se.value||ge.value)&&le()},1e3);window.onbeforeunload=()=>{T.autosave&&(!se.value||ge.value)&&le()};window.save=le;const Ws=window.hardReset=async()=>{await xe(qe())},Je=je({active:"",saves:[],showTPS:!0,theme:kt.Nordic,unthrottled:!1});Q(Je,e=>{const t=ke.compressToUTF16(JSON.stringify(e));localStorage.setItem(L.id,t)},{deep:!0});var U=window.settings=Je;window.hardResetSettings=()=>{const e={active:"",saves:[],showTPS:!0,theme:kt.Nordic};W.emit("loadSettings",e),Object.assign(Je,e),Ws()};function Ks(){try{let e=localStorage.getItem(L.id);if(e!=null&&e!==""){if(e[0]!=="{")if(e[0]==="e")e=decodeURIComponent(escape(atob(e)));else if(e[0]==="\u1BE1")e=ke.decompressFromUTF16(e);else{console.warn("Unable to determine settings encoding",e);return}const t=JSON.parse(e);typeof t=="object"&&Object.assign(Je,t)}W.emit("loadSettings",Je)}catch{}}const nn=je([]);function qt(e){nn.push(e)}const Ys=je([]),Zs=je([]);function pe(e,t="span"){return typeof e=="function"?R({render:e}):typeof e=="string"?e.length>0?(e=e.trim(),e.charAt(0)!=="<"&&(e=`<${t}>${e}</${t}>`),R({template:e})):R({render:()=>({})}):e}function dt(e){if(Ye(e))return typeof e=="function"?e():pe(e);const t=e[it];return v(t,e[wt](),null)}function Js(e){if(Ye(e))return typeof e=="function"?e():typeof e=="string"?v(G,null,[e]):v(e,null,null);const t=e[it];return v(t,e[wt](),null)}function Ye(e){return typeof e=="string"?!0:typeof e=="object"?e==null?!1:"render"in e||"component"in e:typeof e=="function"&&e[st]===!0}function sn(e,t="div"){const n=Ge();return lt(()=>{n.value=pe(ce(e),t)}),n}function St(e,t="div"){const n=Ge(null);return lt(()=>{const s=ce(e);n.value=s==null?null:pe(s,t)}),n}function Xs(e){return V(()=>ce(e))}function ce(e){return r(r(e))}function z(...e){return e.includes(Object)||e.push(Object),e}const Qs=R({__name:"Context",emits:["updateNodes"],setup(e,{emit:t}){var _;const n=C({}),s=new ResizeObserver(o),i=C(null);bt(()=>{const y=i.value;y!=null&&s.observe(y)});let a=!0,l=C((_=i.value)==null?void 0:_.getBoundingClientRect());function o(){a&&(a=!1,_e(()=>{var y;l.value=(y=i.value)==null?void 0:y.getBoundingClientRect(),Object.values(n.value).filter(h=>h).forEach(h=>h.rect=h.element.getBoundingClientRect()),t("updateNodes",n.value),a=!0}))}W.on("fontsLoaded",o);const d={attributes:!1,childList:!0,subtree:!1};Qe(on,(y,h)=>{const N=new MutationObserver(()=>m(y));N.observe(h,d),n.value[y]={element:h,observer:N,rect:h.getBoundingClientRect()},o()}),Qe(ln,y=>{var h;(h=n.value[y])==null||h.observer.disconnect(),n.value[y]=void 0,o()}),Qe(un,n),Qe(cn,l);function m(y){const h=n.value[y];h!=null&&(h.rect=h.element.getBoundingClientRect(),t("updateNodes",n.value))}return(y,h)=>(f(),b(G,null,[$e(y.$slots,"default",{},void 0,!0),u("div",{ref_key:"resizeListener",ref:i,class:"resize-listener"},null,512)],64))}});var an=A(Qs,[["__scopeId","data-v-2b1dc1bc"]]);const ei=["onPointerdown"],ti={class:"modal-wrapper"},ni={class:"modal-container"},si={class:"modal-header"},ii=E(" default header "),ai={class:"modal-body"},ri=E(" default body "),oi={class:"modal-footer"},li=u("div",{class:"modal-default-flex-grow"},null,-1),Ce=R({__name:"Modal",props:{modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{expose:t,emit:n}){const i=oe(e),a=V(()=>i.modelValue||o.value);function l(){n("update:modelValue",!1)}const o=C(!1),d=C(null),m=V(()=>{var _,y;return(y=(_=d.value)==null?void 0:_.nodes)!=null?y:null});return t({isOpen:a,nodes:m}),(_,y)=>(f(),D($n,{to:"#modal-root"},[v(ut,{name:"modal",onBeforeEnter:y[0]||(y[0]=h=>o.value=!0),onAfterLeave:y[1]||(y[1]=h=>o.value=!1)},{default:I(()=>[ot(u("div",Ae({class:"modal-mask",onPointerdown:Ze(l,["self"])},_.$attrs),[u("div",ti,[u("div",ni,[u("div",si,[$e(_.$slots,"header",{shown:r(a)},()=>[ii])]),u("div",ai,[v(an,{ref_key:"contextRef",ref:d},{default:I(()=>[$e(_.$slots,"body",{shown:r(a)},()=>[ri])]),_:3},512)]),u("div",oi,[$e(_.$slots,"footer",{shown:r(a)},()=>[u("div",{class:"modal-default-footer"},[li,u("button",{class:"button modal-default-button",onClick:l}," Close ")])])])])])],16,ei),[[Bt,e.modelValue]])]),_:3})]))}}),vt=Symbol("PersistentState"),_t=Symbol("DefaultValue"),rt=Symbol("StackTrace"),rn=Symbol("Deleted");function ui(){var e;return((e=new Error().stack)==null?void 0:e.split(`
`).slice(3,5).map(t=>t.trim()).join(`
`))||""}function Mt(e){const t=Z(e)?e:C(e);return t[vt]=t,t[_t]=Z(e)?e.value:e,t[rt]=ui(),t[rn]=!1,ue.length===0?console.warn("Creating a persistent ref outside of a layer. This is not officially supported",t,`
Created at:
`+t[rt]):Be[ue[ue.length-1]].add(t),t}W.on("addLayer",(e,t)=>{const n=[],s=(i,a=[])=>{let l=!1;return Object.keys(i).forEach(o=>{const d=i[o];if(d&&typeof d=="object")if(vt in d){if(l=!0,d[rn]){console.warn("Deleted persistent ref present in returned object. Ignoring...",d,`
Created at:
`+d[rt]);return}Be[e.id].delete(K in d?d[K]:d);const m=a.reduce((y,h)=>(h in y||(y[h]={}),y[h]),t),_=m[o];m[o]=d[vt],Sn(m)?_!=null?m[o]=_:m[o]=d[_t]:_!=null?m[o].value=_:m[o].value=d[_t]}else!(d instanceof $)&&!Z(d)&&!n.includes(d)&&(typeof d.type=="symbol"&&n.push(d),s(d,[...a,o])&&(Pt(d)&&!Pt(i)?console.warn("Found array that contains persistent values when adding layer. Keep in mind changing the order of elements in the array will mess with existing player saves.",K in i?i[K]:i,o):l=!0))}),l};s(e),Be[e.id].forEach(i=>{console.error(`Created persistent ref in ${e.id} without registering it to the layer! Make sure to include everything persistent in the returned object`,i,`
Created at:
`+i[rt])}),Be[e.id].clear()});const on=Symbol("RegisterNode"),ln=Symbol("UnregisterNode"),un=Symbol("Nodes"),cn=Symbol("Bounds"),ne=yt({});window.layers=ne;const Be={},ue=[];function dn(e,t){return Zt(()=>{const n={},s=n.emitter=At();if(n.on=s.on.bind(s),n.emit=s.emit.bind(s),n.nodes=C({}),n.id=e,ue.push(e),Be[e]=new Set,n.minimized=Mt(!1),Object.assign(n,t.call(n)),ue[ue.length-1]==null||ue[ue.length-1]!==e)throw`Adding layers stack in invalid state. This should not happen
Stack: ${ue}
Trying to pop ${n.id}`;return ue.pop(),Y(n,"color"),Y(n,"display"),Y(n,"name"),Se(n,"name",n.id),Y(n,"minWidth"),Se(n,"minWidth",600),Y(n,"minimizable"),Se(n,"minimizable",!0),n})}function mn(e,t){if(console.info("Adding layer",e.id),ne[e.id]){console.error("Attempted to add layer with same ID as existing layer",e.id,ne[e.id]);return}Se(t,"layers",{}),t.layers[e.id]==null&&(t.layers[e.id]={}),ne[e.id]=e,W.emit("addLayer",e,t.layers[e.id])}function ci(e){return ne[e]}function fn(e){console.info("Removing layer",e.id),W.emit("removeLayer",e),ne[e.id]=void 0}function di(e){fn(e),mn(e,T)}function mi(e){const t=C(!1);return{openModal:()=>t.value=!0,modal:X(()=>v(Ce,{modelValue:t.value,"onUpdate:modelValue":n=>t.value=n},{header:()=>v("h2",null,[r(e.name)]),body:r(e.display)}))}}W.on("update",function(t){Object.values(ne).forEach(n=>{n==null||n.emit("preUpdate",t)}),Object.values(ne).forEach(n=>{n==null||n.emit("update",t)}),Object.values(ne).forEach(n=>{n==null||n.emit("postUpdate",t)})});var fi=Object.freeze(Object.defineProperty({__proto__:null,RegisterNodeInjectionKey:on,UnregisterNodeInjectionKey:ln,NodesInjectionKey:un,BoundsInjectionKey:cn,layers:ne,persistentRefs:Be,addingLayers:ue,createLayer:dn,addLayer:mn,getLayer:ci,removeLayer:fn,reloadLayer:di,setupLayerModal:mi},Symbol.toStringTag,{value:"Module"}));const hi=R({components:{Context:an},props:{index:{type:Number,required:!0},tab:{type:Function,required:!0},display:{type:z(Object,String,Function),required:!0},minimized:{type:Object,required:!0},minWidth:{type:z(Number,String),required:!0},name:{type:z(String),required:!0},color:z(String),minimizable:z(Boolean),nodes:{type:Object,required:!0}},setup(e){const{display:t,index:n,minimized:s,minWidth:i,tab:a}=oe(e),l=sn(t),o=V(()=>L.allowGoBack&&n.value>0&&!s.value);function d(){T.tabs.splice(r(e.index),1/0)}_e(()=>_(s.value,r(i.value))),Q([s,Xs(i)],([y,h])=>_(y,h));function m(y){e.nodes.value=y}function _(y,h){const N=typeof h=="number"||Number.isNaN(parseInt(h))?h+"px":h,p=a.value();p!=null&&(y?(p.style.flexGrow="0",p.style.flexShrink="0",p.style.width="60px",p.style.minWidth=p.style.flexBasis="",p.style.margin="0"):(p.style.flexGrow="",p.style.flexShrink="",p.style.width="",p.style.minWidth=p.style.flexBasis=N,p.style.margin=""))}return{component:l,showGoBack:o,updateNodes:m,unref:r,goBack:d}}});function gi(e,t,n,s,i,a){const l=gt("Context");return f(),b("div",{class:"layer-container",style:te({"--layer-color":e.unref(e.color)})},[e.showGoBack?(f(),b("button",{key:0,class:"goBack",onClick:t[0]||(t[0]=(...o)=>e.goBack&&e.goBack(...o))},"\u2190")):P("",!0),e.minimized.value?(f(),b("button",{key:1,class:"layer-tab minimized",onClick:t[1]||(t[1]=o=>e.minimized.value=!1)},[u("div",null,F(e.unref(e.name)),1)])):(f(),b("div",{key:2,class:J(["layer-tab",{showGoBack:e.showGoBack}])},[v(l,{onUpdateNodes:e.updateNodes},{default:I(()=>[(f(),D(ie(e.component)))]),_:1},8,["onUpdateNodes"])],2)),e.unref(e.minimizable)?(f(),b("button",{key:3,class:"minimize",onClick:t[2]||(t[2]=o=>e.minimized.value=!0)}," \u25BC ")):P("",!0)],4)}var pi=A(hi,[["render",gi],["__scopeId","data-v-34c9d881"]]);const hn=e=>(de("data-v-4b4bda40"),e=e(),me(),e),vi=hn(()=>u("h2",null,"Changelog",-1)),_i=hn(()=>u("details",{open:""},[u("summary",null,[E("v0.0 Initial Commit - "),u("time",null,"2021-09-04")]),E(" This is the first release :D "),u("ul",null,[u("li",{class:"feature"},"Did everything"),u("li",{class:"fix"},"Had some fun"),u("li",{class:"breaking"},"Removed everything"),u("li",{class:"balancing"},"Created some bugs to fix later")])],-1)),yi=R({__name:"Changelog",setup(e,{expose:t}){const n=C(!1);return t({open(){n.value=!0}}),(s,i)=>(f(),D(Ce,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=a=>n.value=a)},{header:I(()=>[vi]),body:I(()=>[_i]),_:1},8,["modelValue"]))}});var bi=A(yi,[["__scopeId","data-v-4b4bda40"]]);const Ni={class:"field"},wi=R({__name:"Toggle",props:{title:null,modelValue:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const n=e,s=V(()=>pe(r(n.title)||"<span></span>","span")),i=V({get(){return!!n.modelValue},set(a){t("update:modelValue",a)}});return(a,l)=>(f(),b("label",Ni,[ot(u("input",{type:"checkbox",class:"toggle","onUpdate:modelValue":l[0]||(l[0]=o=>Z(i)?i.value=o:null)},null,512),[[Mn,r(i)]]),(f(),D(ie(r(s))))]))}});var ve=A(wi,[["__scopeId","data-v-2b109500"]]);W.on("setupVue",e=>e.use(En));function ki(e="white",t="8px"){return{transform:"scale(1.05, 1.05)",borderColor:"rgba(0, 0, 0, 0.125)",boxShadow:`-4px -4px 4px rgba(0, 0, 0, 0.25) inset, 0 0 ${t} ${e}`,zIndex:1}}const $i=R({props:{visibility:{type:z(Number),required:!0},display:{type:z(Object,String,Function),required:!0},style:z(String,Object,Array),classes:z(Object),glowColor:z(String),active:Boolean,floating:Boolean},emits:["selectTab"],setup(e,{emit:t}){const{display:n,glowColor:s,floating:i}=oe(e),a=sn(n),l=V(()=>{const d=ce(s);return d?r(i)?ki(d):{boxShadow:`0px 9px 5px -6px ${d}`}:{}});function o(){t("selectTab")}return{selectTab:o,component:a,glowColorStyle:l,unref:r,Visibility:Pe}}});function Si(e,t,n,s,i,a){var l;return e.unref(e.visibility)!==e.Visibility.None?(f(),b("button",{key:0,onClick:t[0]||(t[0]=(...o)=>e.selectTab&&e.selectTab(...o)),class:J(["tabButton",{active:e.active,...e.unref(e.classes)}]),style:te([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},e.glowColorStyle,(l=e.unref(e.style))!=null?l:{}])},[(f(),D(ie(e.component)))],6)):P("",!0)}var gn=A($i,[["render",Si],["__scopeId","data-v-610a2549"]]);const Mi=R({__name:"Sticky",setup(e){const t=C("0"),n=new ResizeObserver(i),s=Ge(null);function i(){let a=s.value;if(a==null)return;let l=0;for(;a.previousSibling;){const o=a.previousSibling;o.dataset&&"vSticky"in o.dataset&&(l+=o.offsetHeight),a=o}t.value=l+"px"}return _e(i),document.fonts.ready.then(i),bt(()=>{var l;const a=(l=s.value)==null?void 0:l.parentElement;a&&n.observe(a)}),(a,l)=>(f(),b("div",{class:"sticky",style:te({top:t.value}),ref_key:"element",ref:s,"data-v-sticky":""},[$e(a.$slots,"default",{},void 0,!0)],4))}});var Ci=A(Mi,[["__scopeId","data-v-cccac690"]]);const Ti=R({props:{visibility:{type:z(Number),required:!0},activeTab:{type:z(Object),required:!0},selected:{type:Object,required:!0},tabs:{type:z(Object),required:!0},style:z(String,Object,Array),classes:z(Object),buttonContainerStyle:z(String,Object,Array),buttonContainerClasses:z(Object)},components:{Sticky:Ci,TabButton:gn},setup(e){const{activeTab:t}=oe(e),n=V(()=>ct[U.theme].floatingTabs),s=Ge("");lt(()=>{const o=ce(t);if(o==null){s.value="";return}if(Ye(o)){s.value=pe(o);return}s.value=pe(r(o.display))});const i=V(()=>{const o=ce(t);return Ye(o)||!o?void 0:r(o.classes)}),a=V(()=>{const o=ce(t);return Ye(o)||!o?void 0:r(o.style)});function l(o){const{display:d,style:m,classes:_,glowColor:y,visibility:h}=o;return{display:d,style:r(m),classes:_,glowColor:y,visibility:h}}return{floating:n,tabClasses:i,tabStyle:a,Visibility:Pe,component:s,gatherButtonProps:l,unref:r}}});function Ii(e,t,n,s,i,a){var d,m;const l=gt("TabButton"),o=gt("Sticky");return e.unref(e.visibility)!==e.Visibility.None?(f(),b("div",{key:0,class:J(["tab-family-container",{...e.unref(e.classes),...e.tabClasses}]),style:te([{visibility:e.unref(e.visibility)===e.Visibility.Hidden?"hidden":void 0},(d=e.unref(e.style))!=null?d:[],(m=e.tabStyle)!=null?m:[]])},[v(o,{class:J(["tab-buttons-container",e.unref(e.buttonContainerClasses)]),style:te(e.unref(e.buttonContainerStyle))},{default:I(()=>[u("div",{class:J(["tab-buttons",{floating:e.floating}])},[(f(!0),b(G,null,Ue(e.unref(e.tabs),(_,y)=>(f(),D(l,Ae({onSelectTab:h=>e.selected.value=y,floating:e.floating,key:y,active:e.unref(_.tab)===e.unref(e.activeTab)},e.gatherButtonProps(_)),null,16,["onSelectTab","floating","active"]))),128))],2)]),_:1},8,["class","style"]),e.unref(e.activeTab)?(f(),D(ie(e.unref(e.component)),{key:0})):P("",!0)],6)):P("",!0)}var Pi=A(Ti,[["render",Ii],["__scopeId","data-v-11575f45"]]);const xi=Symbol("TabButton"),Fi=Symbol("TabFamily");function Oi(e,t){if(Object.keys(e).length===0)throw console.warn("Cannot create tab family with 0 tabs"),"Cannot create tab family with 0 tabs";const n=Mt(Object.keys(e)[0]);return Zt(()=>{var a;const s=(a=t==null?void 0:t())!=null?a:{};s.id=Ds("tabFamily-"),s.type=Fi,s[it]=Pi,s.tabs=Object.keys(e).reduce((l,o)=>{const d=e[o]();return d.type=xi,d[it]=gn,Y(d,"visibility"),Se(d,"visibility",Pe.Visible),Y(d,"tab"),Y(d,"display"),Y(d,"classes"),Y(d,"style"),Y(d,"glowColor"),l[o]=d,l},{}),s.selected=n,s.activeTab=V(()=>{const l=r(i.tabs);if(n.value in l&&r(l[n.value].visibility)===Pe.Visible)return r(l[n.value].tab);const o=Object.values(l).find(d=>r(d.visibility)===Pe.Visible);return o?r(o.tab):null}),Y(s,"visibility"),Se(s,"visibility",Pe.Visible),Y(s,"classes"),Y(s,"style"),Y(s,"buttonContainerClasses"),Y(s,"buttonContainerStyle"),s[wt]=function(){const{visibility:l,activeTab:o,selected:d,tabs:m,style:_,classes:y,buttonContainerClasses:h,buttonContainerStyle:N}=this;return{visibility:l,activeTab:o,selected:d,tabs:m,style:r(_),classes:y,buttonContainerClasses:h,buttonContainerStyle:N}};const i=s;return i})}var Vi=R({props:{element:Object,display:{type:z(Object,String,Function),required:!0},style:z(Object,String,Array),classes:z(Object),direction:z(String),xoffset:z(String),yoffset:z(String),pinned:Object},setup(e){const{element:t,display:n,pinned:s}=oe(e),i=C(!1),a=V(()=>(ce(s)||i.value)&&l.value),l=St(n),o=Ge(pe(X(()=>{const _=ce(t);return _==null?"":Js(_)})));function d(_){const y=s;_.shiftKey&&y&&(y.value=!y.value,_.stopPropagation(),_.preventDefault())}const m=V(()=>ce(s)&&ct[U.theme].showPin);return{Direction:H,isHovered:i,isShown:a,comp:l,elementComp:o,unref:r,togglePinned:d,showPin:m}}});const Ei={key:0,class:"material-icons pinned"};function Di(e,t,n,s,i,a){return f(),b("div",{class:J(["tooltip-container",{shown:e.isShown}]),onMouseenter:t[0]||(t[0]=l=>e.isHovered=!0),onMouseleave:t[1]||(t[1]=l=>e.isHovered=!1),onClickCapture:t[2]||(t[2]=(...l)=>e.togglePinned&&e.togglePinned(...l))},[$e(e.$slots,"default",{},void 0,!0),e.elementComp?(f(),D(ie(e.elementComp),{key:0})):P("",!0),v(ut,{name:"fade"},{default:I(()=>{var l;return[e.isShown?(f(),b("div",{key:0,class:J(["tooltip",{top:e.unref(e.direction)===e.Direction.Up,left:e.unref(e.direction)===e.Direction.Left,right:e.unref(e.direction)===e.Direction.Right,bottom:e.unref(e.direction)===e.Direction.Down,...e.unref(e.classes)}]),style:te([{"--xoffset":e.unref(e.xoffset)||"0px","--yoffset":e.unref(e.yoffset)||"0px"},(l=e.unref(e.style))!=null?l:{}])},[e.showPin?(f(),b("span",Ei,"push_pin")):P("",!0),e.comp?(f(),D(ie(e.comp),{key:1})):P("",!0)],6)):P("",!0)]}),_:1})],34)}var j=A(Vi,[["render",Di],["__scopeId","data-v-6102fa3a"]]);const Ct=e=>(de("data-v-a7843e62"),e=e(),me(),e),Li={class:"room"},Ri={key:0,class:"actions"},qi=Ct(()=>u("span",{class:"material-icons"},"check",-1)),Bi=Ct(()=>u("span",{class:"material-icons"},"close",-1)),Ai={key:1,class:"details"},Ui={key:0,class:"material-icons"},ji={key:1,class:"material-icons"},Gi={class:"room-host"},zi={key:2,class:"details",style:{display:"flex"}},Hi=Ct(()=>u("span",null,"Password:",-1)),Wi=R({__name:"Room",props:{isPrivate:{type:Boolean},room:null},emits:["connect"],setup(e,{emit:t}){const n=e,{room:s}=oe(n),i=C(!1),a=C("");Q(i,d=>{d&&(a.value="")});function l(){s.value.hasPassword?i.value=!0:t("connect")}function o(){t("connect",a.value),i.value=!1}return(d,m)=>(f(),b("div",Li,[i.value?(f(),b("div",Ri,[u("button",{onPointerdown:o,class:"button"},[v(j,{display:"Join",direction:r(H).Left,class:"info"},{default:I(()=>[qi]),_:1},8,["direction"])],32),u("button",{onPointerdown:m[0]||(m[0]=_=>i.value=!i.value),class:"button"},[v(j,{display:"Cancel",direction:r(H).Left,class:"info"},{default:I(()=>[Bi]),_:1},8,["direction"])],32)])):P("",!0),i.value?(f(),b("div",zi,[Hi,v(he,{modelValue:a.value,"onUpdate:modelValue":m[1]||(m[1]=_=>a.value=_),class:"editname",onSubmit:o,onCancel:m[2]||(m[2]=_=>i.value=!i.value),submitOnBlur:!1},null,8,["modelValue"])])):(f(),b("div",Ai,[r(s).hasPassword?(f(),b("span",Ui,"lock")):P("",!0),e.isPrivate?(f(),b("span",ji,"visibility_off")):P("",!0),u("button",{class:"button open",onClick:l},[u("h3",null,F(r(s).name),1)]),u("div",Gi,"Hosted by "+F(r(s).host),1)]))]))}});var Ki=A(Wi,[["__scopeId","data-v-a7843e62"]]);const ze=e=>(de("data-v-6c2b3a99"),e=e(),me(),e),Yi=ze(()=>u("h2",null,"Multiplayer",-1)),Zi={style:{"text-align":"center"}},Ji=ze(()=>u("br",null,null,-1)),Xi={class:"players-list"},Qi={key:0,style:{"font-size":"small",color:"grey","margin-left":"10px"}},ea=ze(()=>u("div",{style:{"flex-grow":"1"}},null,-1)),ta=["onClick"],na=ze(()=>u("br",null,null,-1)),sa={key:1},ia=E(" Not connected to a server. Please set up networking in the options modal. "),aa=ze(()=>u("br",null,null,-1)),ra=[ia,aa],oa={class:"modal-footer"},la={class:"footer"},ua=ze(()=>u("div",{style:{"flex-grow":"1"}},null,-1));var ca=R({__name:"RoomsDialog",setup(e,{expose:t}){const n=C(!1),s=C(null);t({open(){n.value=!0}});const i=C(null),a=C(""),l=C(""),o=C(""),d=C(""),m=C(!1),_=Oi({roomList:()=>({display:"Room List",tab:X(()=>{var p;return v(G,null,[((p=i.value)!=null?p:[]).map(w=>v(Ki,{room:w,isPrivate:!1,onConnect:k=>h(w.name,k)},null)),i.value!=null&&i.value.length===0?v("div",{style:"text-align: center"},[E("No public rooms found")]):null,i.value==null?v("div",{style:"text-align: center"},[E("Loading public rooms list...")]):null,v("br",null,null),v("button",{class:"button large",onClick:y},[E("Refresh")])])})}),direct:()=>({display:"Private Room",tab:X(()=>v(G,null,[v("div",{class:"direct-connect"},[v("div",{class:"field"},[v(he,{"onUpdate:modelValue":p=>a.value=p,modelValue:a.value,title:"Room Name"},null)]),v("div",{class:"field"},[v(he,{"onUpdate:modelValue":p=>l.value=p,modelValue:l.value,title:"Room Password"},null)]),v("button",{class:"button large",onClick:()=>h(a.value,l.value)},[E("Connect")])])]))}),host:()=>({display:"Host",tab:X(()=>v(G,null,[v("div",{class:"field"},[v(he,{"onUpdate:modelValue":p=>o.value=p,modelValue:o.value,title:"Room Name"},null)]),v("div",{class:"field"},[v(he,{"onUpdate:modelValue":p=>d.value=p,modelValue:d.value,title:"Room Password"},null)]),v(ve,{"onUpdate:modelValue":p=>m.value=p,modelValue:m.value,title:"Private"},null),v("div",{style:"font-size: small"},[E("You will host the currently active single player world, allowing other players to join and modify your save. It is recommended to backup your save frequently.")]),v("br",null,null),v("button",{class:"button large",onClick:()=>N(o.value,d.value,m.value)},[E("Host")])]))})},()=>({style:"margin-left: 0; margin-right: 0; --layer-color: var(--link)"}));Q([n,_.selected],([p,w])=>{p&&w==="roomList"?y():p&&w==="host"&&(o.value=`${U.nickname}'s ${T.name}`)}),Q(se,p=>{p||(a.value="",l.value="",o.value=`${U.nickname}'s ${T.name}`,d.value="",y())}),W.on("setRooms",p=>i.value=p),W.on("serverSentInfo",()=>{n.value&&y()});function y(){i.value=null,Le("get rooms")}function h(p,w){Le("connect to room",p,w,U.nickname)}function N(p,w,k){Le("create room",{name:p,password:w,nickname:U.nickname,privateRoom:k===!0,state:Gs()})}return(p,w)=>(f(),D(Ce,{modelValue:n.value,"onUpdate:modelValue":w[2]||(w[2]=k=>n.value=k),ref_key:"modal",ref:s},{header:I(()=>[Yi]),body:I(({shown:k})=>[k?(f(),b(G,{key:0},[r(Fe)?(f(),b(G,{key:0},[r(se)?(f(),b(G,{key:0},[u("div",Zi,[u("h3",null,"Connected to "+F(r(se)),1)]),Ji,u("ul",Xi,[(f(!0),b(G,null,Ue(r($t),(fe,S)=>(f(),b("div",{key:S,style:{display:"flex"}},[u("span",null,F(fe),1),fe===r(U).nickname?(f(),b("span",Qi,"(YOU)")):P("",!0),ea,r(ge)&&fe!==r(U).nickname?(f(),b("button",{key:1,class:"button",style:{color:"red",display:"inline"},onClick:M=>r(Le)("kick user",fe)}," KICK ",8,ta)):P("",!0)]))),128))]),na,u("button",{class:"button large",onClick:w[0]||(w[0]=()=>N(o.value,d.value,m.value))},F(r(ge)?"Close":"Leave")+" room ",1)],64)):(f(),D(ie(r(dt)(r(_))),{key:1}))],64)):(f(),b("div",sa,ra))],64)):P("",!0)]),footer:I(()=>[u("div",oa,[u("div",la,[ua,u("button",{class:"button modal-default-button",onClick:w[1]||(w[1]=k=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var da=A(ca,[["__scopeId","data-v-6c2b3a99"]]);const Oe=e=>(de("data-v-7dec2dec"),e=e(),me(),e),ma={class:"info-modal-header"},fa=["src","alt"],ha={class:"info-modal-title"},ga={key:0},pa={key:0},va={key:0},_a=Oe(()=>u("div",null," Made in Profectus, by thepaperpilot with inspiration from Acameada and Jacorb ",-1)),ya=Oe(()=>u("br",null,null,-1)),ba=Oe(()=>u("br",null,null,-1)),Na=["href"],wa=Oe(()=>u("span",{class:"material-icons info-modal-discord"},"discord",-1)),ka=Oe(()=>u("div",null,[u("a",{href:"https://discord.gg/WzejVAx",class:"info-modal-discord-link"},[u("span",{class:"material-icons info-modal-discord"},"discord"),E(" The Paper Pilot Community ")])],-1)),$a=Oe(()=>u("div",null,[u("a",{href:"https://discord.gg/F3xveHV",class:"info-modal-discord-link"},[u("span",{class:"material-icons info-modal-discord"},"discord"),E(" The Modding Tree ")])],-1)),Sa=Oe(()=>u("br",null,null,-1));var Ma=R({__name:"Info",props:{changelog:null},setup(e,{expose:t}){const n=e,{title:s,logo:i,author:a,discordName:l,discordLink:o,versionNumber:d,versionTitle:m}=L,_=oe(n),y=C(!1),h=V(()=>Nt(T.timePlayed)),N=V(()=>pe(X(()=>v(G,null,[Ys.map(dt)]))));t({open(){y.value=!0}});function p(){var w;(w=r(_.changelog))==null||w.open()}return(w,k)=>(f(),D(Ce,{modelValue:y.value,"onUpdate:modelValue":k[0]||(k[0]=fe=>y.value=fe)},{header:I(()=>[u("div",ma,[r(i)?(f(),b("img",{key:0,class:"info-modal-logo",src:r(i),alt:r(s)},null,8,fa)):P("",!0),u("div",ha,[u("h2",null,F(r(s)),1),u("h4",null,[E(" v"+F(r(d)),1),r(m)?(f(),b("span",ga,": "+F(r(m)),1)):P("",!0)])])])]),body:I(({shown:fe})=>[fe?(f(),b("div",pa,[r(a)?(f(),b("div",va,"By "+F(r(a)),1)):P("",!0),_a,ya,u("div",{class:"link",onClick:p},"Changelog"),ba,u("div",null,[r(o)?(f(),b("a",{key:0,href:r(o),class:"info-modal-discord-link"},[wa,E(" "+F(r(l)),1)],8,Na)):P("",!0)]),ka,$a,Sa,u("div",null,"Time Played: "+F(r(h)),1),(f(),D(ie(r(N))))])):P("",!0)]),_:1},8,["modelValue"]))}});var Ca=A(Ma,[["__scopeId","data-v-7dec2dec"]]);const Ta={class:"field"},Ia={key:0,class:"field-title"},pn=R({__name:"Select",props:{title:null,modelValue:null,options:null,placeholder:null,closeOnSelect:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){var l;const n=e,s=St(Me(n,"title"),"span"),i=C((l=n.options.find(o=>o.value===n.modelValue))!=null?l:null);Q(Me(n,"modelValue"),o=>{var d;ce(i)!==o&&(i.value=(d=n.options.find(m=>m.value===o))!=null?d:null)});function a(o){t("update:modelValue",o.value)}return(o,d)=>(f(),b("div",Ta,[r(s)?(f(),b("span",Ia,[(f(),D(ie(r(s))))])):P("",!0),v(r(Ln),{options:e.options,modelValue:i.value,"onUpdate:modelValue":[d[0]||(d[0]=m=>i.value=m),a],min:1,"label-by":"label",placeholder:e.placeholder,"close-on-select":e.closeOnSelect},null,8,["options","modelValue","placeholder","close-on-select"])]))}}),vn=e=>(de("data-v-bc13791c"),e=e(),me(),e),Pa=vn(()=>u("div",{class:"header"},[u("h2",null,"Options")],-1)),xa=vn(()=>u("hr",null,null,-1));var Fa=R({__name:"Options",setup(e,{expose:t}){const n=C(!1);t({open(){n.value=!0}});const s=Object.keys(ct).map(p=>({label:Vs(p),value:p})),i=V(()=>pe(X(()=>v(G,null,[nn.map(dt)])))),{showTPS:a,theme:l,unthrottled:o}=oe(U),{autosave:d,offlineProd:m}=oe(T),_=V({get(){return T.devSpeed===0},set(p){T.devSpeed=p?0:null}}),y=X(()=>v("span",null,[E("Offline Production"),v(j,{display:"Save-specific"},{default:()=>[E("*")]})])),h=X(()=>v("span",null,[E("Autosave"),v(j,{display:"Save-specific"},{default:()=>[E("*")]})])),N=X(()=>v("span",null,[E("Pause game"),v(j,{display:"Save-specific"},{default:()=>[E("*")]})]));return(p,w)=>(f(),D(Ce,{modelValue:n.value,"onUpdate:modelValue":w[6]||(w[6]=k=>n.value=k)},{header:I(()=>[Pa]),body:I(()=>[v(pn,{title:"Theme",options:r(s),modelValue:r(l),"onUpdate:modelValue":w[0]||(w[0]=k=>Z(l)?l.value=k:null)},null,8,["options","modelValue"]),(f(),D(ie(r(i)))),v(ve,{title:"Show TPS",modelValue:r(a),"onUpdate:modelValue":w[1]||(w[1]=k=>Z(a)?a.value=k:null)},null,8,["modelValue"]),xa,v(ve,{title:"Unthrottled",modelValue:r(o),"onUpdate:modelValue":w[2]||(w[2]=k=>Z(o)?o.value=k:null)},null,8,["modelValue"]),v(ve,{title:r(y),modelValue:r(m),"onUpdate:modelValue":w[3]||(w[3]=k=>Z(m)?m.value=k:null)},null,8,["title","modelValue"]),v(ve,{title:r(h),modelValue:r(d),"onUpdate:modelValue":w[4]||(w[4]=k=>Z(d)?d.value=k:null)},null,8,["title","modelValue"]),r(L).enablePausing?(f(),D(ve,{key:0,title:r(N),modelValue:r(_),"onUpdate:modelValue":w[5]||(w[5]=k=>Z(_)?_.value=k:null)},null,8,["title","modelValue"])):P("",!0)]),_:1},8,["modelValue"]))}});var Oa=A(Fa,[["__scopeId","data-v-bc13791c"]]);const Va={key:0},Ea=["onClick","disabled"],Da={key:0},La=["onClick"],Ra=R({__name:"DangerButton",props:{disabled:{type:Boolean},skipConfirm:{type:Boolean}},emits:["click","confirmingChanged"],setup(e,{emit:t}){const s=oe(e),i=C(!1);Q(i,o=>{t("confirmingChanged",o)});function a(){if(r(s.skipConfirm)){t("click");return}i.value&&t("click"),i.value=!i.value}function l(){i.value=!1}return(o,d)=>(f(),b("span",{class:J(["container",{confirming:i.value}])},[i.value?(f(),b("span",Va,"Are you sure?")):P("",!0),u("button",{onClick:Ze(a,["stop"]),class:"button danger",disabled:e.disabled},[i.value?(f(),b("span",Da,"Yes")):$e(o.$slots,"default",{key:1},void 0,!0)],8,Ea),i.value?(f(),b("button",{key:1,class:"button",onClick:Ze(l,["stop"])},"No",8,La)):P("",!0)],2))}});var qa=A(Ra,[["__scopeId","data-v-2f8ef34c"]]);const Ba=["onClick"],Aa=R({__name:"FeedbackButton",props:{left:{type:Boolean}},emits:["click"],setup(e,{emit:t}){const n=C(!1),s=C(null);function i(){t("click"),s.value&&clearTimeout(s.value),n.value=!1,_e(()=>{n.value=!0,s.value=setTimeout(()=>n.value=!1,500)})}return(a,l)=>(f(),b("button",{onClick:Ze(i,["stop"]),class:J(["feedback",{activated:n.value,left:e.left}])},[$e(a.$slots,"default",{},void 0,!0)],10,Ba))}});var Ua=A(Aa,[["__scopeId","data-v-01a1b95c"]]);const ye=e=>(de("data-v-0136bef4"),e=e(),me(),e),ja=ye(()=>u("div",{class:"handle material-icons"},"drag_handle",-1)),Ga={key:0,class:"actions"},za=ye(()=>u("span",{class:"material-icons"},"content_paste",-1)),Ha=ye(()=>u("span",{class:"material-icons"},"content_copy",-1)),Wa=ye(()=>u("span",{class:"material-icons"},"edit",-1)),Ka=ye(()=>u("span",{class:"material-icons",style:{margin:"-2px"}},"delete",-1)),Ya={key:1,class:"actions"},Za=ye(()=>u("span",{class:"material-icons"},"check",-1)),Ja=ye(()=>u("span",{class:"material-icons"},"close",-1)),Xa={key:2,class:"details"},Qa={class:"save-version"},er=ye(()=>u("br",null,null,-1)),tr={key:0},nr={key:3,class:"details"},sr={key:4,class:"details error"},ir=ye(()=>u("br",null,null,-1)),ar=R({__name:"Save",props:{save:null},emits:["export","open","duplicate","delete","editName"],setup(e,{emit:t}){const n=e,{save:s}=oe(n),i=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),a=C(!1),l=C(!1),o=C("");Q(a,()=>o.value=s.value.name||"");const d=V(()=>s.value&&s.value.id===T.id),m=V(()=>d.value?T.time:s.value&&s.value.time||0);function _(){t("editName",o.value),a.value=!1}return(y,h)=>(f(),b("div",{class:J(["save",{active:r(d)}])},[ja,a.value?(f(),b("div",Ya,[u("button",{onClick:_,class:"button"},[v(j,{display:"Save",direction:r(H).Left,class:"info"},{default:I(()=>[Za]),_:1},8,["direction"])]),u("button",{onClick:h[5]||(h[5]=N=>a.value=!a.value),class:"button"},[v(j,{display:"Cancel",direction:r(H).Left,class:"info"},{default:I(()=>[Ja]),_:1},8,["direction"])])])):(f(),b("div",Ga,[r(s).error==null&&!l.value?(f(),D(Ua,{key:0,onClick:h[0]||(h[0]=N=>t("export")),class:"button",left:""},{default:I(()=>[v(j,{display:"Export",direction:r(H).Left,class:"info"},{default:I(()=>[za]),_:1},8,["direction"])]),_:1})):P("",!0),r(s).error==null&&!l.value?(f(),b("button",{key:1,onClick:h[1]||(h[1]=N=>t("duplicate")),class:"button"},[v(j,{display:"Duplicate",direction:r(H).Left,class:"info"},{default:I(()=>[Ha]),_:1},8,["direction"])])):P("",!0),r(s).error==null&&!l.value?(f(),b("button",{key:2,onClick:h[2]||(h[2]=N=>a.value=!a.value),class:"button"},[v(j,{display:"Edit Name",direction:r(H).Left,class:"info"},{default:I(()=>[Wa]),_:1},8,["direction"])])):P("",!0),v(qa,{disabled:r(d),onClick:h[3]||(h[3]=N=>t("delete")),onConfirmingChanged:h[4]||(h[4]=N=>l.value=N)},{default:I(()=>[v(j,{display:"Delete",direction:r(H).Left,class:"info"},{default:I(()=>[Ka]),_:1},8,["direction"])]),_:1},8,["disabled"])])),r(s).error==null&&!a.value?(f(),b("div",Xa,[u("button",{class:"button open",onClick:h[6]||(h[6]=N=>t("open"))},[u("h3",null,F(r(s).name),1)]),u("span",Qa,"v"+F(r(s).modVersion),1),er,r(m)?(f(),b("div",tr,"Last played "+F(r(i).format(r(m))),1)):P("",!0)])):r(s).error==null&&a.value?(f(),b("div",nr,[v(he,{modelValue:o.value,"onUpdate:modelValue":h[7]||(h[7]=N=>o.value=N),class:"editname",onSubmit:_},null,8,["modelValue"])])):(f(),b("div",sr,[E(" Error: Failed to load save with id "+F(r(s).id),1),ir,E(F(r(s).error),1)]))],2))}});var rr=A(ar,[["__scopeId","data-v-0136bef4"]]);const Tt=e=>(de("data-v-a8b59e3e"),e=e(),me(),e),or=Tt(()=>u("h2",null,"Saves Manager",-1)),lr={key:1},ur={class:"modal-footer"},cr={key:1,class:"field"},dr=Tt(()=>u("span",{class:"field-title"},"Create Save",-1)),mr={class:"field-buttons"},fr={class:"footer"},hr=Tt(()=>u("div",{style:{"flex-grow":"1"}},null,-1)),gr=R({__name:"SavesManager",setup(e,{expose:t}){const n=C(!1),s=C(null);t({open(){n.value=!0}});const i=C(!1),a=C(""),l=C(null);Q(a,S=>{S?_e(()=>{try{if(S[0]!=="{")if(S[0]==="e")S=decodeURIComponent(escape(atob(S)));else if(S[0]==="\u1BE1")S=ke.decompressFromUTF16(S);else{console.warn("Unable to determine preset encoding",S),i.value=!0;return}const M=JSON.parse(S);if(typeof M!="object"){i.value=!0;return}const q=et();M.id=q,le(M),a.value="",i.value=!1,U.saves.push(q)}catch{i.value=!0}}):i.value=!1});let o={},d=C(Object.keys(o).reduce((S,M)=>(S.push({label:M.split("/").slice(-1)[0].slice(0,-4),value:o[M]}),S),[]));const m=yt({});function _(S){if(m[S]==null){let M=localStorage.getItem(S);if(M==null)m[S]={error:"Save doesn't exist in localStorage",id:S};else if(M==="dW5kZWZpbmVk")m[S]={error:"Save is undefined",id:S};else try{if(M[0]!=="{")if(M[0]==="e")M=decodeURIComponent(escape(atob(M)));else if(M[0]==="\u1BE1")M=ke.decompressFromUTF16(M);else return console.warn("Unable to determine preset encoding",M),i.value=!0,m[S]={error:"Unable to determine preset encoding",id:S},m[S];m[S]={...JSON.parse(M),id:S}}catch(q){m[S]={error:q,id:S},console.warn(`SavesManager: Failed to load info about save with id ${S}:
${q}
${M}`)}}return m[S]}Q(n,S=>{S&&Object.keys(m).forEach(M=>delete m[M])});const y=V(()=>U.saves.reduce((S,M)=>(S[M]=_(M),S),{}));function h(S){let M;switch(T.id===S?M=Xt(T[K]):M=JSON.stringify(y.value[S]),L.exportEncoding){default:console.warn(`Unknown save encoding: ${L.exportEncoding}. Defaulting to lz`);case"lz":M=ke.compressToUTF16(M);break;case"base64":M=btoa(unescape(encodeURIComponent(M)));break;case"plain":break}const q=document.createElement("textarea");q.value=M,document.body.appendChild(q),q.select(),q.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(q)}function N(S){T.id===S&&le();const M={...y.value[S],id:et()};le(M),U.saves.push(M.id)}function p(S){U.saves=U.saves.filter(M=>M!==S),localStorage.removeItem(S),m[S]=void 0}function w(S){y.value[T.id].time=T.time,le(),m[T.id]=void 0,xe(y.value[S]),m[S]=void 0}function k(S){if(l.value=S,_e(()=>{l.value=null}),S[0]!=="{")if(S[0]==="e")S=decodeURIComponent(escape(atob(S)));else if(S[0]==="\u1BE1")S=ke.decompressFromUTF16(S);else{console.warn("Unable to determine preset encoding",S);return}const M=JSON.parse(S);M.id=et(),le(M),U.saves.push(M.id),w(M.id)}function fe(S,M){const q=y.value[S];q&&(q.name=M,T.id===S?(T.name=M,le()):(le(q),m[S]=void 0))}return(S,M)=>(f(),D(Ce,{modelValue:n.value,"onUpdate:modelValue":M[4]||(M[4]=q=>n.value=q),ref_key:"modal",ref:s},{header:I(()=>[or]),body:I(({shown:q})=>[q&&(!r(se)||r(ge))?(f(),D(r(Rn),{key:0,list:r(U).saves,handle:".handle",itemKey:be=>be},{item:I(({element:be})=>[v(rr,{save:r(y)[be],onOpen:He=>w(be),onExport:He=>h(be),onEditName:He=>fe(be,He),onDuplicate:He=>N(be),onDelete:He=>p(be)},null,8,["save","onOpen","onExport","onEditName","onDuplicate","onDelete"])]),_:1},8,["list","itemKey"])):(f(),b("div",lr,"You are connected to a server - cannot change saves"))]),footer:I(()=>[u("div",ur,[!r(se)||r(ge)?(f(),D(he,{key:0,modelValue:a.value,"onUpdate:modelValue":M[0]||(M[0]=q=>a.value=q),title:"Import Save",placeholder:"Paste your save here!",class:J({importingFailed:i.value})},null,8,["modelValue","class"])):P("",!0),!r(se)||r(ge)?(f(),b("div",cr,[dr,u("div",mr,[u("button",{class:"button",onClick:M[1]||(M[1]=q=>w(r(qe)().id))},"New Game"),Object.keys(r(d)).length>0?(f(),D(pn,{key:0,options:r(d),modelValue:l.value,"onUpdate:modelValue":M[2]||(M[2]=q=>k(q)),closeOnSelect:"",placeholder:"Select preset",class:"presets"},null,8,["options","modelValue"])):P("",!0)])])):P("",!0),u("div",fr,[hr,u("button",{class:"button modal-default-button",onClick:M[3]||(M[3]=q=>n.value=!1)}," Close ")])])]),_:1},8,["modelValue"]))}});var _n=A(gr,[["__scopeId","data-v-a8b59e3e"]]);const ee=e=>(de("data-v-392a44a6"),e=e(),me(),e),pr=["src","alt"],vr={key:1,class:"title"},_r=ee(()=>u("div",{style:{"flex-grow":"1",cursor:"unset"}},null,-1)),yr={class:"discord"},br={class:"discord-links"},Nr={key:0},wr=["href"],kr=ee(()=>u("li",null,[u("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),$r=ee(()=>u("li",null,[u("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),Sr={href:"https://forums.moddingtree.com/",target:"_blank"},Mr=ee(()=>u("span",{class:"material-icons"},"forum",-1)),Cr=ee(()=>u("span",{class:"material-icons"},"info",-1)),Tr=ee(()=>u("span",{class:"material-icons"},"library_books",-1)),Ir=ee(()=>u("span",{class:"material-icons"},"group",-1)),Pr=ee(()=>u("span",{class:"material-icons"},"settings",-1)),xr=ee(()=>u("span",{class:"material-icons"},"library_books",-1)),Fr=ee(()=>u("span",{class:"material-icons"},"group",-1)),Or=ee(()=>u("span",{class:"material-icons"},"settings",-1)),Vr=ee(()=>u("span",{class:"material-icons"},"info",-1)),Er={href:"https://forums.moddingtree.com/",target:"_blank"},Dr=ee(()=>u("span",{class:"material-icons"},"forum",-1)),Lr={class:"discord"},Rr={class:"discord-links"},qr={key:0},Br=["href"],Ar=ee(()=>u("li",null,[u("a",{href:"https://discord.gg/WzejVAx",target:"_blank"},"The Paper Pilot Community")],-1)),Ur=ee(()=>u("li",null,[u("a",{href:"https://discord.gg/F3xveHV",target:"_blank"},"The Modding Tree")],-1)),jr=R({__name:"Nav",setup(e){const t=C(null),n=C(null),s=C(null),i=C(null),a=C(null);W.on("openMultiplayer",()=>{var N;return(N=a.value)==null?void 0:N.open()});const{useHeader:l,banner:o,title:d,discordName:m,discordLink:_,versionNumber:y}=L;function h(){window.open(_,"mywindow")}return(N,p)=>(f(),b(G,null,[r(l)?(f(),b("div",Ae({key:0,class:"nav"},N.$attrs),[r(o)?(f(),b("img",{key:0,src:r(o),class:"banner",alt:r(d)},null,8,pr)):(f(),b("div",vr,F(r(d)),1)),u("div",{onClick:p[0]||(p[0]=w=>{var k;return(k=i.value)==null?void 0:k.open()}),class:"version-container"},[v(j,{display:"Changelog",direction:r(H).Down,class:"version"},{default:I(()=>[u("span",null,"v"+F(r(y)),1)]),_:1},8,["direction"])]),_r,u("div",yr,[u("span",{onClick:h,class:"material-icons"},"discord"),u("ul",br,[r(_)?(f(),b("li",Nr,[u("a",{href:r(_),target:"_blank"},F(r(m)),9,wr)])):P("",!0),kr,$r])]),u("div",null,[u("a",Sr,[v(j,{display:"Forums",direction:r(H).Down,yoffset:"5px"},{default:I(()=>[Mr]),_:1},8,["direction"])])]),u("div",{onClick:p[1]||(p[1]=w=>{var k;return(k=t.value)==null?void 0:k.open()})},[v(j,{display:"Info",direction:r(H).Down,class:"info"},{default:I(()=>[Cr]),_:1},8,["direction"])]),u("div",{onClick:p[2]||(p[2]=w=>{var k;return(k=n.value)==null?void 0:k.open()})},[v(j,{display:"Saves",direction:r(H).Down,xoffset:"-20px"},{default:I(()=>[Tr]),_:1},8,["direction"])]),u("div",{onClick:p[3]||(p[3]=w=>{var k;return(k=a.value)==null?void 0:k.open()})},[v(j,{display:"Multiplayer",direction:r(H).Down,xoffset:"-20px"},{default:I(()=>[Ir]),_:1},8,["direction"])]),u("div",{onClick:p[4]||(p[4]=w=>{var k;return(k=s.value)==null?void 0:k.open()})},[v(j,{display:"Options",direction:r(H).Down,xoffset:"-66px"},{default:I(()=>[Pr]),_:1},8,["direction"])])],16)):(f(),b("div",Ae({key:1,class:"overlay-nav"},N.$attrs),[u("div",{onClick:p[5]||(p[5]=w=>{var k;return(k=i.value)==null?void 0:k.open()}),class:"version-container"},[v(j,{display:"Changelog",direction:r(H).Right,xoffset:"25%",class:"version"},{default:I(()=>[u("span",null,"v"+F(r(y)),1)]),_:1},8,["direction"])]),u("div",{onClick:p[6]||(p[6]=w=>{var k;return(k=n.value)==null?void 0:k.open()})},[v(j,{display:"Saves",direction:r(H).Right},{default:I(()=>[xr]),_:1},8,["direction"])]),u("div",{onClick:p[7]||(p[7]=w=>{var k;return(k=a.value)==null?void 0:k.open()})},[v(j,{display:"Multiplayer",direction:r(H).Right},{default:I(()=>[Fr]),_:1},8,["direction"])]),u("div",{onClick:p[8]||(p[8]=w=>{var k;return(k=s.value)==null?void 0:k.open()})},[v(j,{display:"Options",direction:r(H).Right},{default:I(()=>[Or]),_:1},8,["direction"])]),u("div",{onClick:p[9]||(p[9]=w=>{var k;return(k=t.value)==null?void 0:k.open()})},[v(j,{display:"Info",direction:r(H).Right},{default:I(()=>[Vr]),_:1},8,["direction"])]),u("div",null,[u("a",Er,[v(j,{display:"Forums",direction:r(H).Right,xoffset:"7px"},{default:I(()=>[Dr]),_:1},8,["direction"])])]),u("div",Lr,[u("span",{onClick:h,class:"material-icons"},"discord"),u("ul",Rr,[r(_)?(f(),b("li",qr,[u("a",{href:r(_),target:"_blank"},F(r(m)),9,Br)])):P("",!0),Ar,Ur])])],16)),v(Ca,{ref_key:"info",ref:t,changelog:i.value},null,8,["changelog"]),v(_n,{ref_key:"savesManager",ref:n},null,512),v(Oa,{ref_key:"options",ref:s},null,512),v(bi,{ref_key:"changelog",ref:i},null,512),v(da,{ref_key:"roomsDialog",ref:a},null,512)],64))}});var yn=A(jr,[["__scopeId","data-v-392a44a6"]]);const Gr={class:"inner-tab"},zr=R({__name:"Game",setup(e){const t=Me(T,"tabs"),n=V(()=>Object.keys(ne)),s=L.useHeader;function i(a){const{display:l,minimized:o,minWidth:d,name:m,color:_,minimizable:y,nodes:h}=a;return{display:l,minimized:o,minWidth:d,name:m,color:_,minimizable:y,nodes:h}}return(a,l)=>(f(),b("div",{class:J(["tabs-container",{useHeader:r(s)}])},[(f(!0),b(G,null,Ue(r(t),(o,d)=>{var m,_;return f(),b("div",{key:d,class:J(["tab",r((m=r(ne)[o])==null?void 0:m.classes)]),ref_for:!0,ref:`tab-${d}`,style:te(r((_=r(ne)[o])==null?void 0:_.style))},[d===0&&!r(s)?(f(),D(yn,{key:0})):P("",!0),u("div",Gr,[r(n).includes(o)?(f(),D(pi,Ae({key:0},i(r(ne)[o]),{index:d,tab:()=>{var y;return(y=a.$refs[`tab-${d}`])==null?void 0:y[0]}}),null,16,["index","tab"])):(f(),D(ie(o),{key:1,index:d},null,8,["index"]))])],6)}),128))],2))}});var Hr=A(zr,[["__scopeId","data-v-4cb9ce0f"]]);const It=e=>(de("data-v-2a68614e"),e=e(),me(),e),Wr=It(()=>u("span",null,"Chat",-1)),Kr={key:0,style:{"margin-left":"10px"}},Yr={key:0,class:"chat-user"},Zr=It(()=>u("hr",{style:{"margin-top":"0"}},null,-1)),Jr={class:"chat-submit"},Xr=It(()=>u("span",{class:"material-icons"},"check",-1)),Qr=[Xr],eo=R({__name:"Chat",setup(e){const t=C(!1),n=C(0),s=C(""),i=je([]),a=C(null);function l(){Le("chat",s.value),s.value=""}W.on("chat",(d,m)=>{i.push({user:d,message:m});const _=a.value&&a.value.scrollTop>=a.value.scrollHeight-a.value.clientHeight;_&&_e(()=>{a.value&&(a.value.scrollTop=a.value.scrollHeight-a.value.clientHeight)}),(!_||!t.value)&&d&&n.value++});function o(){_e(()=>{a.value&&n.value>0&&a.value.scrollTop>=a.value.scrollHeight-a.value.clientHeight&&(n.value=0)})}return Q(t,d=>{d&&(n.value=0)}),(d,m)=>ot((f(),b("div",{class:J(["chat",{open:t.value}])},[u("div",{class:"chat-toggle",onClick:m[0]||(m[0]=_=>t.value=!t.value)},[Wr,n.value?(f(),b("span",Kr,"["+F(n.value>9?"9+":n.value)+"]",1)):P("",!0)]),u("div",{class:"chat-messages",ref_key:"scroll",ref:a,onScrollPassive:o},[(f(!0),b(G,null,Ue(i,(_,y)=>(f(),b("div",{key:y,class:"chat-message-container"},[_.user?(f(),b("span",Yr,F(r($t)[_.user]),1)):P("",!0),u("span",{class:"chat-message",style:te(_.user?"":"font-style: italic")},F(_.message),5)]))),128))],544),Zr,u("div",Jr,[v(he,{modelValue:s.value,"onUpdate:modelValue":m[1]||(m[1]=_=>s.value=_),onSubmit:l,submitOnBlur:!1},null,8,["modelValue"]),u("button",{onPointerdown:l,class:"button"},Qr,32)])],2)),[[Bt,r(se)]])}});var to=A(eo,[["__scopeId","data-v-2a68614e"]]);const no={class:"grid"},so=["onClick","onMouseover"],io=R({__name:"HexGrid",props:{gridData:null,selectedColor:null},emits:["updateColor"],setup(e,{emit:t}){const n=e,{selectedColor:s}=oe(n),i=C(null);function a(d,m){t("updateColor",d,m,s.value)}function l(d,m){i.value={row:d,col:m}}function o(){i.value=null}return(d,m)=>(f(),b("div",no,[(f(!0),b(G,null,Ue(e.gridData,(_,y)=>(f(),b("div",{key:y,class:"row"},[(f(!0),b(G,null,Ue(_,(h,N)=>(f(),b("div",{key:`${y}-${N}-${h}`,class:"hexagon-wrapper",style:te({"--color":h}),onClick:p=>a(y,N),onMouseover:p=>l(y,N),onMouseout:o},[u("div",{class:"hexagon",style:te({backgroundColor:h})},null,4),v(ut,{name:"fade"},{default:I(()=>{var p,w;return[((p=i.value)==null?void 0:p.row)===y&&((w=i.value)==null?void 0:w.col)===N&&h!==r(s)?(f(),b("div",{key:0,class:"hexagon-overlay",style:te({"--color":r(s)})},[u("div",{class:"hexagon",style:te({backgroundColor:r(s)})},null,4)],4)):P("",!0)]}),_:2},1024)],44,so))),128))]))),128))]))}});var ao=A(io,[["__scopeId","data-v-579ff0b3"]]);const we={gray:"rgba(64, 64, 64, 0.6)",red:"rgba(255, 0, 0, 0.86)",green:"rgba(0, 255, 0, 0.6)",blue:"rgba(0, 0, 255, 0.6)"},bn=dn("main",function(){const e=Mt([[we.gray,we.gray],[we.gray,we.gray,we.gray],[we.gray,we.gray]]);return{name:"Main",minimizable:!1,classes:{main:!0},grid:e,display:X(()=>v(G,null,[v(ao,{gridData:e.value,selectedColor:we.red},null),v(to,null,null)]))}}),ro=e=>[bn],Nn=V(()=>!1);function oo(e,t){}var wn=Object.freeze(Object.defineProperty({__proto__:null,main:bn,getInitialLayers:ro,hasWon:Nn,fixOldSave:oo},Symbol.toStringTag,{value:"Module"}));const Xe=e=>(de("data-v-4a50ce42"),e=e(),me(),e),lo={class:"game-over-modal-header"},uo=["src","alt"],co={class:"game-over-modal-title"},mo=Xe(()=>u("h2",null,"Congratulations!",-1)),fo={key:0},ho=Xe(()=>u("br",null,null,-1)),go=Xe(()=>u("div",null," Please check the Discord to discuss the game or to check for new content updates! ",-1)),po=Xe(()=>u("br",null,null,-1)),vo=["href"],_o=Xe(()=>u("span",{class:"material-icons game-over-modal-discord"},"discord",-1)),yo=R({__name:"GameOverScreen",setup(e){const{title:t,logo:n,discordName:s,discordLink:i,versionNumber:a,versionTitle:l}=L,o=V(()=>Nt(T.timePlayed)),d=V(()=>Nn.value&&!T.keepGoing),m=Me(T,"autosave");function _(){T.keepGoing=!0}function y(){xe(qe())}return(h,N)=>(f(),D(Ce,{"model-value":r(d)},{header:I(()=>[u("div",lo,[r(n)?(f(),b("img",{key:0,class:"game-over-modal-logo",src:r(n),alt:r(t)},null,8,uo)):P("",!0),u("div",co,[mo,u("h4",null,"You've beaten "+F(r(t))+" v"+F(r(a))+": "+F(r(l)),1)])])]),body:I(({shown:p})=>[p?(f(),b("div",fo,[u("div",null,"It took you "+F(r(o))+" to beat the game.",1),ho,go,po,u("div",null,[u("a",{href:r(i),class:"game-over-modal-discord-link"},[_o,E(" "+F(r(s)),1)],8,vo)]),v(ve,{title:"Autosave",modelValue:r(m),"onUpdate:modelValue":N[0]||(N[0]=w=>Z(m)?m.value=w:null)},null,8,["modelValue"])])):P("",!0)]),footer:I(()=>[u("div",{class:"game-over-footer"},[u("button",{onClick:_,class:"button"},"Keep Going"),u("button",{onClick:y,class:"button danger"},"Play Again")])]),_:1},8,["model-value"]))}});var bo=A(yo,[["__scopeId","data-v-4a50ce42"]]);const mt=e=>(de("data-v-3de07c06"),e=e(),me(),e),No=mt(()=>u("div",{class:"nan-modal-header"},[u("h2",null,"NaN value detected!")],-1)),wo={key:0},ko=mt(()=>u("br",null,null,-1)),$o=["href"],So=mt(()=>u("span",{class:"material-icons nan-modal-discord"},"discord",-1)),Mo=mt(()=>u("br",null,null,-1)),Co={class:"nan-footer"},To=R({__name:"NaNScreen",setup(e){const{discordName:t,discordLink:n}=L,s=Me(T,"autosave"),i=Me(B,"hasNaN"),a=C(null),l=V(()=>{var N;return(N=B.NaNPath)==null?void 0:N.join(".")}),o=V(()=>{var N;return(N=B.NaNPath)==null?void 0:N.slice(-1)[0]}),d=V(()=>B.NaNReceiver&&o.value?B.NaNReceiver[o.value]:null),m=V({get(){return T.devSpeed===0},set(N){T.devSpeed=N?null:0}});function _(){B.NaNReceiver&&o.value&&(B.NaNReceiver[o.value]=new $(0),B.hasNaN=!1)}function y(){B.NaNReceiver&&o.value&&(B.NaNReceiver[o.value]=new $(1),B.hasNaN=!1)}function h(){B.NaNReceiver&&o.value&&(B.NaNReceiver[o.value]=new $(NaN),B.hasNaN=!1)}return(N,p)=>(f(),b(G,null,[v(Ce,Ae({modelValue:r(i),"onUpdate:modelValue":p[4]||(p[4]=w=>Z(i)?i.value=w:null)},N.$attrs),{header:I(()=>[No]),body:I(()=>[u("div",null,[E(' Attempted to assign "'+F(r(l))+'" to NaN',1),r(d)?(f(),b("span",wo,F(" ")+"(previously "+F(r(Yt)(r(d)))+")",1)):P("",!0),E(". Auto-saving has been "+F(r(s)?"enabled":"disabled")+". Check the console for more details, and consider sharing it with the developers on discord. ",1)]),ko,u("div",null,[u("a",{href:r(n),class:"nan-modal-discord-link"},[So,E(" "+F(r(t)),1)],8,$o)]),Mo,v(ve,{title:"Autosave",modelValue:r(s),"onUpdate:modelValue":p[0]||(p[0]=w=>Z(s)?s.value=w:null)},null,8,["modelValue"]),r(L).enablePausing?(f(),D(ve,{key:0,title:"Pause game",modelValue:r(m),"onUpdate:modelValue":p[1]||(p[1]=w=>Z(m)?m.value=w:null)},null,8,["modelValue"])):P("",!0)]),footer:I(()=>[u("div",Co,[u("button",{onClick:p[2]||(p[2]=w=>{var k;return(k=a.value)==null?void 0:k.open()}),class:"button"},"Open Saves Manager"),u("button",{onClick:_,class:"button"},"Set to 0"),u("button",{onClick:y,class:"button"},"Set to 1"),r(d)&&r($).neq(r(d),0)&&r($).neq(r(d),1)?(f(),b("button",{key:0,onClick:p[3]||(p[3]=w=>i.value=!1),class:"button"}," Set to previous ")):P("",!0),u("button",{onClick:h,class:"button danger"},"Ignore")])]),_:1},16,["modelValue"]),v(_n,{ref_key:"savesManager",ref:a},null,512)],64))}});var Io=A(To,[["__scopeId","data-v-3de07c06"]]);const Po={key:0,class:"tpsDisplay"},xo={key:0,class:"low"},Fo=R({__name:"TPS",setup(e){const t=V(()=>$.div(B.lastTenTicks.length,B.lastTenTicks.reduce((a,l)=>a+l,0))),n=C([]);lt(()=>{n.value.push(Math.round(t.value.toNumber())),n.value.length>10&&(n.value=n.value.slice(1))});const s=V(()=>n.value.reduce((a,l)=>$.max(a,l),0)),i=V(()=>$.sub(t.value,s.value).gt(1));return(a,l)=>r(t).isNan()?P("",!0):(f(),b("div",Po,[E(" TPS: "+F(r(pt)(r(t)))+" ",1),v(ut,{name:"fade"},{default:I(()=>[r(i)?(f(),b("span",xo,F(r(pt)(r(s))),1)):P("",!0)]),_:1})]))}});var Oo=A(Fo,[["__scopeId","data-v-46a3ed5b"]]);var Vo=R({__name:"App",setup(e){const t=L.useHeader,n=V(()=>ct[U.theme].variables),s=Me(U,"showTPS"),i=V(()=>pe(X(()=>v(G,null,[Zs.map(dt)]))));return(a,l)=>(f(),b(G,null,[u("div",{id:"modal-root",style:te(r(n))},null,4),u("div",{class:J(["app",{useHeader:r(t)}]),style:te(r(n))},[r(t)?(f(),D(yn,{key:0})):P("",!0),v(Hr),r(r(s))?(f(),D(Oo,{key:1})):P("",!0),v(bo),v(Io),(f(),D(ie(r(i))))],6)],64))}});var Eo=A(Vo,[["__scopeId","data-v-7c41425b"]]);function Do(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisterError:a}=e;let l,o;const d=async(m=!0)=>{m&&(l==null||l.addEventListener("controlling",_=>{_.isUpdate&&window.location.reload()})),o&&o.waiting&&await Bn(o.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){l=new qn("./sw.js",{scope:"./",type:"classic"}),l.addEventListener("activated",m=>{m.isUpdate||s==null||s()});{const m=()=>{n==null||n()};l.addEventListener("waiting",m),l.addEventListener("externalwaiting",m)}l.register({immediate:t}).then(m=>{o=m,i==null||i(m)}).catch(m=>{a==null||a(m)})}return d}function Lo(e={}){const{immediate:t=!0,onNeedRefresh:n,onOfflineReady:s,onRegistered:i,onRegisterError:a}=e,l=C(!1),o=C(!1);return{updateServiceWorker:Do({immediate:t,onNeedRefresh(){l.value=!0,n==null||n()},onOfflineReady(){o.value=!0,s==null||s()},onRegistered:i,onRegisterError:a}),offlineReady:o,needRefresh:l}}document.title=L.title;window.projInfo=L;if(L.id==="")throw"Project ID is empty! Please select a unique ID for this project in /src/data/projInfo.json";requestAnimationFrame(async()=>{console.log(`%cMade in Profectus%c
Learn more at www.moddingtree.com`,"font-weight: bold; font-size: 24px; color: #A3BE8C; background: #2E3440; padding: 4px 8px; border-radius: 8px;","padding: 4px;"),await tn();const{globalBus:e,startGameLoop:t}=await tt(()=>Promise.resolve().then(function(){return Rs}),void 0),n=window.vue=Cn(Eo);e.emit("setupVue",n),n.mount("#app"),_e(()=>{const s=Ut(),{updateServiceWorker:i}=Lo({onNeedRefresh(){s.info("New content available, click or reload to update.",{timeout:!1,closeOnClick:!1,draggable:!1,icon:{iconClass:"material-icons",iconChildren:"refresh",iconTag:"i"},rtl:!1,onClick(){i()}})},onOfflineReady(){s.info("App ready to work offline")},onRegisterError:console.warn,onRegistered(a){a&&setInterval(a.update,60*60*1e3)}})}),t()});
